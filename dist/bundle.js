!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ecstatic",[],n):"object"==typeof exports?exports.ecstatic=n():e.ecstatic=n()}(window,(function(){return function(e){var n=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(e,t){!function(e,n){if(!a[e]||!G[e])return;for(var t in G[e]=!1,n)Object.prototype.hasOwnProperty.call(n,t)&&(b[t]=n[t]);0==--r&&0===u&&X()}(e,t),n&&n(e,t)};var t,Q=!0,B="81346c8810c346170231",i={},c=[],s=[];function F(e){var n=Z[e];if(!n)return R;var Q=function(Q){return n.hot.active?(Z[Q]?-1===Z[Q].parents.indexOf(e)&&Z[Q].parents.push(e):(c=[e],t=Q),-1===n.children.indexOf(Q)&&n.children.push(Q)):(console.warn("[HMR] unexpected require("+Q+") from disposed module "+e),c=[]),R(Q)},B=function(e){return{configurable:!0,enumerable:!0,get:function(){return R[e]},set:function(n){R[e]=n}}};for(var i in R)Object.prototype.hasOwnProperty.call(R,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(Q,i,B(i));return Q.e=function(e){return"ready"===l&&o("prepare"),u++,R.e(e).then(n,(function(e){throw n(),e}));function n(){u--,"prepare"===l&&(C[e]||p(e),0===u&&0===r&&X())}},Q.t=function(e,n){return 1&n&&(e=Q(e)),R.t(e,-2&n)},Q}function d(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var Q=0;Q<e.length;Q++)n._acceptedDependencies[e[Q]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:x,apply:V,status:function(e){if(!e)return l;U.push(e)},addStatusHandler:function(e){U.push(e)},removeStatusHandler:function(e){var n=U.indexOf(e);n>=0&&U.splice(n,1)},data:i[e]};return t=void 0,n}var U=[],l="idle";function o(e){l=e;for(var n=0;n<U.length;n++)U[n].call(null,e)}var I,b,g,r=0,u=0,C={},G={},a={};function y(e){return+e+""===e?+e:e}function x(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return Q=e,o("check"),(n=1e4,n=n||1e4,new Promise((function(e,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var Q=new XMLHttpRequest,B=R.p+"hot/hot-update.json";Q.open("GET",B,!0),Q.timeout=n,Q.send(null)}catch(e){return t(e)}Q.onreadystatechange=function(){if(4===Q.readyState)if(0===Q.status)t(new Error("Manifest request to "+B+" timed out."));else if(404===Q.status)e();else if(200!==Q.status&&304!==Q.status)t(new Error("Manifest request to "+B+" failed."));else{try{var n=JSON.parse(Q.responseText)}catch(e){return void t(e)}e(n)}}}))).then((function(e){if(!e)return o("idle"),null;G={},C={},a=e.c,g=e.h,o("prepare");var n=new Promise((function(e,n){I={resolve:e,reject:n}}));b={};return p(0),"prepare"===l&&0===u&&0===r&&X(),n}));var n}function p(e){var n;a[e]?(G[e]=!0,r++,(n=document.createElement("script")).charset="utf-8",n.src=R.p+"hot/hot-update.js",document.head.appendChild(n)):C[e]=!0}function X(){o("ready");var e=I;if(I=null,e)if(Q)Promise.resolve().then((function(){return V(Q)})).then((function(n){e.resolve(n)}),(function(n){e.reject(n)}));else{var n=[];for(var t in b)Object.prototype.hasOwnProperty.call(b,t)&&n.push(y(t));e.resolve(n)}}function V(n){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var t,Q,s,F,d;function U(e){for(var n=[e],t={},Q=n.map((function(e){return{chain:[e],id:e}}));Q.length>0;){var B=Q.pop(),i=B.id,c=B.chain;if((F=Z[i])&&!F.hot._selfAccepted){if(F.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(F.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var s=0;s<F.parents.length;s++){var d=F.parents[s],U=Z[d];if(U){if(U.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([d]),moduleId:i,parentId:d};-1===n.indexOf(d)&&(U.hot._acceptedDependencies[i]?(t[d]||(t[d]=[]),I(t[d],[i])):(delete t[d],n.push(d),Q.push({chain:c.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function I(e,n){for(var t=0;t<n.length;t++){var Q=n[t];-1===e.indexOf(Q)&&e.push(Q)}}n=n||{};var r={},u=[],C={},G=function(){console.warn("[HMR] unexpected require("+p.moduleId+") to disposed module")};for(var x in b)if(Object.prototype.hasOwnProperty.call(b,x)){var p;d=y(x);var X=!1,V=!1,L=!1,E="";switch((p=b[x]?U(d):{type:"disposed",moduleId:x}).chain&&(E="\nUpdate propagation: "+p.chain.join(" -> ")),p.type){case"self-declined":n.onDeclined&&n.onDeclined(p),n.ignoreDeclined||(X=new Error("Aborted because of self decline: "+p.moduleId+E));break;case"declined":n.onDeclined&&n.onDeclined(p),n.ignoreDeclined||(X=new Error("Aborted because of declined dependency: "+p.moduleId+" in "+p.parentId+E));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(p),n.ignoreUnaccepted||(X=new Error("Aborted because "+d+" is not accepted"+E));break;case"accepted":n.onAccepted&&n.onAccepted(p),V=!0;break;case"disposed":n.onDisposed&&n.onDisposed(p),L=!0;break;default:throw new Error("Unexception type "+p.type)}if(X)return o("abort"),Promise.reject(X);if(V)for(d in C[d]=b[d],I(u,p.outdatedModules),p.outdatedDependencies)Object.prototype.hasOwnProperty.call(p.outdatedDependencies,d)&&(r[d]||(r[d]=[]),I(r[d],p.outdatedDependencies[d]));L&&(I(u,[p.moduleId]),C[d]=G)}var m,N=[];for(Q=0;Q<u.length;Q++)d=u[Q],Z[d]&&Z[d].hot._selfAccepted&&C[d]!==G&&N.push({module:d,errorHandler:Z[d].hot._selfAccepted});o("dispose"),Object.keys(a).forEach((function(e){!1===a[e]&&function(e){delete installedChunks[e]}(e)}));for(var W,h,A=u.slice();A.length>0;)if(d=A.pop(),F=Z[d]){var D={},v=F.hot._disposeHandlers;for(s=0;s<v.length;s++)(t=v[s])(D);for(i[d]=D,F.hot.active=!1,delete Z[d],delete r[d],s=0;s<F.children.length;s++){var S=Z[F.children[s]];S&&((m=S.parents.indexOf(d))>=0&&S.parents.splice(m,1))}}for(d in r)if(Object.prototype.hasOwnProperty.call(r,d)&&(F=Z[d]))for(h=r[d],s=0;s<h.length;s++)W=h[s],(m=F.children.indexOf(W))>=0&&F.children.splice(m,1);for(d in o("apply"),B=g,C)Object.prototype.hasOwnProperty.call(C,d)&&(e[d]=C[d]);var f=null;for(d in r)if(Object.prototype.hasOwnProperty.call(r,d)&&(F=Z[d])){h=r[d];var H=[];for(Q=0;Q<h.length;Q++)if(W=h[Q],t=F.hot._acceptedDependencies[W]){if(-1!==H.indexOf(t))continue;H.push(t)}for(Q=0;Q<H.length;Q++){t=H[Q];try{t(h)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:d,dependencyId:h[Q],error:e}),n.ignoreErrored||f||(f=e)}}}for(Q=0;Q<N.length;Q++){var T=N[Q];d=T.module,c=[d];try{R(d)}catch(e){if("function"==typeof T.errorHandler)try{T.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:t,originalError:e}),n.ignoreErrored||f||(f=t),f||(f=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:d,error:e}),n.ignoreErrored||f||(f=e)}}return f?(o("fail"),Promise.reject(f)):(o("idle"),new Promise((function(e){e(u)})))}var Z={};function R(n){if(Z[n])return Z[n].exports;var t=Z[n]={i:n,l:!1,exports:{},hot:d(n),parents:(s=c,c=[],s),children:[]};return e[n].call(t.exports,t,t.exports,F(n)),t.l=!0,t.exports}return R.m=e,R.c=Z,R.d=function(e,n,t){R.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},R.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},R.t=function(e,n){if(1&n&&(e=R(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(R.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var Q in e)R.d(t,Q,function(n){return e[n]}.bind(null,Q));return t},R.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(n,"a",n),n},R.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},R.p="/static/",R.h=function(){return B},F(0)(R.s=0)}([function(e,n,t){e.exports=t(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.type, component);\n    });\n\n    _defineProperty(this, "update", (cType, func) => {\n      if (this.components.has(cType)) {\n        const c = this.components.get(cType);\n\n        if (c) {\n          const updatedComponent = func(c);\n          this.components.set(cType, updatedComponent);\n        }\n      }\n    });\n\n    _defineProperty(this, "get", cType => {\n      if (!this.components.has(cType)) {\n        throw new Error(`ComponentCollection does not have component of type ${cType}`);\n      }\n\n      return this.components.get(cType);\n    });\n\n    _defineProperty(this, "has", cType => {\n      if (Array.isArray(cType)) {\n        return cType.every(ct => this.components.has(ct) === true);\n      } else {\n        return this.components.has(cType);\n      }\n    });\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cTypes => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cTypes => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cType => {\n      console.log(\'in grab\', cType);\n      console.log(\'entities\', this.entities.values());\n      const entity = this.locate(cType);\n      console.log(\'got an entity!!\', entity);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id);\n        const component = cc.get(cType);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cType, predicate) => {\n      const entities = this.locateAll(cType);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id);\n        const component = cc.get(cType);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cType => {\n      return this.locateAll(cType).map(entity => ({\n        entity,\n        component: entity.components.get(cType)\n      }));\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  registerSystem(cTypes) {\n    this.entitiesByCTypes.set(cTypes, new Set());\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n  }\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n  }\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != \'undefined\' && typeof msCrypto.getRandomValues == \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex[bytesToUuid_i] = (bytesToUuid_i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join(\'\');\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == \'string\') {\n    buf = options === \'binary\' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "id", void 0);\n\n    Entity_defineProperty(this, "world", void 0);\n\n    this.id = esm_browser_v4();\n    this.world = world;\n    /*\n    Registering with the World.\n    */\n\n    this.world.registerEntity(this);\n  }\n\n  add(component) {\n    this.world.set(this.id, component);\n    return this;\n  } // TODO: figure out some much better error handling throughout this library.\n  //       Probably throw some errors.\n\n\n  get(cType) {\n    const cc = this.world.entities.get(this.id);\n\n    if (!cc) {\n      console.error(\'unable to find component collection for specified entity: \', this.id);\n    }\n\n    const component = cc.get(cType);\n\n    if (!component) {\n      console.error(`Unable to find component of type ${cType} in entity ${this.id}`);\n    }\n\n    return component;\n  }\n\n  getAll() {\n    return this.world.componentCollections.get(this.id);\n  }\n\n  get components() {\n    return this.world.componentCollections.get(this.id);\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this.world.clearEntityComponents(this.id);\n    return this;\n  }\n\n  destroy() {\n    this.world.destroyEntity(this.id);\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\nfunction createSystem(world, cTypes, systemFunc) {\n  world.registerSystem(cTypes);\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    for (const eid of world.entitiesByCTypes.get(cTypes)) {\n      const args = {\n        entity: world.entities.get(eid),\n        components: world.componentCollections.get(eid),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsInR5cGUiLCJjVHlwZSIsImZ1bmMiLCJoYXMiLCJjIiwiZ2V0IiwidXBkYXRlZENvbXBvbmVudCIsIkVycm9yIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJjdCIsInNpemUiLCJXb3JsZCIsInByZWRpY2F0ZSIsImVudGl0eSIsImVudGl0aWVzIiwidmFsdWVzIiwicmVzdWx0cyIsInB1c2giLCJjVHlwZXMiLCJjb25zb2xlIiwibG9nIiwibG9jYXRlIiwiY2MiLCJjb21wb25lbnRDb2xsZWN0aW9ucyIsImlkIiwibG9jYXRlQWxsIiwibWFwIiwiZWlkIiwiYWRkIiwiY3RBcnIiLCJlbnRpdHlTZXQiLCJlbnRpdGllc0J5Q1R5cGVzIiwicmVnaXN0ZXJTeXN0ZW0iLCJTZXQiLCJyZWdpc3RlckVudGl0eSIsImNsZWFyRW50aXR5Q29tcG9uZW50cyIsImRlbGV0ZSIsImRlc3Ryb3lFbnRpdHkiLCJFbnRpdHkiLCJjb25zdHJ1Y3RvciIsIndvcmxkIiwidXVpZHY0IiwiZXJyb3IiLCJnZXRBbGwiLCJjbGVhciIsImRlc3Ryb3kiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdGVTeXN0ZW0iLCJzeXN0ZW1GdW5jIiwiaW5kZXgiLCJhcmdzIiwiaXNGaXJzdCIsImlzTGFzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFZSxNQUFNQSxtQkFBTixDQUE4QjtBQUFBO0FBQUEsd0NBQ0UsSUFBSUMsR0FBSixFQURGOztBQUFBLGlDQUdwQ0MsU0FBRCxJQUFvQztBQUN4QyxXQUFLQyxVQUFMLENBQWdCQyxHQUFoQixDQUFvQkYsU0FBUyxDQUFDRyxJQUE5QixFQUFvQ0gsU0FBcEM7QUFDRCxLQUwwQzs7QUFBQSxvQ0FPbEMsQ0FBQ0ksS0FBRCxFQUFZQyxJQUFaLEtBQWdFO0FBQ3ZFLFVBQUksS0FBS0osVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JGLEtBQXBCLENBQUosRUFBZ0M7QUFDOUIsY0FBTUcsQ0FBQyxHQUFHLEtBQUtOLFVBQUwsQ0FBZ0JPLEdBQWhCLENBQW9CSixLQUFwQixDQUFWOztBQUVBLFlBQUlHLENBQUosRUFBTztBQUNMLGdCQUFNRSxnQkFBZ0IsR0FBR0osSUFBSSxDQUFDRSxDQUFELENBQTdCO0FBQ0EsZUFBS04sVUFBTCxDQUFnQkMsR0FBaEIsQ0FBb0JFLEtBQXBCLEVBQTJCSyxnQkFBM0I7QUFDRDtBQUNGO0FBQ0YsS0FoQjBDOztBQUFBLGlDQWtCakNMLEtBQUosSUFBcUI7QUFDekIsVUFBSSxDQUFDLEtBQUtILFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CRixLQUFwQixDQUFMLEVBQWlDO0FBQy9CLGNBQU0sSUFBSU0sS0FBSixDQUFXLHVEQUFzRE4sS0FBTSxFQUF2RSxDQUFOO0FBQ0Q7O0FBRUQsYUFBTyxLQUFLSCxVQUFMLENBQWdCTyxHQUFoQixDQUFvQkosS0FBcEIsQ0FBUDtBQUNELEtBeEIwQzs7QUFBQSxpQ0EwQnBDQSxLQUFE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QSxVQUFNdkMsSUFBSSxHQUFHOEIsS0FBSyxDQUFDVCxnQkFBTixDQUF1QnJCLElBQXBDLENBRmlCLENBSWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBLFNBQUssTUFBTWlCLEdBQVgsSUFBa0JhLEtBQUssQ0FBQ1QsZ0JBQU4sQ0FBdUI1QixHQUF2QixDQUEyQmUsTUFBM0IsQ0FBbEIsRUFBc0Q7QUFDcEQsWUFBTWdDLElBQXdCLEdBQUc7QUFDL0JyQyxjQUFNLEVBQUUyQixLQUFLLENBQUMxQixRQUFOLENBQWVYLEdBQWYsQ0FBbUJ3QixHQUFuQixDQUR1QjtBQUUvQi9CLGtCQUFVLEVBQUU0QyxLQUFLLENBQUNqQixvQkFBTixDQUEyQnBCLEdBQTNCLENBQStCd0IsR0FBL0IsQ0FGbUI7QUFHL0JhLGFBSCtCO0FBSS9CUyxhQUorQjtBQUsvQnZDLFlBTCtCO0FBTS9CeUMsZUFBTyxFQUFFRixLQUFLLEtBQUssQ0FOWTtBQU8vQkcsY0FBTSxFQUFFSCxLQUFLLEdBQUcsQ0FBUixLQUFjdkM7QUFQUyxPQUFqQztBQVVBc0MsZ0JBQVUsQ0FBQ0UsSUFBRCxDQUFWO0FBRUFELFdBQUssSUFBSSxDQUFUO0FBQ0Q7QUFDRixHQTNDRDtBQTRDRCxDOztBQ3ZFRDtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICBwcml2YXRlIGNvbXBvbmVudHM6IE1hcDxDVCwgQ29tcG9uZW50PENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgYWRkID0gKGNvbXBvbmVudDogQ29tcG9uZW50PENUPik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY29tcG9uZW50LnR5cGUsIGNvbXBvbmVudCk7XG4gIH1cblxuICB1cGRhdGUgPSAoY1R5cGU6IENULCBmdW5jOiAoYzogQ29tcG9uZW50PENUPikgPT4gQ29tcG9uZW50PENUPik6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKSkge1xuICAgICAgY29uc3QgYyA9IHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpO1xuXG4gICAgICBpZiAoYykge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29tcG9uZW50ID0gZnVuYyhjKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjVHlwZSwgdXBkYXRlZENvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGdldCA9IDxDPihjVHlwZTogQ1QpOiBDID0+IHtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50cy5oYXMoY1R5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudENvbGxlY3Rpb24gZG9lcyBub3QgaGF2ZSBjb21wb25lbnQgb2YgdHlwZSAke2NUeXBlfWApXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuZ2V0KGNUeXBlKSBhcyB1bmtub3duIGFzIEM7XG4gIH1cblxuICBoYXMgPSAoY1R5cGU6IENUIHwgQ1RbXSk6IGJvb2xlYW4gPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNUeXBlKSkge1xuICAgICAgcmV0dXJuIGNUeXBlLmV2ZXJ5KChjdCkgPT4gdGhpcy5jb21wb25lbnRzLmhhcyhjdCkgPT09IHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZSlcbiAgICB9XG4gIH1cblxuICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuc2l6ZTtcbiAgfVxufVxuIiwiaW1wb3J0IEVudGl0eSwgeyBFbnRpdHlJZCB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gJy4vQ29tcG9uZW50Q29sbGVjdGlvbic7XG5cbnR5cGUgRmluZFByZWRpY2F0ZTxDVD4gPSAoZW50aXR5OiBFbnRpdHk8Q1Q+KSA9PiBib29sZWFuO1xuXG50eXBlIEdyYWJQcmVkaWNhdGU8Qz4gPSAoY29tcG9uZW50OiBDKSA9PiBib29sZWFuO1xuXG5pbnRlcmZhY2UgU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4ge1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGNvbXBvbmVudDogQztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ybGQ8Q1Q+IHtcbiAgY29tcG9uZW50Q29sbGVjdGlvbnM6IE1hcDxFbnRpdHlJZCwgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlDVHlwZXM6IE1hcDxDVFtdLCBTZXQ8RW50aXR5SWQ+PiA9IG5ldyBNYXAoKTtcblxuICAvKiogXCJmaW5kc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBhIHByZWRpY2F0ZSAqL1xuICBmaW5kID0gKHByZWRpY2F0ZTogRmluZFByZWRpY2F0ZTxDVD4pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShlbnRpdHkpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogXCJmaW5kc1wiIGFsbCBlbnRpdGllcyBiYXNlZCBvbiBhIHByZWRpY2F0ZSwga2luZGEgbGlrZSBmaWx0ZXIuICovXG4gIGZpbmRBbGwgPSAocHJlZGljYXRlOiBGaW5kUHJlZGljYXRlPENUPik6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKiogXCJsb2NhdGVzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGl0cyBDb21wb25lbnRzLiAqL1xuICBsb2NhdGUgPSAoY1R5cGVzOiBDVCB8IENUW10pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5jb21wb25lbnRzLmhhcyhjVHlwZXMpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogTG9jYXRlcyBhbGwgZW50aXRpZXMgdGhhdCBjb250YWluIHRoZSBjb21wb25lbnRzIG5hbWVkICovXG4gIGxvY2F0ZUFsbCA9IChjVHlwZXM6IENUIHwgQ1RbXSk6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNUeXBlcykpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBncmFiID0gPEM+KGNUeXBlOiBDVCk6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+IHwgbnVsbCA9PiB7XG4gICAgY29uc29sZS5sb2coJ2luIGdyYWInLCBjVHlwZSk7XG4gICAgY29uc29sZS5sb2coJ2VudGl0aWVzJywgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSk7XG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5sb2NhdGUoY1R5cGUpO1xuICAgIGNvbnNvbGUubG9nKCdnb3QgYW4gZW50aXR5ISEnLCBlbnRpdHkpO1xuXG4gICAgaWYgKGVudGl0eSkge1xuICAgICAgY29uc3QgY2MgPSB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpO1xuICBcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxDPihjVHlwZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgY29tcG9uZW50LFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyogR3JhYiBzaW5nbGUgY29tcG9uZW50IGJhc2VkIG9uIGNvbXBvbmVudCB0eXBlIGFuZCBwcmVkaWNhdGUuICovXG4gIGdyYWJCeSA9IDxDPihjVHlwZTogQ1QsIHByZWRpY2F0ZTogR3JhYlByZWRpY2F0ZTxDPik6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLmxvY2F0ZUFsbChjVHlwZSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcykge1xuXG4gICAgICBjb25zdCBjYyA9IHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVudGl0eS5pZCk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxDPihjVHlwZSk7XG5cblxuICAgICAgaWYgKHByZWRpY2F0ZShjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29tcG9uZW50LFxuICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqIEdyYWIgYWxsIHRoZSBjb21wb25lbnRzIHByaW1hcmlseSwgYW5kIHRoZSBlbnRpdGllcyBpZiBuZWVkZWQgICovXG4gIGdyYWJBbGwgPSA8Qz4oY1R5cGU6IENUKTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz5bXSA9PiB7XG4gICAgcmV0dXJuIHRoaXNcbiAgICAgIC5sb2NhdGVBbGwoY1R5cGUpXG4gICAgICAubWFwKGVudGl0eSA9PiAoe1xuICAgICAgICBlbnRpdHksXG4gICAgICAgIGNvbXBvbmVudDogZW50aXR5LmNvbXBvbmVudHMuZ2V0KGNUeXBlKSBhcyB1bmtub3duIGFzIEMsXG4gICAgICB9KSk7XG4gIH1cblxuICBzZXQgPSAoZWlkOiBFbnRpdHlJZCwgY29tcG9uZW50OiBDb21wb25lbnQ8Q1Q+KTogdm9pZCA9PiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY2MuYWRkKGNvbXBvbmVudCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlaWQsIGNjKTtcblxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKGN0QXJyLmV2ZXJ5KGNjLmhhcykpIHtcbiAgICAgICAgZW50aXR5U2V0LmFkZChlaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKGNUeXBlczogQ1RbXSk6IHZvaWQge1xuICAgIHRoaXMuZW50aXRpZXNCeUNUeXBlcy5zZXQoY1R5cGVzLCBuZXcgU2V0PEVudGl0eUlkPigpKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRW50aXR5KGVudGl0eTogRW50aXR5PENUPik6IHZvaWQge1xuICAgIGNvbnN0IGNjID0gbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlbnRpdHkuaWQsIGNjKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldChlbnRpdHkuaWQsIGVudGl0eSk7XG4gIH1cblxuICBjbGVhckVudGl0eUNvbXBvbmVudHMoZWlkOiBFbnRpdHlJZCk6IHZvaWQge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCkpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RW50aXR5KGVpZDogRW50aXR5SWQpOiB2b2lkIHtcbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmRlbGV0ZShlaWQpO1xuICAgIHRoaXMuZW50aXRpZXMuZGVsZXRlKGVpZCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uIEFsc28sXG4vLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDsgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcblxuICByZXR1cm4gW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJywgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLCBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJywgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXV0uam9pbignJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJ5dGVzVG9VdWlkOyIsImltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IGJ5dGVzVG9VdWlkIGZyb20gJy4vYnl0ZXNUb1V1aWQuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tICcuL0NvbXBvbmVudENvbGxlY3Rpb24nO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5PENUPiB7XG4gIGlkOiBzdHJpbmc7XG4gIHdvcmxkOiBXb3JsZDxDVD47XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFdvcmxkPENUPikge1xuICAgIHRoaXMuaWQgPSB1dWlkdjQoKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG5cbiAgICAvKlxuICAgIFJlZ2lzdGVyaW5nIHdpdGggdGhlIFdvcmxkLlxuICAgICovXG4gICAgdGhpcy53b3JsZC5yZWdpc3RlckVudGl0eSh0aGlzKTtcbiAgfVxuXG4gIGFkZChjb21wb25lbnQ6IENvbXBvbmVudDxDVD4pOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLndvcmxkLnNldCh0aGlzLmlkLCBjb21wb25lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBUT0RPOiBmaWd1cmUgb3V0IHNvbWUgbXVjaCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgdGhyb3VnaG91dCB0aGlzIGxpYnJhcnkuXG4gIC8vICAgICAgIFByb2JhYmx5IHRocm93IHNvbWUgZXJyb3JzLlxuICBnZXQoY1R5cGU6IENUKTogQ29tcG9uZW50PENUPiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLndvcmxkLmVudGl0aWVzLmdldCh0aGlzLmlkKTtcblxuICAgIGlmICghY2MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuYWJsZSB0byBmaW5kIGNvbXBvbmVudCBjb2xsZWN0aW9uIGZvciBzcGVjaWZpZWQgZW50aXR5OiAnLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQoY1R5cGUpXG5cbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGZpbmQgY29tcG9uZW50IG9mIHR5cGUgJHtjVHlwZX0gaW4gZW50aXR5ICR7dGhpcy5pZH1gKTtcbiAgICB9XG5cblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBnZXRBbGwoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiB0aGlzLndvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLmlkKTtcbiAgfVxuXG4gIGdldCBjb21wb25lbnRzKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy53b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5pZCk7XG4gIH1cblxuICAvKiogQ2xlYXJzIGFsbCBjb21wb25lbnRzIGZyb20gYW4gRW50aXR5ICovXG4gIGNsZWFyKCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMud29ybGQuY2xlYXJFbnRpdHlDb21wb25lbnRzKHRoaXMuaWQpO1xuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy53b3JsZC5kZXN0cm95RW50aXR5KHRoaXMuaWQpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHk8Q1Q+KFxuICB3b3JsZDogV29ybGQ8Q1Q+LFxuKTogRW50aXR5PENUPiB7XG4gIGNvbnN0IGVudGl0eSA9IG5ldyBFbnRpdHk8Q1Q+KHdvcmxkKTtcblxuICByZXR1cm4gZW50aXR5O1xufVxuXG5cbiIsImltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCBFbnRpdHkgZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcblxuZXhwb3J0IHR5cGUgU3lzdGVtID0gKCkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1GdW5jQXJnczxDVD4ge1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGNvbXBvbmVudHM6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+O1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBpbmRleDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVD4gPSAoXG4gIHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPixcbikgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbTxDVD4oXG4gIHdvcmxkOiBXb3JsZDxDVD4sXG4gIGNUeXBlczogQ1RbXSxcbiAgc3lzdGVtRnVuYzogU3lzdGVtRnVuYzxDVD5cbik6IFN5c3RlbSB7XG4gIHdvcmxkLnJlZ2lzdGVyU3lzdGVtKGNUeXBlcyk7XG5cbiAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IHNpemUgPSB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNpemU7XG5cbiAgICAvLyBVc2VkIGZvciBtYXRjaGluZyB0aGUgYXJyYXkgb2YgQ29tcG9uZW50VHlwZXMgd2hpY2ggaXMgdGhlIGtleVxuICAgIC8vIG9mIHdoZXJlIHRoZSBDb21wb25lbnRDb2xsZWN0aW9uIGlzLCB3aXRoIHRoZSBhcnJheSBvZiBDb21wb25lbnRUeXBlc1xuICAgIC8vIHRoYXQgYXJlIHBhc3Nlcy5cbiAgICAvLyBNaWdodCBiZSBuaWNlIGluIHRoZSBmdXR1cmUgdG8gZ28gYmFjayB0byBhIHJlZiBjaGVjayBvbiBjVHlwZXMsIGJ1dFxuICAgIC8vIGZvciBub3cgdGhpcyBkb2Vzbid0IHNlZW0gdG8gYmUgdGhhdCBtdWNoIG9mIGEgcGVyZiBoaXQuXG4gICAgLy8gZm9yIChjb25zdCBjdCBvZiB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmtleXMoKSkge1xuICAgIC8vICAgaWYgKGNUeXBlcy5sZW5ndGggPT09IGN0Lmxlbmd0aCAmJiBjVHlwZXMuZXZlcnkoYyA9PiBjdC5pbmNsdWRlcyhjKSkpIHtcbiAgICAvLyAgICAgZm9yIChjb25zdCBlaWQgb2Ygd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSkge1xuICAgIC8vICAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAvLyAgICAgICAgIGVudGl0eTogd29ybGQuZW50aXRpZXMuZ2V0KGVpZCksXG4gICAgLy8gICAgICAgICBjb21wb25lbnRzOiB3b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSxcbiAgICAvLyAgICAgICAgIHdvcmxkLFxuICAgIC8vICAgICAgICAgaW5kZXgsXG4gICAgLy8gICAgICAgICBzaXplLFxuICAgIC8vICAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgLy8gICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAvLyAgICAgICB9XG4gICAgXG4gICAgLy8gICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcbiAgICBcbiAgICAvLyAgICAgICBpbmRleCArPSAxO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIGZvciAoY29uc3QgZWlkIG9mIHdvcmxkLmVudGl0aWVzQnlDVHlwZXMuZ2V0KGNUeXBlcykpIHtcbiAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAgICAgZW50aXR5OiB3b3JsZC5lbnRpdGllcy5nZXQoZWlkKSxcbiAgICAgICAgY29tcG9uZW50czogd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCksXG4gICAgICAgIHdvcmxkLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgICAgfVxuXG4gICAgICBzeXN0ZW1GdW5jKGFyZ3MpO1xuXG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFdvcmxkIGZyb20gJy4vV29ybGQnO1xuaW1wb3J0IHsgY3JlYXRlRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgY3JlYXRlU3lzdGVtIH0gZnJvbSAnLi9TeXN0ZW0nO1xuXG5leHBvcnQge1xuICBXb3JsZCxcbiAgY3JlYXRlRW50aXR5LFxuICBjcmVhdGVTeXN0ZW0sXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')}])}));