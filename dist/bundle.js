!function(Q,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ecstatic",[],n):"object"==typeof exports?exports.ecstatic=n():Q.ecstatic=n()}(window,(function(){return function(Q){var n=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(Q,e){!function(Q,n){if(!x[Q]||!r[Q])return;for(var e in r[Q]=!1,n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);0==--G&&0===u&&X()}(Q,e),n&&n(Q,e)};var e,t=!0,B="e1aa24ce4ac529c34a4f",F={},i=[],U=[];function c(Q){var n=E[Q];if(!n)return N;var t=function(t){return n.hot.active?(E[t]?-1===E[t].parents.indexOf(Q)&&E[t].parents.push(Q):(i=[Q],e=t),-1===n.children.indexOf(t)&&n.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+Q),i=[]),N(t)},B=function(Q){return{configurable:!0,enumerable:!0,get:function(){return N[Q]},set:function(n){N[Q]=n}}};for(var F in N)Object.prototype.hasOwnProperty.call(N,F)&&"e"!==F&&"t"!==F&&Object.defineProperty(t,F,B(F));return t.e=function(Q){return"ready"===l&&d("prepare"),u++,N.e(Q).then(n,(function(Q){throw n(),Q}));function n(){u--,"prepare"===l&&(y[Q]||V(Q),0===u&&0===G&&X())}},t.t=function(Q,n){return 1&n&&(Q=t(Q)),N.t(Q,-2&n)},t}function s(n){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==n,active:!0,accept:function(Q,n){if(void 0===Q)t._selfAccepted=!0;else if("function"==typeof Q)t._selfAccepted=Q;else if("object"==typeof Q)for(var e=0;e<Q.length;e++)t._acceptedDependencies[Q[e]]=n||function(){};else t._acceptedDependencies[Q]=n||function(){}},decline:function(Q){if(void 0===Q)t._selfDeclined=!0;else if("object"==typeof Q)for(var n=0;n<Q.length;n++)t._declinedDependencies[Q[n]]=!0;else t._declinedDependencies[Q]=!0},dispose:function(Q){t._disposeHandlers.push(Q)},addDisposeHandler:function(Q){t._disposeHandlers.push(Q)},removeDisposeHandler:function(Q){var n=t._disposeHandlers.indexOf(Q);n>=0&&t._disposeHandlers.splice(n,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":(o={})[n]=Q[n],d("ready");break;case"ready":L(n);break;case"prepare":case"check":case"dispose":case"apply":(C=C||[]).push(n)}},check:Z,apply:p,status:function(Q){if(!Q)return l;I.push(Q)},addStatusHandler:function(Q){I.push(Q)},removeStatusHandler:function(Q){var n=I.indexOf(Q);n>=0&&I.splice(n,1)},data:F[n]};return e=void 0,t}var I=[],l="idle";function d(Q){l=Q;for(var n=0;n<I.length;n++)I[n].call(null,Q)}var g,o,b,C,G=0,u=0,y={},r={},x={};function a(Q){return+Q+""===Q?+Q:Q}function Z(Q){if("idle"!==l)throw new Error("check() is only allowed in idle status");return t=Q,d("check"),(n=1e4,n=n||1e4,new Promise((function(Q,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,B=N.p+"hot/hot-update.json";t.open("GET",B,!0),t.timeout=n,t.send(null)}catch(Q){return e(Q)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+B+" timed out."));else if(404===t.status)Q();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+B+" failed."));else{try{var n=JSON.parse(t.responseText)}catch(Q){return void e(Q)}Q(n)}}}))).then((function(Q){if(!Q)return d(R()?"ready":"idle"),null;r={},y={},x=Q.c,b=Q.h,d("prepare");var n=new Promise((function(Q,n){g={resolve:Q,reject:n}}));o={};return V(0),"prepare"===l&&0===u&&0===G&&X(),n}));var n}function V(Q){var n;x[Q]?(r[Q]=!0,G++,(n=document.createElement("script")).charset="utf-8",n.src=N.p+"hot/hot-update.js",document.head.appendChild(n)):y[Q]=!0}function X(){d("ready");var Q=g;if(g=null,Q)if(t)Promise.resolve().then((function(){return p(t)})).then((function(n){Q.resolve(n)}),(function(n){Q.reject(n)}));else{var n=[];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&n.push(a(e));Q.resolve(n)}}function p(n){if("ready"!==l)throw new Error("apply() is only allowed in ready status");return function n(t){var U,c,s,I,l;function g(Q){for(var n=[Q],e={},t=n.map((function(Q){return{chain:[Q],id:Q}}));t.length>0;){var B=t.pop(),F=B.id,i=B.chain;if((I=E[F])&&(!I.hot._selfAccepted||I.hot._selfInvalidated)){if(I.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:F};if(I.hot._main)return{type:"unaccepted",chain:i,moduleId:F};for(var U=0;U<I.parents.length;U++){var c=I.parents[U],s=E[c];if(s){if(s.hot._declinedDependencies[F])return{type:"declined",chain:i.concat([c]),moduleId:F,parentId:c};-1===n.indexOf(c)&&(s.hot._acceptedDependencies[F]?(e[c]||(e[c]=[]),G(e[c],[F])):(delete e[c],n.push(c),t.push({chain:i.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:Q,outdatedModules:n,outdatedDependencies:e}}function G(Q,n){for(var e=0;e<n.length;e++){var t=n[e];-1===Q.indexOf(t)&&Q.push(t)}}R();var u={},y=[],r={},Z=function(){console.warn("[HMR] unexpected require("+X.moduleId+") to disposed module")};for(var V in o)if(Object.prototype.hasOwnProperty.call(o,V)){var X;l=a(V),X=o[V]?g(l):{type:"disposed",moduleId:V};var p=!1,L=!1,W=!1,A="";switch(X.chain&&(A="\nUpdate propagation: "+X.chain.join(" -> ")),X.type){case"self-declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(p=new Error("Aborted because of self decline: "+X.moduleId+A));break;case"declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(p=new Error("Aborted because of declined dependency: "+X.moduleId+" in "+X.parentId+A));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(X),t.ignoreUnaccepted||(p=new Error("Aborted because "+l+" is not accepted"+A));break;case"accepted":t.onAccepted&&t.onAccepted(X),L=!0;break;case"disposed":t.onDisposed&&t.onDisposed(X),W=!0;break;default:throw new Error("Unexception type "+X.type)}if(p)return d("abort"),Promise.reject(p);if(L)for(l in r[l]=o[l],G(y,X.outdatedModules),X.outdatedDependencies)Object.prototype.hasOwnProperty.call(X.outdatedDependencies,l)&&(u[l]||(u[l]=[]),G(u[l],X.outdatedDependencies[l]));W&&(G(y,[X.moduleId]),r[l]=Z)}var m,h=[];for(c=0;c<y.length;c++)l=y[c],E[l]&&E[l].hot._selfAccepted&&r[l]!==Z&&!E[l].hot._selfInvalidated&&h.push({module:l,parents:E[l].parents.slice(),errorHandler:E[l].hot._selfAccepted});d("dispose"),Object.keys(x).forEach((function(Q){!1===x[Q]&&function(Q){delete installedChunks[Q]}(Q)}));var D,S,v=y.slice();for(;v.length>0;)if(l=v.pop(),I=E[l]){var H={},Y=I.hot._disposeHandlers;for(s=0;s<Y.length;s++)(U=Y[s])(H);for(F[l]=H,I.hot.active=!1,delete E[l],delete u[l],s=0;s<I.children.length;s++){var f=E[I.children[s]];f&&((m=f.parents.indexOf(l))>=0&&f.parents.splice(m,1))}}for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&(I=E[l]))for(S=u[l],s=0;s<S.length;s++)D=S[s],(m=I.children.indexOf(D))>=0&&I.children.splice(m,1);d("apply"),void 0!==b&&(B=b,b=void 0);for(l in o=void 0,r)Object.prototype.hasOwnProperty.call(r,l)&&(Q[l]=r[l]);var T=null;for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&(I=E[l])){S=u[l];var J=[];for(c=0;c<S.length;c++)if(D=S[c],U=I.hot._acceptedDependencies[D]){if(-1!==J.indexOf(U))continue;J.push(U)}for(c=0;c<J.length;c++){U=J[c];try{U(S)}catch(Q){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:S[c],error:Q}),t.ignoreErrored||T||(T=Q)}}}for(c=0;c<h.length;c++){var k=h[c];l=k.module,i=k.parents,e=l;try{N(l)}catch(Q){if("function"==typeof k.errorHandler)try{k.errorHandler(Q)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:Q}),t.ignoreErrored||T||(T=n),T||(T=Q)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:Q}),t.ignoreErrored||T||(T=Q)}}if(T)return d("fail"),Promise.reject(T);if(C)return n(t).then((function(Q){return y.forEach((function(n){Q.indexOf(n)<0&&Q.push(n)})),Q}));return d("idle"),new Promise((function(Q){Q(y)}))}(n=n||{})}function R(){if(C)return o||(o={}),C.forEach(L),C=void 0,!0}function L(n){Object.prototype.hasOwnProperty.call(o,n)||(o[n]=Q[n])}var E={};function N(n){if(E[n])return E[n].exports;var e=E[n]={i:n,l:!1,exports:{},hot:s(n),parents:(U=i,i=[],U),children:[]};return Q[n].call(e.exports,e,e.exports,c(n)),e.l=!0,e.exports}return N.m=Q,N.c=E,N.d=function(Q,n,e){N.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:e})},N.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},N.t=function(Q,n){if(1&n&&(Q=N(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var e=Object.create(null);if(N.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var t in Q)N.d(e,t,function(n){return Q[n]}.bind(null,t));return e},N.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return N.d(n,"a",n),n},N.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},N.p="/static/",N.h=function(){return B},c(0)(N.s=0)}([function(Q,n,e){Q.exports=e(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n__webpack_require__.d(__webpack_exports__, "Component", function() { return /* reexport */ Component; });\n__webpack_require__.d(__webpack_exports__, "LifecycleComponent", function() { return /* reexport */ LifeCycleComponent; });\n\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.type, component);\n    });\n\n    _defineProperty(this, "update", (cType, func) => {\n      if (this.components.has(cType)) {\n        const c = this.components.get(cType);\n\n        if (c) {\n          const updatedComponent = func(c);\n          this.components.set(cType, updatedComponent);\n        }\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      if (this.components.has(cType)) {\n        const component = this.components.get(cType);\n\n        if (component) {\n          component.onRemove();\n        }\n      }\n\n      this.components.delete(cType);\n    });\n\n    _defineProperty(this, "get", cType => {\n      if (!this.components.has(cType)) {\n        throw new Error(`ComponentCollection does not have component of type ${cType}`);\n      }\n\n      return this.components.get(cType);\n    });\n\n    _defineProperty(this, "has", cType => {\n      if (Array.isArray(cType)) {\n        return cType.every(ct => this.components.has(ct) === true);\n      } else {\n        return this.components.has(cType);\n      }\n    });\n  }\n\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "entitiesByTags", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cTypes => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cTypes => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cType => {\n      const entity = this.locate(cType);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cType, predicate) => {\n      const entities = this.locateAll(cType);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cType => {\n      return this.locateAll(cType).map(entity => ({\n        entity,\n        component: entity.components.get(cType)\n      }));\n    });\n\n    World_defineProperty(this, "get", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      return cc.get(cType);\n    });\n\n    World_defineProperty(this, "getTagged", tag => {\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        const entityId = tagEntityIds.values().next().value;\n        const entity = this.entities.get(entityId);\n\n        if (entity) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "getAllTagged", tag => {\n      let entities = []; // eslint-disable-line\n\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        for (const entityId of tagEntityIds) {\n          const entity = this.entities.get(entityId);\n\n          if (entity) {\n            entities.push(entity);\n          }\n        }\n      }\n\n      return entities;\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection(); // remove entity from current entitiesByCTypes\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  /**\n   * Internal method used in setting up a new system.\n   */\n  registerSystem(cTypes) {\n    this.entitiesByCTypes.set(cTypes, new Set());\n    return this;\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    } // remove any tag associations with destroyed entities.\n\n\n    for (const [tag, entitySet] of this.entitiesByTags) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n\n      if (entitySet.size === 0) {\n        this.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex.push((bytesToUuid_i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  var offset = offset_ || 0; // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + \'-\' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + \'-\' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + \'-\' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + \'-\' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.set(this._id, component);\n\n    return this;\n  }\n  /**\n   * Add a tag to a component\n   */\n\n\n  addTag(tag) {\n    const entitySet = this._world.entitiesByTags.has(tag) ? this._world.entitiesByTags.get(tag) : new Set();\n\n    if (entitySet) {\n      entitySet.add(this._id);\n\n      this._world.entitiesByTags.set(tag, entitySet);\n    }\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Check to see if an entity tagged with a given tag.\n   */\n\n\n  hasTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        return entitySet.has(this._id);\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    const component = cc.get(cType);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /**\n   * Remove a tag from an entity\n   */\n\n\n  removeTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        entitySet.delete(this._id);\n\n        if (entitySet.size === 0) {\n          this._world.entitiesByTags.delete(tag);\n        }\n      }\n    }\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n  /**\n   * Remove all tags on an entity\n   */\n\n\n  clearTags() {\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      entitySet.delete(this._id);\n\n      if (entitySet.size === 0) {\n        this._world.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n  destroy() {\n    this._world.destroyEntity(this._id);\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n  /**\n   * Retrieves all the tags that have been added to this entity.\n   */\n\n\n  get tags() {\n    const tags = new Set();\n\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      if (entitySet.has(this._id)) {\n        tags.add(tag);\n      }\n    }\n\n    return tags;\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\n\n\n\n/**\n * This is how you create a System.\n * @example\n * ```\n * createSystem(world, [\'ComponentType\'], ({ entity }) => \'Do fun system things here.\')\n * ```\n */\nfunction createSystem(world, cTypes, systemFunc) {\n  world.registerSystem(cTypes);\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    const cTypeArrs = world.entitiesByCTypes.get(cTypes) || new Set();\n\n    for (const eid of cTypeArrs) {\n      const args = {\n        entity: world.entities.get(eid) || new Entity_Entity(world),\n        components: world.componentCollections.get(eid) || new ComponentCollection(),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/Component.ts\nfunction Component_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass Component {\n  constructor(storage) {\n    Component_defineProperty(this, "type", void 0);\n\n    Component_defineProperty(this, "storage", void 0);\n\n    this.type = "AbstractComponent";\n    this.storage = storage; // Add getters/setters?\n  } // TODO: Will add onRemove later as not to screw up components that\n  //       "implement" Component instead of "extend"ing it.\n\n\n  onRemove() {// empty\n  }\n\n}\n// CONCATENATED MODULE: ./src/LifecycleComponent.ts\nfunction LifecycleComponent_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass LifeCycleComponent {\n  constructor(storage) {\n    LifecycleComponent_defineProperty(this, "type", void 0);\n\n    LifecycleComponent_defineProperty(this, "storage", void 0);\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropAccess", (_target, prop, _receiver) => {\n      this.storageWillBeAccessed(prop);\n      const val = this.onStorageAccess(prop);\n      this.storageWasAccessed(prop);\n      return val;\n    });\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropChange", (target, prop, value, _receiver) => {\n      if (this.storageShouldUpdate(prop, value)) {\n        this.storageWillUpdate(prop, value);\n        const prevValue = target[prop];\n        target[prop] = value;\n        this.storageDidUpdate(prop, prevValue);\n      }\n\n      return true;\n    });\n\n    this.type = "AbstractComponent"; // Should the proxy be a "revocable" type?\n\n    this.storage = new Proxy(storage, {\n      get: this.handleStoragePropAccess,\n      set: this.handleStoragePropChange\n    });\n  }\n\n  // Lifecycle methods\n  storageShouldUpdate(_prop, _value) {\n    return true;\n  }\n\n  storageWillBeAccessed(_prop) {// left empty.\n  }\n\n  onStorageAccess(prop) {\n    return this.storage[prop];\n  }\n\n  storageWasAccessed(_prop) {// left empty.\n  }\n\n  storageWillUpdate(_prop, _nextValue) {// left empty.\n  }\n\n  storageDidUpdate(_prop, _prevValue) {// left empty.\n  }\n\n  onRemove() {// do stuff when removed....\n  }\n\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvQ29tcG9uZW50LnRzPzRkNmIiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvTGlmZWN5Y2xlQ29tcG9uZW50LnRzPzZhY2MiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsInR5cGUiLCJjVHlwZSIsImZ1bmMiLCJoYXMiLCJjIiwiZ2V0IiwidXBkYXRlZENvbXBvbmVudCIsIm9uUmVtb3ZlIiwiZGVsZXRlIiwiRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJldmVyeSIsImN0IiwiY29tcG9uZW50VHlwZXMiLCJrZXlzIiwic2l6ZSIsIldvcmxkIiwicHJlZGljYXRlIiwiZW50aXR5IiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJyZXN1bHRzIiwicHVzaCIsImNUeXBlcyIsImxvY2F0ZSIsImNjIiwiY29tcG9uZW50Q29sbGVjdGlvbnMiLCJpZCIsImxvY2F0ZUFsbCIsIm1hcCIsImVpZCIsInRhZyIsInRhZ0VudGl0eUlkcyIsImVudGl0aWVzQnlUYWdzIiwiZW50aXR5SWQiLCJuZXh0IiwidmFsdWUiLCJhZGQiLCJjdEFyciIsImVudGl0eVNldCIsImVudGl0aWVzQnlDVHlwZXMiLCJyZW1vdmUiLCJyZWdpc3RlclN5c3RlbSIsIlNldCIsInJlZ2lzdGVyRW50aXR5IiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiZGVzdHJveUVudGl0eSIsIkVudGl0eSIsImNvbnN0cnVjdG9yIiwid29ybGQiLCJfaWQiLCJ1dWlkdjQiLCJfd29ybGQiLCJhZGRUYWciLCJoYXNUYWciLCJnZXRBbGwiLCJyZW1vdmVUYWciLCJjbGVhciIsImNsZWFyVGFncyIsImVudHJpZXMiLCJkZXN0cm95IiwidGFncyIsImNyZWF0ZUVudGl0eSIsImNyZWF0ZVN5c3RlbSIsInN5c3RlbUZ1bmMiLCJpbmRleCIsImNUeXBlQXJycyIsImFyZ3MiLCJpc0ZpcnN0IiwiaXNMYXN0IiwiQ29tcG9uZW50Iiwic3RvcmFnZSIsIkxpZmVDeWNsZUNvbXBvbmVudCIsIl90YXJnZXQiLCJwcm9wIiwiX3JlY2VpdmVyIiwic3RvcmFnZVdpbGxCZUFjY2Vzc2VkIiwidmFsIiwib25TdG9yYWdlQWNjZXNzIiwic3RvcmFnZVdhc0FjY2Vzc2VkIiwidGFyZ2V0Iiwic3RvcmFnZVNob3VsZFVwZGF0ZSIsInN0b3JhZ2VXaWxsVXBkYXRlIiwicHJldlZhbHVlIiwic3RvcmFnZURpZFVwZGF0ZSIsIlByb3h5IiwiaGFuZGxlU3RvcmFnZVByb3BBY2Nlc3MiLCJoYW5kbGVTdG9yYWdlUHJvcENoYW5nZSIsIl9wcm9wIiwiX3ZhbHVlIiwiX25leHRWYWx1ZSIsIl9wcmV2VmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFNZSxNQUFNQSxtQkFBTixDQUE4QjtBQUFBO0FBQUEsd0NBQ0UsSUFBSUMsR0FBSixFQURGOztBQUFBLGlDQUdwQ0MsU0FBRCxJQUFvQztBQUN4QyxXQUFLQyxVQUFMLENBQWdC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QUZzQixLQUFuQixDQUFmO0FBSUQ7O0FBZ0NEO0FBQ0FOLHFCQUFtQixDQUFDTyxLQUFELEVBQWlCQyxNQUFqQixFQUF1QztBQUN4RCxXQUFPLElBQVA7QUFDRDs7QUFFRGIsdUJBQXFCLENBQUNZLEtBQUQsRUFBdUIsQ0FDMUM7QUFDRDs7QUFFRFYsaUJBQWUsQ0FBQ0osSUFBRCxFQUE0QjtBQUN6QyxXQUFPLEtBQUtILE9BQUwsQ0FBYUcsSUFBYixDQUFQO0FBQ0Q7O0FBRURLLG9CQUFrQixDQUFDUyxLQUFELEVBQXVCLENBQ3ZDO0FBQ0Q7O0FBRUROLG1CQUFpQixDQUFDTSxLQUFELEVBQWlCRSxVQUFqQixFQUF3QyxDQUN2RDtBQUNEOztBQUVETixrQkFBZ0IsQ0FBQ0ksS0FBRCxFQUFpQkcsVUFBakIsRUFBd0MsQ0FDdEQ7QUFDRDs7QUFFRHJGLFVBQVEsR0FBUyxDQUNmO0FBQ0Q7O0FBdkVvRSxDOztBQ0F2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBMaWZlY3ljbGVDb21wb25lbnQgZnJvbSAnLi9MaWZlY3ljbGVDb21wb25lbnQnO1xuaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnbG9kYXNoL2lzRnVuY3Rpb24nO1xuXG50eXBlIEpvaW50Q29tcDxDVD4gPSBDb21wb25lbnQ8Q1Q+IHwgTGlmZWN5Y2xlQ29tcG9uZW50PENUPjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICBwcml2YXRlIGNvbXBvbmVudHM6IE1hcDxDVCwgSm9pbnRDb21wPENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgYWRkID0gKGNvbXBvbmVudDogSm9pbnRDb21wPENUPik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY29tcG9uZW50LnR5cGUsIGNvbXBvbmVudCk7XG4gIH1cblxuICB1cGRhdGUgPSAoY1R5cGU6IENULCBmdW5jOiAoYzogSm9pbnRDb21wPENUPikgPT4gSm9pbnRDb21wPENUPik6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKSkge1xuICAgICAgY29uc3QgYyA9IHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpO1xuXG4gICAgICBpZiAoYykge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29tcG9uZW50ID0gZnVuYyhjKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjVHlwZSwgdXBkYXRlZENvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJlbW92ZSA9IChjVHlwZTogQ1QpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZSkpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpO1xuXG4gICAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5vblJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY1R5cGUpO1xuICB9XG5cbiAgZ2V0ID0gPEM+KGNUeXBlOiBDVCk6IEMgPT4ge1xuICAgIGlmICghdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50Q29sbGVjdGlvbiBkb2VzIG5vdCBoYXZlIGNvbXBvbmVudCBvZiB0eXBlICR7Y1R5cGV9YClcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpIGFzIHVua25vd24gYXMgQztcbiAgfVxuXG4gIGhhcyA9IChjVHlwZTogQ1QgfCBDVFtdKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY1R5cGUpKSB7XG4gICAgICByZXR1cm4gY1R5cGUuZXZlcnkoKGN0KSA9PiB0aGlzLmNvbXBvbmVudHMuaGFzKGN0KSA9PT0gdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjb21wb25lbnRUeXBlcygpOiBDVFtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuY29tcG9uZW50cy5rZXlzKCldO1xuICB9XG5cbiAgZ2V0IHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLnNpemU7XG4gIH1cbn1cbiIsImltcG9ydCBFbnRpdHksIHsgRW50aXR5SWQgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBMaWZlY3ljbGVDb21wb25lbnQgZnJvbSAnLi9MaWZlY3ljbGVDb21wb25lbnQnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcbmltcG9ydCB7IFRhZyB9IGZyb20gJy4vVGFnJztcblxudHlwZSBKb2ludENvbXA8Q1Q+ID0gQ29tcG9uZW50PENUPiB8IExpZmVjeWNsZUNvbXBvbmVudDxDVD47XG5cbnR5cGUgRmluZFByZWRpY2F0ZTxDVD4gPSAoZW50aXR5OiBFbnRpdHk8Q1Q+KSA9PiBib29sZWFuO1xuXG50eXBlIEdyYWJQcmVkaWNhdGU8Qz4gPSAoY29tcG9uZW50OiBDKSA9PiBib29sZWFuO1xuXG5pbnRlcmZhY2UgU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4ge1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGNvbXBvbmVudDogQztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ybGQ8Q1Q+IHtcbiAgY29tcG9uZW50Q29sbGVjdGlvbnM6IE1hcDxFbnRpdHlJZCwgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlDVHlwZXM6IE1hcDxDVFtdLCBTZXQ8RW50aXR5SWQ+PiA9IG5ldyBNYXAoKTtcblxuICBlbnRpdGllc0J5VGFnczogTWFwPFRhZywgU2V0PEVudGl0eUlkPj4gPSBuZXcgTWFwKCk7XG5cbiAgLyoqXG4gICAqIFwiZmluZHNcIiBhIHNpbmdsZSBlbnRpdHkgYmFzZWQgb24gYSBwcmVkaWNhdGVcbiAgICovXG4gIGZpbmQgPSAocHJlZGljYXRlOiBGaW5kUHJlZGljYXRlPENUPik6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogXCJmaW5kc1wiIGFsbCBlbnRpdGllcyBiYXNlZCBvbiBhIHByZWRpY2F0ZSwga2luZGEgbGlrZSBmaWx0ZXIuXG4gICAqL1xuICBmaW5kQWxsID0gKHByZWRpY2F0ZTogRmluZFByZWRpY2F0ZTxDVD4pOiBFbnRpdHk8Q1Q+W10gPT4ge1xuICAgIGNvbnN0IHJlc3VsdHM6IEVudGl0eTxDVD5bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShlbnRpdHkpKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImxvY2F0ZXNcIiBhIHNpbmdsZSBlbnRpdHkgYmFzZWQgb24gaXRzIENvbXBvbmVudHMuXG4gICAqL1xuICBsb2NhdGUgPSAoY1R5cGVzOiBDVCB8IENUW10pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5jb21wb25lbnRzLmhhcyhjVHlwZXMpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIExvY2F0ZXMgYWxsIGVudGl0aWVzIHRoYXQgY29udGFpbiB0aGUgY29tcG9uZW50cyBuYW1lZFxuICAgKi9cbiAgbG9jYXRlQWxsID0gKGNUeXBlczogQ1QgfCBDVFtdKTogRW50aXR5PENUPltdID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbnRpdHk8Q1Q+W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHkuY29tcG9uZW50cy5oYXMoY1R5cGVzKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvKipcbiAgICogR3JhYnMgdGhlIGZpcnN0IGVudGl0eSwgYW5kIGl0cyByZWxhdGVkIGNvbXBvbmVudCwgdGhhdCBtYXRjaGVzIHRoZSBjb21wb25lbnQgdHlwZS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnQgfSA9IHdvcmxkLmdyYWI8TXlDb21wb25lbnQ+KENvbXBvbmVudHMuTXlDb21wb25lbnQpO1xuICAgKiBgYGBcbiAgICovXG4gIGdyYWIgPSA8Qz4oY1R5cGU6IENUKTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmxvY2F0ZShjVHlwZSk7XG5cbiAgICBpZiAoZW50aXR5KSB7XG4gICAgICBjb25zdCBjYyA9XG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVudGl0eS5pZCkgfHxcbiAgICAgICAgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxDPihjVHlwZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgY29tcG9uZW50LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR3JhYiBzaW5nbGUgY29tcG9uZW50IGJhc2VkIG9uIGNvbXBvbmVudCB0eXBlIGFuZCBwcmVkaWNhdGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgeyBlbnRpdHksIGNvbXBvbmVudCB9ID0gd29ybGQuZ3JhYkJ5KENvbXBvbmVudHMuRmlyc3RDb21wb25lbnQsIChjb21wKSA9PiBjb21wLmlkID09ICdhd2Vzb21lJylcbiAgICogYGBgXG4gICAqL1xuICBncmFiQnkgPSA8Qz4oXG4gICAgY1R5cGU6IENULFxuICAgIHByZWRpY2F0ZTogR3JhYlByZWRpY2F0ZTxDPlxuICApOiBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPiB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5sb2NhdGVBbGwoY1R5cGUpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IGNjID1cbiAgICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZW50aXR5LmlkKSB8fFxuICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuICAgICAgaWYgKHByZWRpY2F0ZShjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29tcG9uZW50LFxuICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR3JhYiBhbGwgdGhlIGNvbXBvbmVudHMgcHJpbWFyaWx5LCBhbmQgdGhlIGVudGl0aWVzIGlmIG5lZWRlZFxuICAgKi9cbiAgZ3JhYkFsbCA9IDxDPihjVHlwZTogQ1QpOiBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPltdID0+IHtcbiAgICByZXR1cm4gdGhpcy5sb2NhdGVBbGwoY1R5cGUpLm1hcCgoZW50aXR5KSA9PiAoe1xuICAgICAgZW50aXR5LFxuICAgICAgY29tcG9uZW50OiAoZW50aXR5LmNvbXBvbmVudHMuZ2V0KGNUeXBlKSBhcyB1bmtub3duKSBhcyBDLFxuICAgIH0pKTtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYW4gZW50aXR5IGlkIGFuZCBjb21wb25lbnRUeXBlLCByZXR1cm5zIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0ID0gPEM+KGVpZDogRW50aXR5SWQsIGNUeXBlOiBDVCk6IEMgPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICByZXR1cm4gY2MuZ2V0PEM+KGNUeXBlKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIGVudGl0eSB0aGF0IGhhcyBiZWVuIHRhZ2dlZCB3aXRoIHRoZSBnaXZlbiB0YWcsIG9yIHJldHVybiBudWxsO1xuICAgKi9cbiAgZ2V0VGFnZ2VkID0gKHRhZzogVGFnKTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHRhZ0VudGl0eUlkcyA9IHRoaXMuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG5cbiAgICBpZiAodGFnRW50aXR5SWRzKSB7XG4gICAgICBjb25zdCBlbnRpdHlJZCA9IHRhZ0VudGl0eUlkcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG5cbiAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZW50aXRpZXMuZ2V0KGVudGl0eUlkKTtcblxuICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0QWxsVGFnZ2VkID0gKHRhZzogVGFnKTogRW50aXR5PENUPltdID0+IHtcbiAgICBsZXQgZW50aXRpZXM6IEVudGl0eTxDVD5bXSA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBjb25zdCB0YWdFbnRpdHlJZHMgPSB0aGlzLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuXG4gICAgaWYgKHRhZ0VudGl0eUlkcykge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiB0YWdFbnRpdHlJZHMpIHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5SWQpO1xuICAgICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgICAgZW50aXRpZXMucHVzaChlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudGl0aWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGNvbXBvbmVudCBvbiB0aGUgZ2l2ZW4gZW50aXR5XG4gICAqL1xuICBzZXQgPSAoZWlkOiBFbnRpdHlJZCwgY29tcG9uZW50OiBDb21wb25lbnQ8Q1Q+KTogV29ybGQ8Q1Q+ID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY2MuYWRkKGNvbXBvbmVudCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlaWQsIGNjKTtcblxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKGN0QXJyLmV2ZXJ5KGNjLmhhcykpIHtcbiAgICAgICAgZW50aXR5U2V0LmFkZChlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjb21wb25lbnQgZnJvbSB0aGUgZ2l2ZW4gZW50aXR5LlxuICAgKiBOT1RFOiBUaGlzIHdpbGwgY2hhbmdlIHdoYXQgc3lzdGVtcyB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgZW50aXR5LlxuICAgKi9cbiAgcmVtb3ZlID0gKGVpZDogRW50aXR5SWQsIGNUeXBlOiBDVCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICAvLyByZW1vdmUgZW50aXR5IGZyb20gY3VycmVudCBlbnRpdGllc0J5Q1R5cGVzXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoY3RBcnIuZXZlcnkoY2MuaGFzKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2MucmVtb3ZlKGNUeXBlKTtcblxuICAgIC8vIE1vdmUgZW50aXR5SWQgdG8gbmV3IENUeXBlcyBpZiBuZWVkZWQuXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoY3RBcnIuZXZlcnkoY2MuaGFzKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtZXRob2QgdXNlZCBpbiBzZXR0aW5nIHVwIGEgbmV3IHN5c3RlbS5cbiAgICovXG4gIHJlZ2lzdGVyU3lzdGVtKGNUeXBlczogQ1RbXSk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnNldChjVHlwZXMsIG5ldyBTZXQ8RW50aXR5SWQ+KCkpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWdpc3RlckVudGl0eShlbnRpdHk6IEVudGl0eTxDVD4pOiBXb3JsZDxDVD4ge1xuICAgIGNvbnN0IGNjID0gbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlbnRpdHkuaWQsIGNjKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldChlbnRpdHkuaWQsIGVudGl0eSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gYW4gZW50aXR5LlxuICAgKi9cbiAgY2xlYXJFbnRpdHlDb21wb25lbnRzKGVpZDogRW50aXR5SWQpOiBXb3JsZDxDVD4ge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCkpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbiBlbnRpdHkuXG4gICAqIFNhbWUgYXMgZW50aXR5LmRlc3Ryb3koKS5cbiAgICovXG4gIGRlc3Ryb3lFbnRpdHkoZWlkOiBFbnRpdHlJZCk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5kZWxldGUoZWlkKTtcbiAgICB0aGlzLmVudGl0aWVzLmRlbGV0ZShlaWQpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYW55IHRhZyBhc3NvY2lhdGlvbnMgd2l0aCBkZXN0cm95ZWQgZW50aXRpZXMuXG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeVRhZ3MpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRpdHlTZXQuc2l6ZSA9PT0gMCkge1xuICAgICAgICB0aGlzLmVudGl0aWVzQnlUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbi8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xudmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsIi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xudmFyIGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSkpO1xufVxuXG5mdW5jdGlvbiBieXRlc1RvVXVpZChidWYsIG9mZnNldF8pIHtcbiAgdmFyIG9mZnNldCA9IG9mZnNldF8gfHwgMDsgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG5cbiAgcmV0dXJuIChieXRlVG9IZXhbYnVmW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYnl0ZXNUb1V1aWQ7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgYnl0ZXNUb1V1aWQgZnJvbSAnLi9ieXRlc1RvVXVpZC5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiBieXRlc1RvVXVpZChybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gJy4vQ29tcG9uZW50Q29sbGVjdGlvbic7XG5pbXBvcnQgeyBUYWcgfSBmcm9tICcuL1RhZyc7XG5cbmV4cG9ydCB0eXBlIEVudGl0eUlkID0gc3RyaW5nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHk8Q1Q+IHtcbiAgcHJpdmF0ZSBfaWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfd29ybGQ6IFdvcmxkPENUPjtcblxuICBjb25zdHJ1Y3Rvcih3b3JsZDogV29ybGQ8Q1Q+KSB7XG4gICAgdGhpcy5faWQgPSB1dWlkdjQoKTtcbiAgICB0aGlzLl93b3JsZCA9IHdvcmxkO1xuXG4gICAgLypcbiAgICBSZWdpc3RlcmluZyB3aXRoIHRoZSBXb3JsZC5cbiAgICAqL1xuICAgIHRoaXMuX3dvcmxkLnJlZ2lzdGVyRW50aXR5KHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCB0byBhbiBFbnRpdHksIGRvaC5cbiAgICovXG4gIGFkZChjb21wb25lbnQ6IENvbXBvbmVudDxDVD4pOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLl93b3JsZC5zZXQodGhpcy5faWQsIGNvbXBvbmVudCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSB0YWcgdG8gYSBjb21wb25lbnRcbiAgICovXG4gIGFkZFRhZyh0YWc6IFRhZyk6IEVudGl0eTxDVD4ge1xuICAgIGNvbnN0IGVudGl0eVNldCA9IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpXG4gICAgICA/IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpXG4gICAgICA6IG5ldyBTZXQ8RW50aXR5SWQ+KCk7XG5cbiAgICBpZiAoZW50aXR5U2V0KSB7XG4gICAgICBlbnRpdHlTZXQuYWRkKHRoaXMuX2lkKTtcbiAgICAgIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLnNldCh0YWcsIGVudGl0eVNldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBhbiBlbnRpdHkgaGFzIGEgY29tcG9uZW50IHJlbGF0ZWQgdG8gaXQuXG4gICAqL1xuICBoYXMoY1R5cGU6IENUKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgcmV0dXJuIGNjLmhhcyhjVHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIGFuIGVudGl0eSB0YWdnZWQgd2l0aCBhIGdpdmVuIHRhZy5cbiAgICovXG4gIGhhc1RhZyh0YWc6IFRhZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5oYXModGFnKSkge1xuICAgICAgY29uc3QgZW50aXR5U2V0ID0gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG4gICAgICBpZiAoZW50aXR5U2V0KSB7XG4gICAgICAgIHJldHVybiBlbnRpdHlTZXQuaGFzKHRoaXMuX2lkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY29tcG9uZW50IHRoYXQgYmVsb25ncyB0byBhbiBlbnRpdHkuXG4gICAqL1xuICBnZXQ8Qz4oY1R5cGU6IENUKTogQyB7XG4gICAgY29uc3QgY2MgPSB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjb21wb25lbnRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIGFuIGVudGl0eSwgdmlhIGEgQ29tcG9uZW50Q29sbGVjdGlvblxuICAgKi9cbiAgZ2V0QWxsKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcbiAgfVxuXG4gIHJlbW92ZShjVHlwZTogQ1QpOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLl93b3JsZC5yZW1vdmUodGhpcy5faWQsIGNUeXBlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHRhZyBmcm9tIGFuIGVudGl0eVxuICAgKi9cbiAgcmVtb3ZlVGFnKHRhZzogc3RyaW5nIHwgbnVtYmVyKTogRW50aXR5PENUPiB7XG4gICAgaWYgKHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpKSB7XG4gICAgICBjb25zdCBlbnRpdHlTZXQgPSB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcbiAgICAgIFxuICAgICAgaWYgKGVudGl0eVNldCkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKHRoaXMuX2lkKTtcblxuICAgICAgICBpZiAoZW50aXR5U2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgICB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5kZWxldGUodGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBDbGVhcnMgYWxsIGNvbXBvbmVudHMgZnJvbSBhbiBFbnRpdHkgKi9cbiAgY2xlYXIoKTogRW50aXR5PENUPiB7XG4gICAgdGhpcy5fd29ybGQuY2xlYXJFbnRpdHlDb21wb25lbnRzKHRoaXMuX2lkKTtcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0YWdzIG9uIGFuIGVudGl0eVxuICAgKi9cbiAgY2xlYXJUYWdzKCk6IEVudGl0eTxDVD4ge1xuICAgIGZvciAoY29uc3QgW3RhZywgZW50aXR5U2V0XSBvZiB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5lbnRyaWVzKCkpIHtcbiAgICAgIGVudGl0eVNldC5kZWxldGUodGhpcy5faWQpO1xuXG4gICAgICBpZiAoZW50aXR5U2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX3dvcmxkLmRlc3Ryb3lFbnRpdHkodGhpcy5faWQpO1xuICB9XG5cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgZ2V0IHdvcmxkKCk6IFdvcmxkPENUPiB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgY29tcG9uZW50cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byBhbiBlbnRpdHksIHZpYSBhIENvbXBvbmVudENvbGxlY3Rpb24uXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgZW50aXR5SW5zdGFuY2UuZ2V0QWxsKCkuXG4gICAqL1xuICBnZXQgY29tcG9uZW50cygpOiBDb21wb25lbnRDb2xsZWN0aW9uPENUPiB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLl9pZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCB0aGUgdGFncyB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byB0aGlzIGVudGl0eS5cbiAgICovXG4gIGdldCB0YWdzKCk6IFNldDxUYWc+IHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxUYWc+KCk7XG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmVudHJpZXMoKSkge1xuICAgICAgaWYgKGVudGl0eVNldC5oYXModGhpcy5faWQpKSB7XG4gICAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhZ3M7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVudGl0eTxDVD4oXG4gIHdvcmxkOiBXb3JsZDxDVD4sXG4pOiBFbnRpdHk8Q1Q+IHtcbiAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eTxDVD4od29ybGQpO1xuXG4gIHJldHVybiBlbnRpdHk7XG59XG5cblxuIiwiaW1wb3J0IFdvcmxkIGZyb20gJy4vV29ybGQnO1xuaW1wb3J0IEVudGl0eSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tICcuL0NvbXBvbmVudENvbGxlY3Rpb24nO1xuXG5leHBvcnQgdHlwZSBTeXN0ZW0gPSAoKSA9PiB2b2lkO1xuXG4vKipcbiAqIEFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWQgaW50byBhIFN5c3RlbSBmdW5jdGlvbiBvbiBlYWNoIGl0ZXJhdGlvbi5cbiAqIFRoaXMgaXMgaG93IHlvdSBhY2NlcyB0aGluZ3MgbGlrZSB0aGUgZW50aXR5IHRoYXQgcGFydGljdWxhciBlbnRpdHkgdG8gYWN0IG9uLFxuICogYXMgd2VsbCBhcyBzb21lIG90aGVyIGhlbHBmdWwgcGFyYW1zIGxpa2UgaWYgdGhlIGVudGl0eSBpcyB0aGUgZmlyc3Qgb3IgbGFzdCBlbnRpdHlcbiAqIGluIHRoZSBncm91cCBvZiBlbnRpdGllcyB0aGF0IGJlaW5nIGl0ZXJhdGVkIG92ZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3lzdGVtRnVuY0FyZ3M8Q1Q+IHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGVudGl0eSBiZWluZyBpdGVyYXRlZC5cbiAgICovXG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnRzIHRoYXQgYmVsb25nIHRvIHRoZSBlbnRpdHlcbiAgICovXG4gIGNvbXBvbmVudHM6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+O1xuICAvKipcbiAgICogVGhlIFdvcmxkIGluc3RhbmNlLlxuICAgKiBVc2UgdGhpcyB0byBhY2Nlc3Mgb3RoZXIgZW50aXRpZXMuXG4gICAqL1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBpbmRleDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG4gIC8qKlxuICAgKiBJcyB0aGUgZmlyc3QgZW50aXR5IHRvIGJlIGl0ZXJhdGVkIG9uIHRoaXMgcnVuIG9mIGEgc3lzdGVtLlxuICAgKiBIZWxwZnVsIGZvciBzZXR0aW5nIHVwIHN0YXRlIHRoYXQgaXMgdGhlIHNhbWUgZm9yIGFsbCBlbnRpdGllcyBvbmx5IG9uY2UuXG4gICAqL1xuICBpc0ZpcnN0OiBib29sZWFuO1xuICAvKipcbiAgICogSXMgdGhlIGxhc3QgZW50aXR5IHRvIGJlIGl0ZXJhdGVkIG9uIHRoaXMgcnVuIG9mIGEgc3lzdGVtLlxuICAgKiBDYW4gYmUgaGVscGZ1bCB0byB0ZWFyIGRvd24gYW55dGhpbmcgdGhhdCBzaG91bGQgYmUgZGVhbHQgd2l0aCBhZnRlciBhbGwgdGhlIGVudGl0ZXMgaGF2ZSByYW4uXG4gICAqL1xuICBpc0xhc3Q6IGJvb2xlYW47XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHN5c3RlbSBpcyBydW4uXG4gKi9cbmV4cG9ydCB0eXBlIFN5c3RlbUZ1bmM8Q1Q+ID0gKFxuICBzeXRlbUZ1bmNBcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4sXG4pID0+IHZvaWQ7XG5cbi8qKlxuICogVGhpcyBpcyBob3cgeW91IGNyZWF0ZSBhIFN5c3RlbS5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGNyZWF0ZVN5c3RlbSh3b3JsZCwgWydDb21wb25lbnRUeXBlJ10sICh7IGVudGl0eSB9KSA9PiAnRG8gZnVuIHN5c3RlbSB0aGluZ3MgaGVyZS4nKVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTeXN0ZW08Q1Q+KFxuICB3b3JsZDogV29ybGQ8Q1Q+LFxuICBjVHlwZXM6IENUW10sXG4gIHN5c3RlbUZ1bmM6IFN5c3RlbUZ1bmM8Q1Q+XG4pOiBTeXN0ZW0ge1xuICB3b3JsZC5yZWdpc3RlclN5c3RlbShjVHlwZXMpO1xuXG4gIHJldHVybiAoKTogdm9pZCA9PiB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBjb25zdCBzaXplID0gd29ybGQuZW50aXRpZXNCeUNUeXBlcy5zaXplO1xuXG4gICAgLy8gVXNlZCBmb3IgbWF0Y2hpbmcgdGhlIGFycmF5IG9mIENvbXBvbmVudFR5cGVzIHdoaWNoIGlzIHRoZSBrZXlcbiAgICAvLyBvZiB3aGVyZSB0aGUgQ29tcG9uZW50Q29sbGVjdGlvbiBpcywgd2l0aCB0aGUgYXJyYXkgb2YgQ29tcG9uZW50VHlwZXNcbiAgICAvLyB0aGF0IGFyZSBwYXNzZXMuXG4gICAgLy8gTWlnaHQgYmUgbmljZSBpbiB0aGUgZnV0dXJlIHRvIGdvIGJhY2sgdG8gYSByZWYgY2hlY2sgb24gY1R5cGVzLCBidXRcbiAgICAvLyBmb3Igbm93IHRoaXMgZG9lc24ndCBzZWVtIHRvIGJlIHRoYXQgbXVjaCBvZiBhIHBlcmYgaGl0LlxuICAgIC8vIGZvciAoY29uc3QgY3Qgb2Ygd29ybGQuZW50aXRpZXNCeUNUeXBlcy5rZXlzKCkpIHtcbiAgICAvLyAgIGlmIChjVHlwZXMubGVuZ3RoID09PSBjdC5sZW5ndGggJiYgY1R5cGVzLmV2ZXJ5KGMgPT4gY3QuaW5jbHVkZXMoYykpKSB7XG4gICAgLy8gICAgIGZvciAoY29uc3QgZWlkIG9mIHdvcmxkLmVudGl0aWVzQnlDVHlwZXMuZ2V0KGNUeXBlcykpIHtcbiAgICAvLyAgICAgICBjb25zdCBhcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4gPSB7XG4gICAgLy8gICAgICAgICBlbnRpdHk6IHdvcmxkLmVudGl0aWVzLmdldChlaWQpLFxuICAgIC8vICAgICAgICAgY29tcG9uZW50czogd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCksXG4gICAgLy8gICAgICAgICB3b3JsZCxcbiAgICAvLyAgICAgICAgIGluZGV4LFxuICAgIC8vICAgICAgICAgc2l6ZSxcbiAgICAvLyAgICAgICAgIGlzRmlyc3Q6IGluZGV4ID09PSAwLFxuICAgIC8vICAgICAgICAgaXNMYXN0OiBpbmRleCArIDEgPT09IHNpemUsXG4gICAgLy8gICAgICAgfVxuICAgIFxuICAgIC8vICAgICAgIHN5c3RlbUZ1bmMoYXJncyk7XG4gICAgXG4gICAgLy8gICAgICAgaW5kZXggKz0gMTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfVxuICAgIC8vIH1cblxuICAgIGNvbnN0IGNUeXBlQXJycyA9IHdvcmxkLmVudGl0aWVzQnlDVHlwZXMuZ2V0KGNUeXBlcykgfHwgbmV3IFNldCgpO1xuXG4gICAgZm9yIChjb25zdCBlaWQgb2YgY1R5cGVBcnJzKSB7XG4gICAgICBjb25zdCBhcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4gPSB7XG4gICAgICAgIGVudGl0eTogd29ybGQuZW50aXRpZXMuZ2V0KGVpZCkgfHwgbmV3IEVudGl0eTxDVD4od29ybGQpLFxuICAgICAgICBjb21wb25lbnRzOiB3b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSxcbiAgICAgICAgd29ybGQsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBzaXplLFxuICAgICAgICBpc0ZpcnN0OiBpbmRleCA9PT0gMCxcbiAgICAgICAgaXNMYXN0OiBpbmRleCArIDEgPT09IHNpemUsXG4gICAgICB9XG5cbiAgICAgIHN5c3RlbUZ1bmMoYXJncyk7XG5cbiAgICAgIGluZGV4ICs9IDE7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQ8Q1QsIFMgZXh0ZW5kcyBvYmplY3QgPSB7fT4ge1xuICB0eXBlOiBDVDtcbiAgc3RvcmFnZTogUztcblxuICBjb25zdHJ1Y3RvcihzdG9yYWdlOiBTKSB7XG4gICAgdGhpcy50eXBlID0gKFwiQWJzdHJhY3RDb21wb25lbnRcIiBhcyB1bmtub3duKSBhcyBDVDtcbiAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xuXG4gICAgLy8gQWRkIGdldHRlcnMvc2V0dGVycz9cbiAgfVxuXG4gIC8vIFRPRE86IFdpbGwgYWRkIG9uUmVtb3ZlIGxhdGVyIGFzIG5vdCB0byBzY3JldyB1cCBjb21wb25lbnRzIHRoYXRcbiAgLy8gICAgICAgXCJpbXBsZW1lbnRcIiBDb21wb25lbnQgaW5zdGVhZCBvZiBcImV4dGVuZFwiaW5nIGl0LlxuICBvblJlbW92ZSgpOiB2b2lkIHtcbiAgICAvLyBlbXB0eVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMaWZlQ3ljbGVDb21wb25lbnQ8Q1QsIFMgZXh0ZW5kcyBvYmplY3QgPSBvYmplY3Q+IHtcbiAgdHlwZTogQ1Q7XG4gIHN0b3JhZ2U6IFM7XG5cbiAgY29uc3RydWN0b3Ioc3RvcmFnZTogUykge1xuICAgIHRoaXMudHlwZSA9IChcIkFic3RyYWN0Q29tcG9uZW50XCIgYXMgdW5rbm93bikgYXMgQ1Q7XG5cbiAgICAvLyBTaG91bGQgdGhlIHByb3h5IGJlIGEgXCJyZXZvY2FibGVcIiB0eXBlP1xuICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBQcm94eShzdG9yYWdlLCB7XG4gICAgICBnZXQ6IHRoaXMuaGFuZGxlU3RvcmFnZVByb3BBY2Nlc3MsXG4gICAgICBzZXQ6IHRoaXMuaGFuZGxlU3RvcmFnZVByb3BDaGFuZ2UsXG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVTdG9yYWdlUHJvcEFjY2VzcyA9IChcbiAgICBfdGFyZ2V0OiBTLFxuICAgIHByb3A6IGtleW9mIFMsXG4gICAgX3JlY2VpdmVyOiBhbnlcbiAgKTogU1trZXlvZiBTXSA9PiB7XG4gICAgdGhpcy5zdG9yYWdlV2lsbEJlQWNjZXNzZWQocHJvcCk7XG5cbiAgICBjb25zdCB2YWwgPSB0aGlzLm9uU3RvcmFnZUFjY2Vzcyhwcm9wKTtcblxuICAgIHRoaXMuc3RvcmFnZVdhc0FjY2Vzc2VkKHByb3ApO1xuXG4gICAgcmV0dXJuIHZhbDtcbiAgfTtcblxuICBoYW5kbGVTdG9yYWdlUHJvcENoYW5nZSA9IChcbiAgICB0YXJnZXQ6IFMsXG4gICAgcHJvcDoga2V5b2YgUyxcbiAgICB2YWx1ZTogYW55LFxuICAgIF9yZWNlaXZlcjogYW55XG4gICk6IGJvb2xlYW4gPT4ge1xuICAgIGlmICh0aGlzLnN0b3JhZ2VTaG91bGRVcGRhdGUocHJvcCwgdmFsdWUpKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VXaWxsVXBkYXRlKHByb3AsIHZhbHVlKTtcbiAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IHRhcmdldFtwcm9wXTtcbiAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgdGhpcy5zdG9yYWdlRGlkVXBkYXRlKHByb3AsIHByZXZWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gTGlmZWN5Y2xlIG1ldGhvZHNcbiAgc3RvcmFnZVNob3VsZFVwZGF0ZShfcHJvcDoga2V5b2YgUywgX3ZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHN0b3JhZ2VXaWxsQmVBY2Nlc3NlZChfcHJvcDoga2V5b2YgUyk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBvblN0b3JhZ2VBY2Nlc3MocHJvcDoga2V5b2YgUyk6IFNba2V5b2YgU10ge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VbcHJvcF07XG4gIH1cblxuICBzdG9yYWdlV2FzQWNjZXNzZWQoX3Byb3A6IGtleW9mIFMpOiB2b2lkIHtcbiAgICAvLyBsZWZ0IGVtcHR5LlxuICB9XG5cbiAgc3RvcmFnZVdpbGxVcGRhdGUoX3Byb3A6IGtleW9mIFMsIF9uZXh0VmFsdWU6IGFueSk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBzdG9yYWdlRGlkVXBkYXRlKF9wcm9wOiBrZXlvZiBTLCBfcHJldlZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICAvLyBsZWZ0IGVtcHR5LlxuICB9XG5cbiAgb25SZW1vdmUoKTogdm9pZCB7XG4gICAgLy8gZG8gc3R1ZmYgd2hlbiByZW1vdmVkLi4uLlxuICB9XG59XG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyBjcmVhdGVFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBjcmVhdGVTeXN0ZW0gfSBmcm9tICcuL1N5c3RlbSc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQ29tcG9uZW50JztcbmltcG9ydCBMaWZlY3ljbGVDb21wb25lbnQgZnJvbSAnLi9MaWZlY3ljbGVDb21wb25lbnQnO1xuXG5leHBvcnQge1xuICBXb3JsZCxcbiAgY3JlYXRlRW50aXR5LFxuICBjcmVhdGVTeXN0ZW0sXG4gIENvbXBvbmVudCxcbiAgTGlmZWN5Y2xlQ29tcG9uZW50LFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')}])}));