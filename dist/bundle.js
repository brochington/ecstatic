!function(Q,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ecstatic",[],n):"object"==typeof exports?exports.ecstatic=n():Q.ecstatic=n()}(window,(function(){return function(Q){var n=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(Q,e){!function(Q,n){if(!a[Q]||!V[Q])return;for(var e in V[Q]=!1,n)Object.prototype.hasOwnProperty.call(n,e)&&(b[e]=n[e]);0==--G&&0===u&&X()}(Q,e),n&&n(Q,e)};var e,t=!0,B="5ae8995539718962b6b1",F={},i=[],U=[];function c(Q){var n=L[Q];if(!n)return N;var t=function(t){return n.hot.active?(L[t]?-1===L[t].parents.indexOf(Q)&&L[t].parents.push(Q):(i=[Q],e=t),-1===n.children.indexOf(t)&&n.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+Q),i=[]),N(t)},B=function(Q){return{configurable:!0,enumerable:!0,get:function(){return N[Q]},set:function(n){N[Q]=n}}};for(var F in N)Object.prototype.hasOwnProperty.call(N,F)&&"e"!==F&&"t"!==F&&Object.defineProperty(t,F,B(F));return t.e=function(Q){return"ready"===s&&g("prepare"),u++,N.e(Q).then(n,(function(Q){throw n(),Q}));function n(){u--,"prepare"===s&&(x[Q]||Z(Q),0===u&&0===G&&X())}},t.t=function(Q,n){return 1&n&&(Q=t(Q)),N.t(Q,-2&n)},t}function l(n){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==n,active:!0,accept:function(Q,n){if(void 0===Q)t._selfAccepted=!0;else if("function"==typeof Q)t._selfAccepted=Q;else if("object"==typeof Q)for(var e=0;e<Q.length;e++)t._acceptedDependencies[Q[e]]=n||function(){};else t._acceptedDependencies[Q]=n||function(){}},decline:function(Q){if(void 0===Q)t._selfDeclined=!0;else if("object"==typeof Q)for(var n=0;n<Q.length;n++)t._declinedDependencies[Q[n]]=!0;else t._declinedDependencies[Q]=!0},dispose:function(Q){t._disposeHandlers.push(Q)},addDisposeHandler:function(Q){t._disposeHandlers.push(Q)},removeDisposeHandler:function(Q){var n=t._disposeHandlers.indexOf(Q);n>=0&&t._disposeHandlers.splice(n,1)},invalidate:function(){switch(this._selfInvalidated=!0,s){case"idle":(b={})[n]=Q[n],g("ready");break;case"ready":p(n);break;case"prepare":case"check":case"dispose":case"apply":(C=C||[]).push(n)}},check:r,apply:R,status:function(Q){if(!Q)return s;I.push(Q)},addStatusHandler:function(Q){I.push(Q)},removeStatusHandler:function(Q){var n=I.indexOf(Q);n>=0&&I.splice(n,1)},data:F[n]};return e=void 0,t}var I=[],s="idle";function g(Q){s=Q;for(var n=0;n<I.length;n++)I[n].call(null,Q)}var d,b,o,C,G=0,u=0,x={},V={},a={};function y(Q){return+Q+""===Q?+Q:Q}function r(Q){if("idle"!==s)throw new Error("check() is only allowed in idle status");return t=Q,g("check"),(n=1e4,n=n||1e4,new Promise((function(Q,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,B=N.p+"hot/hot-update.json";t.open("GET",B,!0),t.timeout=n,t.send(null)}catch(Q){return e(Q)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+B+" timed out."));else if(404===t.status)Q();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+B+" failed."));else{try{var n=JSON.parse(t.responseText)}catch(Q){return void e(Q)}Q(n)}}}))).then((function(Q){if(!Q)return g(E()?"ready":"idle"),null;V={},x={},a=Q.c,o=Q.h,g("prepare");var n=new Promise((function(Q,n){d={resolve:Q,reject:n}}));b={};return Z(0),"prepare"===s&&0===u&&0===G&&X(),n}));var n}function Z(Q){var n;a[Q]?(V[Q]=!0,G++,(n=document.createElement("script")).charset="utf-8",n.src=N.p+"hot/hot-update.js",document.head.appendChild(n)):x[Q]=!0}function X(){g("ready");var Q=d;if(d=null,Q)if(t)Promise.resolve().then((function(){return R(t)})).then((function(n){Q.resolve(n)}),(function(n){Q.reject(n)}));else{var n=[];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&n.push(y(e));Q.resolve(n)}}function R(n){if("ready"!==s)throw new Error("apply() is only allowed in ready status");return function n(t){var U,c,l,I,s;function d(Q){for(var n=[Q],e={},t=n.map((function(Q){return{chain:[Q],id:Q}}));t.length>0;){var B=t.pop(),F=B.id,i=B.chain;if((I=L[F])&&(!I.hot._selfAccepted||I.hot._selfInvalidated)){if(I.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:F};if(I.hot._main)return{type:"unaccepted",chain:i,moduleId:F};for(var U=0;U<I.parents.length;U++){var c=I.parents[U],l=L[c];if(l){if(l.hot._declinedDependencies[F])return{type:"declined",chain:i.concat([c]),moduleId:F,parentId:c};-1===n.indexOf(c)&&(l.hot._acceptedDependencies[F]?(e[c]||(e[c]=[]),G(e[c],[F])):(delete e[c],n.push(c),t.push({chain:i.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:Q,outdatedModules:n,outdatedDependencies:e}}function G(Q,n){for(var e=0;e<n.length;e++){var t=n[e];-1===Q.indexOf(t)&&Q.push(t)}}E();var u={},x=[],V={},r=function(){console.warn("[HMR] unexpected require("+X.moduleId+") to disposed module")};for(var Z in b)if(Object.prototype.hasOwnProperty.call(b,Z)){var X;s=y(Z),X=b[Z]?d(s):{type:"disposed",moduleId:Z};var R=!1,p=!1,W=!1,m="";switch(X.chain&&(m="\nUpdate propagation: "+X.chain.join(" -> ")),X.type){case"self-declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(R=new Error("Aborted because of self decline: "+X.moduleId+m));break;case"declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(R=new Error("Aborted because of declined dependency: "+X.moduleId+" in "+X.parentId+m));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(X),t.ignoreUnaccepted||(R=new Error("Aborted because "+s+" is not accepted"+m));break;case"accepted":t.onAccepted&&t.onAccepted(X),p=!0;break;case"disposed":t.onDisposed&&t.onDisposed(X),W=!0;break;default:throw new Error("Unexception type "+X.type)}if(R)return g("abort"),Promise.reject(R);if(p)for(s in V[s]=b[s],G(x,X.outdatedModules),X.outdatedDependencies)Object.prototype.hasOwnProperty.call(X.outdatedDependencies,s)&&(u[s]||(u[s]=[]),G(u[s],X.outdatedDependencies[s]));W&&(G(x,[X.moduleId]),V[s]=r)}var A,h=[];for(c=0;c<x.length;c++)s=x[c],L[s]&&L[s].hot._selfAccepted&&V[s]!==r&&!L[s].hot._selfInvalidated&&h.push({module:s,parents:L[s].parents.slice(),errorHandler:L[s].hot._selfAccepted});g("dispose"),Object.keys(a).forEach((function(Q){!1===a[Q]&&function(Q){delete installedChunks[Q]}(Q)}));var D,S,H=x.slice();for(;H.length>0;)if(s=H.pop(),I=L[s]){var v={},Y=I.hot._disposeHandlers;for(l=0;l<Y.length;l++)(U=Y[l])(v);for(F[s]=v,I.hot.active=!1,delete L[s],delete u[s],l=0;l<I.children.length;l++){var T=L[I.children[l]];T&&((A=T.parents.indexOf(s))>=0&&T.parents.splice(A,1))}}for(s in u)if(Object.prototype.hasOwnProperty.call(u,s)&&(I=L[s]))for(S=u[s],l=0;l<S.length;l++)D=S[l],(A=I.children.indexOf(D))>=0&&I.children.splice(A,1);g("apply"),void 0!==o&&(B=o,o=void 0);for(s in b=void 0,V)Object.prototype.hasOwnProperty.call(V,s)&&(Q[s]=V[s]);var f=null;for(s in u)if(Object.prototype.hasOwnProperty.call(u,s)&&(I=L[s])){S=u[s];var J=[];for(c=0;c<S.length;c++)if(D=S[c],U=I.hot._acceptedDependencies[D]){if(-1!==J.indexOf(U))continue;J.push(U)}for(c=0;c<J.length;c++){U=J[c];try{U(S)}catch(Q){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:S[c],error:Q}),t.ignoreErrored||f||(f=Q)}}}for(c=0;c<h.length;c++){var z=h[c];s=z.module,i=z.parents,e=s;try{N(s)}catch(Q){if("function"==typeof z.errorHandler)try{z.errorHandler(Q)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:n,originalError:Q}),t.ignoreErrored||f||(f=n),f||(f=Q)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:Q}),t.ignoreErrored||f||(f=Q)}}if(f)return g("fail"),Promise.reject(f);if(C)return n(t).then((function(Q){return x.forEach((function(n){Q.indexOf(n)<0&&Q.push(n)})),Q}));return g("idle"),new Promise((function(Q){Q(x)}))}(n=n||{})}function E(){if(C)return b||(b={}),C.forEach(p),C=void 0,!0}function p(n){Object.prototype.hasOwnProperty.call(b,n)||(b[n]=Q[n])}var L={};function N(n){if(L[n])return L[n].exports;var e=L[n]={i:n,l:!1,exports:{},hot:l(n),parents:(U=i,i=[],U),children:[]};return Q[n].call(e.exports,e,e.exports,c(n)),e.l=!0,e.exports}return N.m=Q,N.c=L,N.d=function(Q,n,e){N.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:e})},N.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},N.t=function(Q,n){if(1&n&&(Q=N(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var e=Object.create(null);if(N.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var t in Q)N.d(e,t,function(n){return Q[n]}.bind(null,t));return e},N.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return N.d(n,"a",n),n},N.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},N.p="/static/",N.h=function(){return B},c(0)(N.s=0)}([function(Q,n,e){Q.exports=e(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n__webpack_require__.d(__webpack_exports__, "LifecycleComponent", function() { return /* reexport */ LifeCycleComponent; });\n\n// CONCATENATED MODULE: ./src/guards.ts\nfunction isComponentInstance(Class, comp) {\n  if (!comp) {\n    return false;\n  }\n\n  if (!(comp instanceof Class)) {\n    return false;\n  }\n\n  return true;\n}\nfunction isComponentName(possibleName, entitiesByCTypes) {\n  // string\n  if (typeof possibleName !== \'string\') {\n    return false;\n  }\n\n  for (const a of entitiesByCTypes.keys()) {\n    if (a.includes(possibleName)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass ComponentCollection_ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.constructor.name, component);\n    });\n\n    _defineProperty(this, "update", (cl, func) => {\n      const c = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, c)) {\n        const updatedComponent = func(c);\n        this.components.set(cl.name, updatedComponent);\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      this.components.delete(cType.name);\n    });\n\n    _defineProperty(this, "get", cl => {\n      const comp = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, comp)) {\n        return comp;\n      } else {\n        throw new Error(`ComponentCollection does not have component of type ${cl.name}`);\n      }\n    });\n\n    _defineProperty(this, "has", cType => {\n      // has = <T>(cType: Class<T> | Class<T>[]): boolean => {\n      return Array.isArray(cType) ? cType.every(ct => this.components.has(ct.name) === true) : this.components.has(cType.name);\n    });\n\n    _defineProperty(this, "hasByName", cName => {\n      return Array.isArray(cName) ? cName.every(ct => this.components.has(ct) === true) : this.components.has(cName);\n    });\n  }\n\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "entitiesByTags", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cl => {\n      for (const entity of this.entities.values()) {\n        // console.log("entity?", entity.components, cl.name);\n        if (entity.components.has(cl)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cl => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cl)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cl => {\n      const entity = this.locate(cl);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cl, predicate) => {\n      const entities = this.locateAll(cl);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cl => {\n      const entities = this.locateAll(cl);\n      return entities.map(entity => {\n        return {\n          entity,\n          component: entity.components.get(cl)\n        };\n      });\n    });\n\n    World_defineProperty(this, "get", (eid, cl) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      return cc.get(cl);\n    });\n\n    World_defineProperty(this, "getTagged", tag => {\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        const entityId = tagEntityIds.values().next().value;\n        const entity = this.entities.get(entityId);\n\n        if (entity) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "getAllTagged", tag => {\n      let entities = []; // eslint-disable-line\n\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        for (const entityId of tagEntityIds) {\n          const entity = this.entities.get(entityId);\n\n          if (entity) {\n            entities.push(entity);\n          }\n        }\n      }\n\n      return entities;\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      }\n\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(); // remove entity from current entitiesByCTypes\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  /**\n   * Internal method used in setting up a new system.\n   */\n  registerSystem(cNames) {\n    this.entitiesByCTypes.set(cNames, new Set());\n    return this;\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection_ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection_ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    } // remove any tag associations with destroyed entities.\n\n\n    for (const [tag, entitySet] of this.entitiesByTags) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n\n      if (entitySet.size === 0) {\n        this.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex.push((bytesToUuid_i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  var offset = offset_ || 0; // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + \'-\' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + \'-\' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + \'-\' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + \'-\' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.set(this._id, component);\n\n    return this;\n  }\n  /**\n   * Add a tag to a component\n   */\n\n\n  addTag(tag) {\n    const entitySet = this._world.entitiesByTags.has(tag) ? this._world.entitiesByTags.get(tag) : new Set();\n\n    if (entitySet) {\n      entitySet.add(this._id);\n\n      this._world.entitiesByTags.set(tag, entitySet);\n    }\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Check to see if an entity tagged with a given tag.\n   */\n\n\n  hasTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        return entitySet.has(this._id);\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    const component = cc.get(cType);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /**\n   * Remove a tag from an entity\n   */\n\n\n  removeTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        entitySet.delete(this._id);\n\n        if (entitySet.size === 0) {\n          this._world.entitiesByTags.delete(tag);\n        }\n      }\n    }\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n  /**\n   * Remove all tags on an entity\n   */\n\n\n  clearTags() {\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      entitySet.delete(this._id);\n\n      if (entitySet.size === 0) {\n        this._world.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n  destroy() {\n    this._world.destroyEntity(this._id);\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n  /**\n   * Retrieves all the tags that have been added to this entity.\n   */\n\n\n  get tags() {\n    const tags = new Set();\n\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      if (entitySet.has(this._id)) {\n        tags.add(tag);\n      }\n    }\n\n    return tags;\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\n\n\n\n/**\n * This is how you create a System.\n * @example\n * ```\n * createSystem(world, [\'ComponentType\'], ({ entity }) => \'Do fun system things here.\')\n * ```\n */\nfunction createSystem(world, // cTypes: CT[],\ncTypes, systemFunc) {\n  const cNames = cTypes.map(ct => ct.name);\n  world.registerSystem(cNames); // world.registerSystem(cTypes);\n\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    const cTypeArrs = world.entitiesByCTypes.get(cNames) || new Set();\n\n    for (const eid of cTypeArrs) {\n      const args = {\n        entity: world.entities.get(eid) || new Entity_Entity(world),\n        components: world.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/LifecycleComponent.ts\nfunction LifecycleComponent_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass LifeCycleComponent {\n  constructor(storage) {\n    LifecycleComponent_defineProperty(this, "type", void 0);\n\n    LifecycleComponent_defineProperty(this, "storage", void 0);\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropAccess", (_target, prop, _receiver) => {\n      this.storageWillBeAccessed(prop);\n      const val = this.onStorageAccess(prop);\n      this.storageWasAccessed(prop);\n      return val;\n    });\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropChange", (target, prop, value, _receiver) => {\n      if (this.storageShouldUpdate(prop, value)) {\n        this.storageWillUpdate(prop, value);\n        const prevValue = target[prop];\n        target[prop] = value;\n        this.storageDidUpdate(prop, prevValue);\n      }\n\n      return true;\n    });\n\n    this.type = "AbstractComponent"; // Should the proxy be a "revocable" type?\n\n    this.storage = new Proxy(storage, {\n      get: this.handleStoragePropAccess,\n      set: this.handleStoragePropChange\n    });\n  }\n\n  // Lifecycle methods\n  storageShouldUpdate(_prop, _value) {\n    return true;\n  }\n\n  storageWillBeAccessed(_prop) {// left empty.\n  }\n\n  onStorageAccess(prop) {\n    return this.storage[prop];\n  }\n\n  storageWasAccessed(_prop) {// left empty.\n  }\n\n  storageWillUpdate(_prop, _nextValue) {// left empty.\n  }\n\n  storageDidUpdate(_prop, _prevValue) {// left empty.\n  }\n\n  onRemove() {// do stuff when removed....\n  }\n\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9ndWFyZHMudHM/M2I1NyIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvTGlmZWN5Y2xlQ29tcG9uZW50LnRzPzZhY2MiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJpc0NvbXBvbmVudEluc3RhbmNlIiwiQ2xhc3MiLCJjb21wIiwiaXNDb21wb25lbnROYW1lIiwicG9zc2libGVOYW1lIiwiZW50aXRpZXNCeUNUeXBlcyIsImEiLCJrZXlzIiwiaW5jbHVkZXMiLCJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsImNvbnN0cnVjdG9yIiwibmFtZSIsImNsIiwiZnVuYyIsImMiLCJnZXQiLCJ1cGRhdGVkQ29tcG9uZW50IiwiY1R5cGUiLCJkZWxldGUiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5IiwiY3QiLCJoYXMiLCJjTmFtZSIsImNvbXBvbmVudFR5cGVzIiwic2l6ZSIsIldvcmxkIiwicHJlZGljYXRlIiwiZW50aXR5IiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJyZXN1bHRzIiwicHVzaCIsImxvY2F0ZSIsImNjIiwiY29tcG9uZW50Q29sbGVjdGlvbnMiLCJpZCIsImxvY2F0ZUFsbCIsIm1hcCIsImVpZCIsInRhZyIsInRhZ0VudGl0eUlkcyIsImVudGl0aWVzQnlUYWdzIiwiZW50aXR5SWQiLCJuZXh0IiwidmFsdWUiLCJhZGQiLCJjdEFyciIsImVudGl0eVNldCIsImhhc0J5TmFtZSIsInJlbW92ZSIsInJlZ2lzdGVyU3lzdGVtIiwiY05hbWVzIiwiU2V0IiwicmVnaXN0ZXJFbnRpdHkiLCJjbGVhckVudGl0eUNvbXBvbmVudHMiLCJkZXN0cm95RW50aXR5IiwiRW50aXR5Iiwid29ybGQiLCJfaWQiLCJ1dWlkdjQiLCJfd29ybGQiLCJhZGRUYWciLCJoYXNUYWciLCJnZXRBbGwiLCJyZW1vdmVUYWciLCJjbGVhciIsImNsZWFyVGFncyIsImVudHJpZXMiLCJkZXN0cm95IiwidGFncyIsImNyZWF0ZUVudGl0eSIsImNyZWF0ZVN5c3RlbSIsImNUeXBlcyIsInN5c3RlbUZ1bmMiLCJpbmRleCIsImNUeXBlQXJycyIsImFyZ3MiLCJpc0ZpcnN0IiwiaXNMYXN0IiwiTGlmZUN5Y2xlQ29tcG9uZW50Iiwic3RvcmFnZSIsIl90YXJnZXQiLCJwcm9wIiwiX3JlY2VpdmVyIiwic3RvcmFnZVdpbGxCZUFjY2Vzc2VkIiwidmFsIiwib25TdG9yYWdlQWNjZXNzIiwic3RvcmFnZVdhc0FjY2Vzc2VkIiwidGFyZ2V0Iiwic3RvcmFnZVNob3VsZFVwZGF0ZSIsInN0b3JhZ2VXaWxsVXBkYXRlIiwicHJldlZhbHVlIiwic3RvcmFnZURpZFVwZGF0ZSIsInR5cGUiLCJQcm94eSIsImhhbmRsZVN0b3JhZ2VQcm9wQWNjZXNzIiwiaGFuZGxlU3RvcmFnZVByb3BDaGFuZ2UiLCJfcHJvcCIsIl92YWx1ZSIsIl9uZXh0VmFsdWUiLCJfcHJldlZhbHVlIiwib25SZW1vdmUiXSwibWFwcGluZ3MiOiI7Ozs7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aUJFLFVBQWpCLEVBQXdDLENBQ3ZEO0FBQ0Q7O0FBRURQLGtCQUFnQixDQUFDSyxLQUFELEVBQWlCRyxVQUFqQixFQUF3QyxDQUN0RDtBQUNEOztBQUVEQyxVQUFRLEdBQVMsQ0FDZjtBQUNEOztBQXZFb0UsQzs7QUNBdkU7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFbnRpdHksIHsgRW50aXR5SWQgfSBmcm9tIFwiLi9FbnRpdHlcIjtcbmltcG9ydCB7IENvbXBUeXBlcyB9IGZyb20gJ2ludGVyZmFjZXMnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcG9uZW50SW5zdGFuY2U8VD4oXG4gIENsYXNzOiBuZXcgKC4uLmFyZ3M6IGFueSkgPT4gVCxcbiAgY29tcDogYW55XG4pOiBjb21wIGlzIEluc3RhbmNlVHlwZTx0eXBlb2YgQ2xhc3M+IHtcbiAgaWYgKCFjb21wKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCEoY29tcCBpbnN0YW5jZW9mIENsYXNzKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbXBvbmVudE5hbWU8Q1QgZXh0ZW5kcyBDb21wVHlwZXM8Q1Q+PihcbiAgcG9zc2libGVOYW1lOiBhbnksXG4gIGVudGl0aWVzQnlDVHlwZXM6IE1hcDwoa2V5b2YgQ1QpW10sIFNldDxFbnRpdHlJZD4+XG4pOiBwb3NzaWJsZU5hbWUgaXMgQ1Rba2V5b2YgQ1RdIHtcbiAgLy8gc3RyaW5nXG4gIGlmICh0eXBlb2YgcG9zc2libGVOYW1lICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAoY29uc3QgYSBvZiBlbnRpdGllc0J5Q1R5cGVzLmtleXMoKSkge1xuICAgIGlmIChhLmluY2x1ZGVzKHBvc3NpYmxlTmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IENvbXBUeXBlcyB9IGZyb20gXCJpbnRlcmZhY2VzXCI7XG5pbXBvcnQgeyBpc0NvbXBvbmVudEluc3RhbmNlIH0gZnJvbSBcIi4vZ3VhcmRzXCI7XG5cbnR5cGUgQ2xhc3M8VD4gPSB7IG5ldyAoLi4uYXJnczogYW55W10pOiBUIH07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudENvbGxlY3Rpb248Q1QgZXh0ZW5kcyBDb21wVHlwZXM8Q1Q+PiB7XG4gIGNvbXBvbmVudHM6IE1hcDxrZXlvZiBDVCwgSW5zdGFuY2VUeXBlPENUW2tleW9mIENUXT4+ID0gbmV3IE1hcCgpO1xuXG4gIC8vIGluc3RhbmNlIG9mIGEgY29tcG9uZW50XG4gIGFkZCA9IChjb21wb25lbnQ6IEluc3RhbmNlVHlwZTxDVFtrZXlvZiBDVF0+KTogdm9pZCA9PiB7XG4gICAgdGhpcy5jb21wb25lbnRzLnNldChjb21wb25lbnQuY29uc3RydWN0b3IubmFtZSwgY29tcG9uZW50KTtcbiAgfTtcblxuICB1cGRhdGUgPSA8VD4oXG4gICAgY2w6IENsYXNzPFQ+LFxuICAgIGZ1bmM6IChjOiBJbnN0YW5jZVR5cGU8dHlwZW9mIGNsPikgPT4gSW5zdGFuY2VUeXBlPHR5cGVvZiBjbD5cbiAgKTogdm9pZCA9PiB7XG4gICAgY29uc3QgYyA9IHRoaXMuY29tcG9uZW50cy5nZXQoY2wubmFtZSk7XG5cbiAgICBpZiAoaXNDb21wb25lbnRJbnN0YW5jZShjbCwgYykpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21wb25lbnQgPSBmdW5jKGMpO1xuICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjbC5uYW1lLCB1cGRhdGVkQ29tcG9uZW50IGFzIEluc3RhbmNlVHlwZTxDVFtrZXlvZiBDVF0+KTtcbiAgICB9XG4gIH07XG5cbiAgcmVtb3ZlID0gKGNUeXBlOiBDVFtrZXlvZiBDVF0pOiB2b2lkID0+IHtcbiAgICB0aGlzLmNvbXBvbmVudHMuZGVsZXRlKGNUeXBlLm5hbWUpO1xuICB9O1xuXG4gIGdldCA9IDxUPihjbDogQ2xhc3M8VD4pOiBJbnN0YW5jZVR5cGU8dHlwZW9mIGNsPiA9PiB7XG4gICAgY29uc3QgY29tcCA9IHRoaXMuY29tcG9uZW50cy5nZXQoY2wubmFtZSk7XG5cbiAgICBpZiAoaXNDb21wb25lbnRJbnN0YW5jZTxUPihjbCwgY29tcCkpIHtcbiAgICAgIHJldHVybiBjb21wO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDb21wb25lbnRDb2xsZWN0aW9uIGRvZXMgbm90IGhhdmUgY29tcG9uZW50IG9mIHR5cGUgJHtjbC5uYW1lfWBcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFBvc3NpYmxlIG90aGVyIHdheSB0byB3cml0ZSBhIGdldCBtZXRob2QgdGhhdCBtYWludGFpbnMgdGhlIHR5cGUgb2YgdGhlXG4gIC8vIENvbXBvbmVudCB0aHJvdWdob3V0LiBLZWVwaW5nIGFyb3VuZCBmb3Igbm93IGFyZSBhIHJlZmVyZW5jZS5cbiAgLy8gZ2V0PFUgZXh0ZW5kcyBDVD4oY29tcENsYXNzOiBDbGFzczxVPik6IFUge1xuICAvLyAgIGlmICghdGhpcy5jb21wb25lbnRzLmhhcyhjb21wQ2xhc3MubmFtZSkpIHtcbiAgLy8gICAgIHRocm93IG5ldyBFcnJvcihcbiAgLy8gICAgICAgYENvbXBvbmVudENvbGxlY3Rpb24gZG9lcyBub3QgaGF2ZSBjb21wb25lbnQgb2YgdHlwZSAke2NvbXBDbGFzcy5uYW1lfWBcbiAgLy8gICAgICk7XG4gIC8vICAgfVxuXG4gIC8vICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5nZXQoY29tcENsYXNzLm5hbWUpISBhcyB1bmtub3duIGFzIFU7XG4gIC8vIH1cblxuICBoYXMgPSAoY1R5cGU6IENUW2tleW9mIENUXSB8IENUW2tleW9mIENUXVtdKTogYm9vbGVhbiA9PiB7XG4gIC8vIGhhcyA9IDxUPihjVHlwZTogQ2xhc3M8VD4gfCBDbGFzczxUPltdKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY1R5cGUpXG4gICAgICA/IGNUeXBlLmV2ZXJ5KChjdCkgPT4gdGhpcy5jb21wb25lbnRzLmhhcyhjdC5uYW1lKSA9PT0gdHJ1ZSlcbiAgICAgIDogdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZS5uYW1lKTtcbiAgfTtcblxuICBoYXNCeU5hbWUgPSAoY05hbWU6IHN0cmluZyB8IHN0cmluZ1tdKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY05hbWUpXG4gICAgICA/IGNOYW1lLmV2ZXJ5KGN0ID0+IHRoaXMuY29tcG9uZW50cy5oYXMoY3QpID09PSB0cnVlKVxuICAgICAgOiB0aGlzLmNvbXBvbmVudHMuaGFzKGNOYW1lKTtcbiAgfTtcblxuICBnZXQgY29tcG9uZW50VHlwZXMoKTogKGtleW9mIENUKVtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuY29tcG9uZW50cy5rZXlzKCldO1xuICB9XG5cbiAgZ2V0IHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLnNpemU7XG4gIH1cbn1cbiIsImltcG9ydCBFbnRpdHksIHsgRW50aXR5SWQgfSBmcm9tIFwiLi9FbnRpdHlcIjtcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gXCIuL0NvbXBvbmVudENvbGxlY3Rpb25cIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuaW1wb3J0IHsgQ29tcFR5cGVzIH0gZnJvbSBcImludGVyZmFjZXNcIjtcblxudHlwZSBGaW5kUHJlZGljYXRlPENUIGV4dGVuZHMgQ29tcFR5cGVzPENUPj4gPSAoZW50aXR5OiBFbnRpdHk8Q1Q+KSA9PiBib29sZWFuO1xuXG50eXBlIENsYXNzPFQ+ID0geyBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVCB9O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JsZDxDVCBleHRlbmRzIENvbXBUeXBlczxDVD4+IHtcbiAgY29tcG9uZW50Q29sbGVjdGlvbnM6IE1hcDxFbnRpdHlJZCwgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlDVHlwZXM6IE1hcDwoa2V5b2YgQ1QpW10sIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlUYWdzOiBNYXA8VGFnLCBTZXQ8RW50aXR5SWQ+PiA9IG5ldyBNYXAoKTtcblxuICAvKipcbiAgICogXCJmaW5kc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBhIHByZWRpY2F0ZVxuICAgKi9cbiAgZmluZCA9IChwcmVkaWNhdGU6IEZpbmRQcmVkaWNhdGU8Q1Q+KTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImZpbmRzXCIgYWxsIGVudGl0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlLCBraW5kYSBsaWtlIGZpbHRlci5cbiAgICovXG4gIGZpbmRBbGwgPSAocHJlZGljYXRlOiBGaW5kUHJlZGljYXRlPENUPik6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwibG9jYXRlc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBpdHMgQ29tcG9uZW50cy5cbiAgICovXG4gIGxvY2F0ZSA9IChjbDogQ1Rba2V5b2YgQ1RdIHwgQ1Rba2V5b2YgQ1RdW10pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJlbnRpdHk/XCIsIGVudGl0eS5jb21wb25lbnRzLCBjbC5uYW1lKTtcbiAgICAgIGlmIChlbnRpdHkuY29tcG9uZW50cy5oYXMoY2wpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIExvY2F0ZXMgYWxsIGVudGl0aWVzIHRoYXQgY29udGFpbiB0aGUgY29tcG9uZW50cyBuYW1lZFxuICAgKi9cbiAgbG9jYXRlQWxsID0gKGNsOiBDVFtrZXlvZiBDVF0gfCBDVFtrZXlvZiBDVF1bXSk6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNsKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvKipcbiAgICogR3JhYnMgdGhlIGZpcnN0IGVudGl0eSwgYW5kIGl0cyByZWxhdGVkIGNvbXBvbmVudCwgdGhhdCBtYXRjaGVzIHRoZSBjb21wb25lbnQgdHlwZS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnQgfSA9IHdvcmxkLmdyYWIoTXlDb21wb25lbnQpO1xuICAgKiBgYGBcbiAgICovXG4gIGdyYWIgPSA8VD4oXG4gICAgY2w6IENsYXNzPFQ+XG4gICk6IHsgZW50aXR5OiBFbnRpdHk8Q1Q+OyBjb21wb25lbnQ6IEluc3RhbmNlVHlwZTx0eXBlb2YgY2w+IH0gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmxvY2F0ZSgoY2wgYXMgdW5rbm93bikgYXMgQ1Rba2V5b2YgQ1RdKTtcblxuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgIGNvbnN0IGNjID1cbiAgICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZW50aXR5LmlkKSB8fFxuICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PFQ+KGNsKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBjb21wb25lbnQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFiIHNpbmdsZSBjb21wb25lbnQgYmFzZWQgb24gY29tcG9uZW50IHR5cGUgYW5kIHByZWRpY2F0ZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50IH0gPSB3b3JsZC5ncmFiQnkoQ29tcG9uZW50cy5GaXJzdENvbXBvbmVudCwgKGNvbXApID0+IGNvbXAuaWQgPT0gJ2F3ZXNvbWUnKVxuICAgKiBgYGBcbiAgICovXG4gIGdyYWJCeSA9IDxUPihcbiAgICBjbDogQ2xhc3M8VD4sXG4gICAgcHJlZGljYXRlOiAoY29tcDogSW5zdGFuY2VUeXBlPHR5cGVvZiBjbD4pID0+IGJvb2xlYW5cbiAgKTogeyBlbnRpdHk6IEVudGl0eTxDVD47IGNvbXBvbmVudDogSW5zdGFuY2VUeXBlPHR5cGVvZiBjbD4gfSB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5sb2NhdGVBbGwoKGNsIGFzIHVua25vd24pIGFzIENUW2tleW9mIENUXSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcykge1xuICAgICAgY29uc3QgY2MgPVxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpIHx8XG4gICAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8VD4oY2wpO1xuXG4gICAgICBpZiAocHJlZGljYXRlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgZW50aXR5LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFiIGFsbCB0aGUgY29tcG9uZW50cyBwcmltYXJpbHksIGFuZCB0aGUgZW50aXRpZXMgaWYgbmVlZGVkXG4gICAqL1xuICBncmFiQWxsID0gPFQ+KFxuICAgIGNsOiBDbGFzczxUPlxuICApOiB7IGVudGl0eTogRW50aXR5PENUPjsgY29tcG9uZW50OiBJbnN0YW5jZVR5cGU8dHlwZW9mIGNsPiB9W10gPT4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5sb2NhdGVBbGwoKGNsIGFzIHVua25vd24pIGFzIENUW2tleW9mIENUXSk7XG5cbiAgICByZXR1cm4gZW50aXRpZXMubWFwKChlbnRpdHkpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgY29tcG9uZW50OiBlbnRpdHkuY29tcG9uZW50cy5nZXQ8VD4oY2wpLFxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHaXZlbiBhbiBlbnRpdHkgaWQgYW5kIGNvbXBvbmVudFR5cGUsIHJldHVybnMgY29tcG9uZW50XG4gICAqL1xuICBnZXQgPSA8VD4oZWlkOiBFbnRpdHlJZCwgY2w6IENsYXNzPFQ+KTogSW5zdGFuY2VUeXBlPHR5cGVvZiBjbD4gPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICByZXR1cm4gY2MuZ2V0PFQ+KGNsKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIGVudGl0eSB0aGF0IGhhcyBiZWVuIHRhZ2dlZCB3aXRoIHRoZSBnaXZlbiB0YWcsIG9yIHJldHVybiBudWxsO1xuICAgKi9cbiAgZ2V0VGFnZ2VkID0gKHRhZzogVGFnKTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHRhZ0VudGl0eUlkcyA9IHRoaXMuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG5cbiAgICBpZiAodGFnRW50aXR5SWRzKSB7XG4gICAgICBjb25zdCBlbnRpdHlJZCA9IHRhZ0VudGl0eUlkcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG5cbiAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZW50aXRpZXMuZ2V0KGVudGl0eUlkKTtcblxuICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGdldEFsbFRhZ2dlZCA9ICh0YWc6IFRhZyk6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgbGV0IGVudGl0aWVzOiBFbnRpdHk8Q1Q+W10gPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgY29uc3QgdGFnRW50aXR5SWRzID0gdGhpcy5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcblxuICAgIGlmICh0YWdFbnRpdHlJZHMpIHtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgdGFnRW50aXR5SWRzKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZW50aXRpZXMuZ2V0KGVudGl0eUlkKTtcbiAgICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICAgIGVudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBlbnRpdGllcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgY29tcG9uZW50IG9uIHRoZSBnaXZlbiBlbnRpdHlcbiAgICovXG4gIHNldCA9IChlaWQ6IEVudGl0eUlkLCBjb21wb25lbnQ6IEluc3RhbmNlVHlwZTxDVFtrZXlvZiBDVF0+KTogV29ybGQ8Q1Q+ID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY2MuYWRkKGNvbXBvbmVudCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlaWQsIGNjKTtcblxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKChjdEFyciBhcyBzdHJpbmdbXSkuZXZlcnkoY2MuaGFzQnlOYW1lKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBnaXZlbiBlbnRpdHkuXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBjaGFuZ2Ugd2hhdCBzeXN0ZW1zIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBlbnRpdHkuXG4gICAqL1xuICByZW1vdmUgPSAoZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENUW2tleW9mIENUXSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICAvLyByZW1vdmUgZW50aXR5IGZyb20gY3VycmVudCBlbnRpdGllc0J5Q1R5cGVzXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoKGN0QXJyIGFzIHN0cmluZ1tdKS5ldmVyeShjYy5oYXNCeU5hbWUpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjYy5yZW1vdmUoY1R5cGUpO1xuXG4gICAgLy8gTW92ZSBlbnRpdHlJZCB0byBuZXcgQ1R5cGVzIGlmIG5lZWRlZC5cbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmICgoY3RBcnIgYXMgc3RyaW5nW10pLmV2ZXJ5KGNjLmhhc0J5TmFtZSkpIHtcbiAgICAgICAgZW50aXR5U2V0LmFkZChlaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW50ZXJuYWwgbWV0aG9kIHVzZWQgaW4gc2V0dGluZyB1cCBhIG5ldyBzeXN0ZW0uXG4gICAqL1xuICByZWdpc3RlclN5c3RlbShjTmFtZXM6IChrZXlvZiBDVClbXSk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnNldChjTmFtZXMsIG5ldyBTZXQ8RW50aXR5SWQ+KCkpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWdpc3RlckVudGl0eShlbnRpdHk6IEVudGl0eTxDVD4pOiBXb3JsZDxDVD4ge1xuICAgIGNvbnN0IGNjID0gbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlbnRpdHkuaWQsIGNjKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldChlbnRpdHkuaWQsIGVudGl0eSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gYW4gZW50aXR5LlxuICAgKi9cbiAgY2xlYXJFbnRpdHlDb21wb25lbnRzKGVpZDogRW50aXR5SWQpOiBXb3JsZDxDVD4ge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCkpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbiBlbnRpdHkuXG4gICAqIFNhbWUgYXMgZW50aXR5LmRlc3Ryb3koKS5cbiAgICovXG4gIGRlc3Ryb3lFbnRpdHkoZWlkOiBFbnRpdHlJZCk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5kZWxldGUoZWlkKTtcbiAgICB0aGlzLmVudGl0aWVzLmRlbGV0ZShlaWQpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYW55IHRhZyBhc3NvY2lhdGlvbnMgd2l0aCBkZXN0cm95ZWQgZW50aXRpZXMuXG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeVRhZ3MpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW50aXR5U2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgdGhpcy5lbnRpdGllc0J5VGFncy5kZWxldGUodGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uIEFsc28sXG4vLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXRfKSB7XG4gIHZhciBvZmZzZXQgPSBvZmZzZXRfIHx8IDA7IC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuXG4gIHJldHVybiAoYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJ5dGVzVG9VdWlkOyIsImltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IGJ5dGVzVG9VdWlkIGZyb20gJy4vYnl0ZXNUb1V1aWQuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHY0OyIsImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IFdvcmxkIGZyb20gJy4vV29ybGQnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcbmltcG9ydCB7IFRhZyB9IGZyb20gJy4vVGFnJztcbmltcG9ydCB7IENvbXBUeXBlcyB9IGZyb20gJ2ludGVyZmFjZXMnO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5PENUIGV4dGVuZHMgQ29tcFR5cGVzPENUPj4ge1xuICBwcml2YXRlIF9pZDogc3RyaW5nO1xuICBwcml2YXRlIF93b3JsZDogV29ybGQ8Q1Q+O1xuXG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZDxDVD4pIHtcbiAgICB0aGlzLl9pZCA9IHV1aWR2NCgpO1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICAvKlxuICAgIFJlZ2lzdGVyaW5nIHdpdGggdGhlIFdvcmxkLlxuICAgICovXG4gICAgdGhpcy5fd29ybGQucmVnaXN0ZXJFbnRpdHkodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcG9uZW50IHRvIGFuIEVudGl0eSwgZG9oLlxuICAgKi9cbiAgYWRkKGNvbXBvbmVudDogSW5zdGFuY2VUeXBlPENUW2tleW9mIENUXT4pOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLl93b3JsZC5zZXQodGhpcy5faWQsIGNvbXBvbmVudCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSB0YWcgdG8gYSBjb21wb25lbnRcbiAgICovXG4gIGFkZFRhZyh0YWc6IFRhZyk6IEVudGl0eTxDVD4ge1xuICAgIGNvbnN0IGVudGl0eVNldCA9IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpXG4gICAgICA/IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpXG4gICAgICA6IG5ldyBTZXQ8RW50aXR5SWQ+KCk7XG5cbiAgICBpZiAoZW50aXR5U2V0KSB7XG4gICAgICBlbnRpdHlTZXQuYWRkKHRoaXMuX2lkKTtcbiAgICAgIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLnNldCh0YWcsIGVudGl0eVNldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBhbiBlbnRpdHkgaGFzIGEgY29tcG9uZW50IHJlbGF0ZWQgdG8gaXQuXG4gICAqL1xuICBoYXMoY1R5cGU6IENUW2tleW9mIENUXSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNjID0gdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHJldHVybiBjYy5oYXMoY1R5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRvIHNlZSBpZiBhbiBlbnRpdHkgdGFnZ2VkIHdpdGggYSBnaXZlbiB0YWcuXG4gICAqL1xuICBoYXNUYWcodGFnOiBUYWcpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuaGFzKHRhZykpIHtcbiAgICAgIGNvbnN0IGVudGl0eVNldCA9IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuICAgICAgaWYgKGVudGl0eVNldCkge1xuICAgICAgICByZXR1cm4gZW50aXR5U2V0Lmhhcyh0aGlzLl9pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGNvbXBvbmVudCB0aGF0IGJlbG9uZ3MgdG8gYW4gZW50aXR5LlxuICAgKi9cbiAgZ2V0KGNUeXBlOiBDVFtrZXlvZiBDVF0pOiBDVCB7XG4gICAgY29uc3QgY2MgPSB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0KGNUeXBlKTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjb21wb25lbnRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIGFuIGVudGl0eSwgdmlhIGEgQ29tcG9uZW50Q29sbGVjdGlvblxuICAgKi9cbiAgZ2V0QWxsKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcbiAgfVxuXG4gIHJlbW92ZShjVHlwZTogQ1Rba2V5b2YgQ1RdKTogRW50aXR5PENUPiB7XG4gICAgdGhpcy5fd29ybGQucmVtb3ZlKHRoaXMuX2lkLCBjVHlwZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB0YWcgZnJvbSBhbiBlbnRpdHlcbiAgICovXG4gIHJlbW92ZVRhZyh0YWc6IHN0cmluZyB8IG51bWJlcik6IEVudGl0eTxDVD4ge1xuICAgIGlmICh0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5oYXModGFnKSkge1xuICAgICAgY29uc3QgZW50aXR5U2V0ID0gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG4gICAgICBcbiAgICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZSh0aGlzLl9pZCk7XG5cbiAgICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQ2xlYXJzIGFsbCBjb21wb25lbnRzIGZyb20gYW4gRW50aXR5ICovXG4gIGNsZWFyKCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMuX3dvcmxkLmNsZWFyRW50aXR5Q29tcG9uZW50cyh0aGlzLl9pZCk7XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdGFncyBvbiBhbiBlbnRpdHlcbiAgICovXG4gIGNsZWFyVGFncygpOiBFbnRpdHk8Q1Q+IHtcbiAgICBmb3IgKGNvbnN0IFt0YWcsIGVudGl0eVNldF0gb2YgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZW50cmllcygpKSB7XG4gICAgICBlbnRpdHlTZXQuZGVsZXRlKHRoaXMuX2lkKTtcblxuICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLl93b3JsZC5kZXN0cm95RW50aXR5KHRoaXMuX2lkKTtcbiAgfVxuXG4gIGdldCBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIGdldCB3b3JsZCgpOiBXb3JsZDxDVD4ge1xuICAgIHJldHVybiB0aGlzLl93b3JsZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gZW50aXR5LCB2aWEgYSBDb21wb25lbnRDb2xsZWN0aW9uLlxuICAgKiBEb2VzIHRoZSBzYW1lIHRoaW5nIGFzIGVudGl0eUluc3RhbmNlLmdldEFsbCgpLlxuICAgKi9cbiAgZ2V0IGNvbXBvbmVudHMoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgdGhlIHRhZ3MgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhpcyBlbnRpdHkuXG4gICAqL1xuICBnZXQgdGFncygpOiBTZXQ8VGFnPiB7XG4gICAgY29uc3QgdGFncyA9IG5ldyBTZXQ8VGFnPigpO1xuICAgIGZvciAoY29uc3QgW3RhZywgZW50aXR5U2V0XSBvZiB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKHRoaXMuX2lkKSkge1xuICAgICAgICB0YWdzLmFkZCh0YWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YWdzO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHk8Q1QgZXh0ZW5kcyBDb21wVHlwZXM8Q1Q+PihcbiAgd29ybGQ6IFdvcmxkPENUPixcbik6IEVudGl0eTxDVD4ge1xuICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5PENUPih3b3JsZCk7XG5cbiAgcmV0dXJuIGVudGl0eTtcbn1cblxuXG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgRW50aXR5IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gJy4vQ29tcG9uZW50Q29sbGVjdGlvbic7XG5pbXBvcnQgeyBDb21wVHlwZXMgfSBmcm9tICdpbnRlcmZhY2VzJztcblxuZXhwb3J0IHR5cGUgU3lzdGVtID0gKCkgPT4gdm9pZDtcblxuLyoqXG4gKiBBcmd1bWVudHMgdGhhdCBhcmUgcGFzc2VkIGludG8gYSBTeXN0ZW0gZnVuY3Rpb24gb24gZWFjaCBpdGVyYXRpb24uXG4gKiBUaGlzIGlzIGhvdyB5b3UgYWNjZXMgdGhpbmdzIGxpa2UgdGhlIGVudGl0eSB0aGF0IHBhcnRpY3VsYXIgZW50aXR5IHRvIGFjdCBvbixcbiAqIGFzIHdlbGwgYXMgc29tZSBvdGhlciBoZWxwZnVsIHBhcmFtcyBsaWtlIGlmIHRoZSBlbnRpdHkgaXMgdGhlIGZpcnN0IG9yIGxhc3QgZW50aXR5XG4gKiBpbiB0aGUgZ3JvdXAgb2YgZW50aXRpZXMgdGhhdCBiZWluZyBpdGVyYXRlZCBvdmVyLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN5c3RlbUZ1bmNBcmdzPENUIGV4dGVuZHMgQ29tcFR5cGVzPENUPj4ge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgZW50aXR5IGJlaW5nIGl0ZXJhdGVkLlxuICAgKi9cbiAgZW50aXR5OiBFbnRpdHk8Q1Q+O1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gdGhlIGVudGl0eVxuICAgKi9cbiAgY29tcG9uZW50czogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD47XG4gIC8qKlxuICAgKiBUaGUgV29ybGQgaW5zdGFuY2UuXG4gICAqIFVzZSB0aGlzIHRvIGFjY2VzcyBvdGhlciBlbnRpdGllcy5cbiAgICovXG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIGluZGV4OiBudW1iZXI7XG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIElzIHRoZSBmaXJzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIEhlbHBmdWwgZm9yIHNldHRpbmcgdXAgc3RhdGUgdGhhdCBpcyB0aGUgc2FtZSBmb3IgYWxsIGVudGl0aWVzIG9ubHkgb25jZS5cbiAgICovXG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJcyB0aGUgbGFzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIENhbiBiZSBoZWxwZnVsIHRvIHRlYXIgZG93biBhbnl0aGluZyB0aGF0IHNob3VsZCBiZSBkZWFsdCB3aXRoIGFmdGVyIGFsbCB0aGUgZW50aXRlcyBoYXZlIHJhbi5cbiAgICovXG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc3lzdGVtIGlzIHJ1bi5cbiAqL1xuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVCBleHRlbmRzIENvbXBUeXBlczxDVD4+ID0gKFxuICBzeXRlbUZ1bmNBcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4sXG4pID0+IHZvaWQ7XG5cbi8qKlxuICogVGhpcyBpcyBob3cgeW91IGNyZWF0ZSBhIFN5c3RlbS5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGNyZWF0ZVN5c3RlbSh3b3JsZCwgWydDb21wb25lbnRUeXBlJ10sICh7IGVudGl0eSB9KSA9PiAnRG8gZnVuIHN5c3RlbSB0aGluZ3MgaGVyZS4nKVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTeXN0ZW08Q1QgZXh0ZW5kcyBDb21wVHlwZXM8Q1Q+PihcbiAgd29ybGQ6IFdvcmxkPENUPixcbiAgLy8gY1R5cGVzOiBDVFtdLFxuICBjVHlwZXM6IENUW2tleW9mIENUXVtdLFxuICBzeXN0ZW1GdW5jOiBTeXN0ZW1GdW5jPENUPlxuKTogU3lzdGVtIHtcbiAgY29uc3QgY05hbWVzID0gY1R5cGVzLm1hcChjdCA9PiBjdC5uYW1lKTtcbiAgd29ybGQucmVnaXN0ZXJTeXN0ZW0oY05hbWVzKTtcbiAgLy8gd29ybGQucmVnaXN0ZXJTeXN0ZW0oY1R5cGVzKTtcblxuICByZXR1cm4gKCk6IHZvaWQgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgY29uc3Qgc2l6ZSA9IHdvcmxkLmVudGl0aWVzQnlDVHlwZXMuc2l6ZTtcblxuICAgIC8vIFVzZWQgZm9yIG1hdGNoaW5nIHRoZSBhcnJheSBvZiBDb21wb25lbnRUeXBlcyB3aGljaCBpcyB0aGUga2V5XG4gICAgLy8gb2Ygd2hlcmUgdGhlIENvbXBvbmVudENvbGxlY3Rpb24gaXMsIHdpdGggdGhlIGFycmF5IG9mIENvbXBvbmVudFR5cGVzXG4gICAgLy8gdGhhdCBhcmUgcGFzc2VzLlxuICAgIC8vIE1pZ2h0IGJlIG5pY2UgaW4gdGhlIGZ1dHVyZSB0byBnbyBiYWNrIHRvIGEgcmVmIGNoZWNrIG9uIGNUeXBlcywgYnV0XG4gICAgLy8gZm9yIG5vdyB0aGlzIGRvZXNuJ3Qgc2VlbSB0byBiZSB0aGF0IG11Y2ggb2YgYSBwZXJmIGhpdC5cbiAgICAvLyBmb3IgKGNvbnN0IGN0IG9mIHdvcmxkLmVudGl0aWVzQnlDVHlwZXMua2V5cygpKSB7XG4gICAgLy8gICBpZiAoY1R5cGVzLmxlbmd0aCA9PT0gY3QubGVuZ3RoICYmIGNUeXBlcy5ldmVyeShjID0+IGN0LmluY2x1ZGVzKGMpKSkge1xuICAgIC8vICAgICBmb3IgKGNvbnN0IGVpZCBvZiB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmdldChjVHlwZXMpKSB7XG4gICAgLy8gICAgICAgY29uc3QgYXJnczogU3lzdGVtRnVuY0FyZ3M8Q1Q+ID0ge1xuICAgIC8vICAgICAgICAgZW50aXR5OiB3b3JsZC5lbnRpdGllcy5nZXQoZWlkKSxcbiAgICAvLyAgICAgICAgIGNvbXBvbmVudHM6IHdvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpLFxuICAgIC8vICAgICAgICAgd29ybGQsXG4gICAgLy8gICAgICAgICBpbmRleCxcbiAgICAvLyAgICAgICAgIHNpemUsXG4gICAgLy8gICAgICAgICBpc0ZpcnN0OiBpbmRleCA9PT0gMCxcbiAgICAvLyAgICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgIC8vICAgICAgIH1cbiAgICBcbiAgICAvLyAgICAgICBzeXN0ZW1GdW5jKGFyZ3MpO1xuICAgIFxuICAgIC8vICAgICAgIGluZGV4ICs9IDE7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH1cbiAgICAvLyB9XG5cbiAgICBjb25zdCBjVHlwZUFycnMgPSB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmdldChjTmFtZXMpIHx8IG5ldyBTZXQoKTtcblxuICAgIGZvciAoY29uc3QgZWlkIG9mIGNUeXBlQXJycykge1xuICAgICAgY29uc3QgYXJnczogU3lzdGVtRnVuY0FyZ3M8Q1Q+ID0ge1xuICAgICAgICBlbnRpdHk6IHdvcmxkLmVudGl0aWVzLmdldChlaWQpIHx8IG5ldyBFbnRpdHk8Q1Q+KHdvcmxkKSxcbiAgICAgICAgY29tcG9uZW50czogd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCksXG4gICAgICAgIHdvcmxkLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgICAgfVxuXG4gICAgICBzeXN0ZW1GdW5jKGFyZ3MpO1xuXG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlmZUN5Y2xlQ29tcG9uZW50PENULCBTIGV4dGVuZHMgb2JqZWN0ID0gb2JqZWN0PiB7XG4gIHR5cGU6IENUO1xuICBzdG9yYWdlOiBTO1xuXG4gIGNvbnN0cnVjdG9yKHN0b3JhZ2U6IFMpIHtcbiAgICB0aGlzLnR5cGUgPSAoXCJBYnN0cmFjdENvbXBvbmVudFwiIGFzIHVua25vd24pIGFzIENUO1xuXG4gICAgLy8gU2hvdWxkIHRoZSBwcm94eSBiZSBhIFwicmV2b2NhYmxlXCIgdHlwZT9cbiAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgUHJveHkoc3RvcmFnZSwge1xuICAgICAgZ2V0OiB0aGlzLmhhbmRsZVN0b3JhZ2VQcm9wQWNjZXNzLFxuICAgICAgc2V0OiB0aGlzLmhhbmRsZVN0b3JhZ2VQcm9wQ2hhbmdlLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTdG9yYWdlUHJvcEFjY2VzcyA9IChcbiAgICBfdGFyZ2V0OiBTLFxuICAgIHByb3A6IGtleW9mIFMsXG4gICAgX3JlY2VpdmVyOiBhbnlcbiAgKTogU1trZXlvZiBTXSA9PiB7XG4gICAgdGhpcy5zdG9yYWdlV2lsbEJlQWNjZXNzZWQocHJvcCk7XG5cbiAgICBjb25zdCB2YWwgPSB0aGlzLm9uU3RvcmFnZUFjY2Vzcyhwcm9wKTtcblxuICAgIHRoaXMuc3RvcmFnZVdhc0FjY2Vzc2VkKHByb3ApO1xuXG4gICAgcmV0dXJuIHZhbDtcbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZVN0b3JhZ2VQcm9wQ2hhbmdlID0gKFxuICAgIHRhcmdldDogUyxcbiAgICBwcm9wOiBrZXlvZiBTLFxuICAgIHZhbHVlOiBhbnksXG4gICAgX3JlY2VpdmVyOiBhbnlcbiAgKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKHRoaXMuc3RvcmFnZVNob3VsZFVwZGF0ZShwcm9wLCB2YWx1ZSkpIHtcbiAgICAgIHRoaXMuc3RvcmFnZVdpbGxVcGRhdGUocHJvcCwgdmFsdWUpO1xuICAgICAgY29uc3QgcHJldlZhbHVlID0gdGFyZ2V0W3Byb3BdO1xuICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICB0aGlzLnN0b3JhZ2VEaWRVcGRhdGUocHJvcCwgcHJldlZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBMaWZlY3ljbGUgbWV0aG9kc1xuICBzdG9yYWdlU2hvdWxkVXBkYXRlKF9wcm9wOiBrZXlvZiBTLCBfdmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RvcmFnZVdpbGxCZUFjY2Vzc2VkKF9wcm9wOiBrZXlvZiBTKTogdm9pZCB7XG4gICAgLy8gbGVmdCBlbXB0eS5cbiAgfVxuXG4gIG9uU3RvcmFnZUFjY2Vzcyhwcm9wOiBrZXlvZiBTKTogU1trZXlvZiBTXSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZVtwcm9wXTtcbiAgfVxuXG4gIHN0b3JhZ2VXYXNBY2Nlc3NlZChfcHJvcDoga2V5b2YgUyk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBzdG9yYWdlV2lsbFVwZGF0ZShfcHJvcDoga2V5b2YgUywgX25leHRWYWx1ZTogYW55KTogdm9pZCB7XG4gICAgLy8gbGVmdCBlbXB0eS5cbiAgfVxuXG4gIHN0b3JhZ2VEaWRVcGRhdGUoX3Byb3A6IGtleW9mIFMsIF9wcmV2VmFsdWU6IGFueSk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBvblJlbW92ZSgpOiB2b2lkIHtcbiAgICAvLyBkbyBzdHVmZiB3aGVuIHJlbW92ZWQuLi4uXG4gIH1cbn1cbiIsImltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCB7IGNyZWF0ZUVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IGNyZWF0ZVN5c3RlbSB9IGZyb20gJy4vU3lzdGVtJztcbmltcG9ydCBMaWZlY3ljbGVDb21wb25lbnQgZnJvbSAnLi9MaWZlY3ljbGVDb21wb25lbnQnO1xuXG5leHBvcnQge1xuICBXb3JsZCxcbiAgY3JlYXRlRW50aXR5LFxuICBjcmVhdGVTeXN0ZW0sXG4gIExpZmVjeWNsZUNvbXBvbmVudCxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n')}])}));