!function(Q,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ecstatic",[],n):"object"==typeof exports?exports.ecstatic=n():Q.ecstatic=n()}(window,(function(){return function(Q){var n=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(Q,e){!function(Q,n){if(!V[Q]||!r[Q])return;for(var e in r[Q]=!1,n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);0==--G&&0===u&&X()}(Q,e),n&&n(Q,e)};var e,t=!0,B="0511d4da5631b97f2e9d",F={},i=[],U=[];function s(Q){var n=E[Q];if(!n)return N;var t=function(t){return n.hot.active?(E[t]?-1===E[t].parents.indexOf(Q)&&E[t].parents.push(Q):(i=[Q],e=t),-1===n.children.indexOf(t)&&n.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+Q),i=[]),N(t)},B=function(Q){return{configurable:!0,enumerable:!0,get:function(){return N[Q]},set:function(n){N[Q]=n}}};for(var F in N)Object.prototype.hasOwnProperty.call(N,F)&&"e"!==F&&"t"!==F&&Object.defineProperty(t,F,B(F));return t.e=function(Q){return"ready"===l&&d("prepare"),u++,N.e(Q).then(n,(function(Q){throw n(),Q}));function n(){u--,"prepare"===l&&(x[Q]||Z(Q),0===u&&0===G&&X())}},t.t=function(Q,n){return 1&n&&(Q=t(Q)),N.t(Q,-2&n)},t}function I(n){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==n,active:!0,accept:function(Q,n){if(void 0===Q)t._selfAccepted=!0;else if("function"==typeof Q)t._selfAccepted=Q;else if("object"==typeof Q)for(var e=0;e<Q.length;e++)t._acceptedDependencies[Q[e]]=n||function(){};else t._acceptedDependencies[Q]=n||function(){}},decline:function(Q){if(void 0===Q)t._selfDeclined=!0;else if("object"==typeof Q)for(var n=0;n<Q.length;n++)t._declinedDependencies[Q[n]]=!0;else t._declinedDependencies[Q]=!0},dispose:function(Q){t._disposeHandlers.push(Q)},addDisposeHandler:function(Q){t._disposeHandlers.push(Q)},removeDisposeHandler:function(Q){var n=t._disposeHandlers.indexOf(Q);n>=0&&t._disposeHandlers.splice(n,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":(o={})[n]=Q[n],d("ready");break;case"ready":L(n);break;case"prepare":case"check":case"dispose":case"apply":(b=b||[]).push(n)}},check:a,apply:p,status:function(Q){if(!Q)return l;c.push(Q)},addStatusHandler:function(Q){c.push(Q)},removeStatusHandler:function(Q){var n=c.indexOf(Q);n>=0&&c.splice(n,1)},data:F[n]};return e=void 0,t}var c=[],l="idle";function d(Q){l=Q;for(var n=0;n<c.length;n++)c[n].call(null,Q)}var g,o,C,b,G=0,u=0,x={},r={},V={};function y(Q){return+Q+""===Q?+Q:Q}function a(Q){if("idle"!==l)throw new Error("check() is only allowed in idle status");return t=Q,d("check"),(n=1e4,n=n||1e4,new Promise((function(Q,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,B=N.p+"hot/hot-update.json";t.open("GET",B,!0),t.timeout=n,t.send(null)}catch(Q){return e(Q)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+B+" timed out."));else if(404===t.status)Q();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+B+" failed."));else{try{var n=JSON.parse(t.responseText)}catch(Q){return void e(Q)}Q(n)}}}))).then((function(Q){if(!Q)return d(R()?"ready":"idle"),null;r={},x={},V=Q.c,C=Q.h,d("prepare");var n=new Promise((function(Q,n){g={resolve:Q,reject:n}}));o={};return Z(0),"prepare"===l&&0===u&&0===G&&X(),n}));var n}function Z(Q){var n;V[Q]?(r[Q]=!0,G++,(n=document.createElement("script")).charset="utf-8",n.src=N.p+"hot/hot-update.js",document.head.appendChild(n)):x[Q]=!0}function X(){d("ready");var Q=g;if(g=null,Q)if(t)Promise.resolve().then((function(){return p(t)})).then((function(n){Q.resolve(n)}),(function(n){Q.reject(n)}));else{var n=[];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&n.push(y(e));Q.resolve(n)}}function p(n){if("ready"!==l)throw new Error("apply() is only allowed in ready status");return function n(t){var U,s,I,c,l;function g(Q){for(var n=[Q],e={},t=n.map((function(Q){return{chain:[Q],id:Q}}));t.length>0;){var B=t.pop(),F=B.id,i=B.chain;if((c=E[F])&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:F};if(c.hot._main)return{type:"unaccepted",chain:i,moduleId:F};for(var U=0;U<c.parents.length;U++){var s=c.parents[U],I=E[s];if(I){if(I.hot._declinedDependencies[F])return{type:"declined",chain:i.concat([s]),moduleId:F,parentId:s};-1===n.indexOf(s)&&(I.hot._acceptedDependencies[F]?(e[s]||(e[s]=[]),G(e[s],[F])):(delete e[s],n.push(s),t.push({chain:i.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:Q,outdatedModules:n,outdatedDependencies:e}}function G(Q,n){for(var e=0;e<n.length;e++){var t=n[e];-1===Q.indexOf(t)&&Q.push(t)}}R();var u={},x=[],r={},a=function(){console.warn("[HMR] unexpected require("+X.moduleId+") to disposed module")};for(var Z in o)if(Object.prototype.hasOwnProperty.call(o,Z)){var X;l=y(Z),X=o[Z]?g(l):{type:"disposed",moduleId:Z};var p=!1,L=!1,m=!1,W="";switch(X.chain&&(W="\nUpdate propagation: "+X.chain.join(" -> ")),X.type){case"self-declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(p=new Error("Aborted because of self decline: "+X.moduleId+W));break;case"declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(p=new Error("Aborted because of declined dependency: "+X.moduleId+" in "+X.parentId+W));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(X),t.ignoreUnaccepted||(p=new Error("Aborted because "+l+" is not accepted"+W));break;case"accepted":t.onAccepted&&t.onAccepted(X),L=!0;break;case"disposed":t.onDisposed&&t.onDisposed(X),m=!0;break;default:throw new Error("Unexception type "+X.type)}if(p)return d("abort"),Promise.reject(p);if(L)for(l in r[l]=o[l],G(x,X.outdatedModules),X.outdatedDependencies)Object.prototype.hasOwnProperty.call(X.outdatedDependencies,l)&&(u[l]||(u[l]=[]),G(u[l],X.outdatedDependencies[l]));m&&(G(x,[X.moduleId]),r[l]=a)}var A,h=[];for(s=0;s<x.length;s++)l=x[s],E[l]&&E[l].hot._selfAccepted&&r[l]!==a&&!E[l].hot._selfInvalidated&&h.push({module:l,parents:E[l].parents.slice(),errorHandler:E[l].hot._selfAccepted});d("dispose"),Object.keys(V).forEach((function(Q){!1===V[Q]&&function(Q){delete installedChunks[Q]}(Q)}));var D,S,H=x.slice();for(;H.length>0;)if(l=H.pop(),c=E[l]){var v={},f=c.hot._disposeHandlers;for(I=0;I<f.length;I++)(U=f[I])(v);for(F[l]=v,c.hot.active=!1,delete E[l],delete u[l],I=0;I<c.children.length;I++){var T=E[c.children[I]];T&&((A=T.parents.indexOf(l))>=0&&T.parents.splice(A,1))}}for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&(c=E[l]))for(S=u[l],I=0;I<S.length;I++)D=S[I],(A=c.children.indexOf(D))>=0&&c.children.splice(A,1);d("apply"),void 0!==C&&(B=C,C=void 0);for(l in o=void 0,r)Object.prototype.hasOwnProperty.call(r,l)&&(Q[l]=r[l]);var Y=null;for(l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&(c=E[l])){S=u[l];var J=[];for(s=0;s<S.length;s++)if(D=S[s],U=c.hot._acceptedDependencies[D]){if(-1!==J.indexOf(U))continue;J.push(U)}for(s=0;s<J.length;s++){U=J[s];try{U(S)}catch(Q){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:S[s],error:Q}),t.ignoreErrored||Y||(Y=Q)}}}for(s=0;s<h.length;s++){var w=h[s];l=w.module,i=w.parents,e=l;try{N(l)}catch(Q){if("function"==typeof w.errorHandler)try{w.errorHandler(Q)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:Q}),t.ignoreErrored||Y||(Y=n),Y||(Y=Q)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:Q}),t.ignoreErrored||Y||(Y=Q)}}if(Y)return d("fail"),Promise.reject(Y);if(b)return n(t).then((function(Q){return x.forEach((function(n){Q.indexOf(n)<0&&Q.push(n)})),Q}));return d("idle"),new Promise((function(Q){Q(x)}))}(n=n||{})}function R(){if(b)return o||(o={}),b.forEach(L),b=void 0,!0}function L(n){Object.prototype.hasOwnProperty.call(o,n)||(o[n]=Q[n])}var E={};function N(n){if(E[n])return E[n].exports;var e=E[n]={i:n,l:!1,exports:{},hot:I(n),parents:(U=i,i=[],U),children:[]};return Q[n].call(e.exports,e,e.exports,s(n)),e.l=!0,e.exports}return N.m=Q,N.c=E,N.d=function(Q,n,e){N.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:e})},N.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},N.t=function(Q,n){if(1&n&&(Q=N(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var e=Object.create(null);if(N.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var t in Q)N.d(e,t,function(n){return Q[n]}.bind(null,t));return e},N.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return N.d(n,"a",n),n},N.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},N.p="/static/",N.h=function(){return B},s(0)(N.s=0)}([function(Q,n,e){Q.exports=e(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n__webpack_require__.d(__webpack_exports__, "Component", function() { return /* reexport */ Component; });\n__webpack_require__.d(__webpack_exports__, "LifecycleComponent", function() { return /* reexport */ LifeCycleComponent; });\n\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.type, component);\n    });\n\n    _defineProperty(this, "update", (cType, func) => {\n      if (this.components.has(cType)) {\n        const c = this.components.get(cType);\n\n        if (c) {\n          const updatedComponent = func(c);\n          this.components.set(cType, updatedComponent);\n        }\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      if (this.components.has(cType)) {\n        const component = this.components.get(cType);\n\n        if (component) {\n          component.onRemove();\n        }\n      }\n\n      this.components.delete(cType);\n    });\n\n    _defineProperty(this, "get", cType => {\n      if (!this.components.has(cType)) {\n        throw new Error(`ComponentCollection does not have component of type ${cType}`);\n      }\n\n      return this.components.get(cType);\n    });\n\n    _defineProperty(this, "has", cType => {\n      if (Array.isArray(cType)) {\n        return cType.every(ct => this.components.has(ct) === true);\n      } else {\n        return this.components.has(cType);\n      }\n    });\n  }\n\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "entitiesByTags", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cTypes => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cTypes => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cType => {\n      const entity = this.locate(cType);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cType, predicate) => {\n      const entities = this.locateAll(cType);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cType => {\n      return this.locateAll(cType).map(entity => ({\n        entity,\n        component: entity.components.get(cType)\n      }));\n    });\n\n    World_defineProperty(this, "get", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      return cc.get(cType);\n    });\n\n    World_defineProperty(this, "getTagged", tag => {\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        const entityId = tagEntityIds.values().next().value;\n        const entity = this.entities.get(entityId);\n\n        if (entity) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "getAllTagged", tag => {\n      let entities = []; // eslint-disable-line\n\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        for (const entityId of tagEntityIds) {\n          const entity = this.entities.get(entityId);\n\n          if (entity) {\n            entities.push(entity);\n          }\n        }\n      }\n\n      return entities;\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection(); // remove entity from current entitiesByCTypes\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  /**\n   * Internal method used in setting up a new system.\n   */\n  registerSystem(cTypes) {\n    this.entitiesByCTypes.set(cTypes, new Set());\n    return this;\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    } // remove any tag associations with destroyed entities.\n\n\n    for (const [tag, entitySet] of this.entitiesByTags) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n\n      if (entitySet.size === 0) {\n        this.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex.push((bytesToUuid_i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  var offset = offset_ || 0; // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + \'-\' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + \'-\' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + \'-\' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + \'-\' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.set(this._id, component);\n\n    return this;\n  }\n  /**\n   * Add a tag to a component\n   */\n\n\n  addTag(tag) {\n    const entitySet = this._world.entitiesByTags.has(tag) ? this._world.entitiesByTags.get(tag) : new Set();\n\n    if (entitySet) {\n      entitySet.add(this._id);\n\n      this._world.entitiesByTags.set(tag, entitySet);\n    }\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Check to see if an entity tagged with a given tag.\n   */\n\n\n  hasTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        return entitySet.has(this._id);\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    const component = cc.get(cType);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /**\n   * Remove a tag from an entity\n   */\n\n\n  removeTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        entitySet.delete(this._id);\n\n        if (entitySet.size === 0) {\n          this._world.entitiesByTags.delete(tag);\n        }\n      }\n    }\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n  /**\n   * Remove all tags on an entity\n   */\n\n\n  clearTags() {\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      entitySet.delete(this._id);\n\n      if (entitySet.size === 0) {\n        this._world.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n  destroy() {\n    this._world.destroyEntity(this._id);\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n  /**\n   * Retrieves all the tags that have been added to this entity.\n   */\n\n\n  get tags() {\n    const tags = new Set();\n\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      if (entitySet.has(this._id)) {\n        tags.add(tag);\n      }\n    }\n\n    return tags;\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\n\n\n\n/**\n * This is how you create a System.\n * @example\n * ```\n * createSystem(world, [\'ComponentType\'], ({ entity }) => \'Do fun system things here.\')\n * ```\n */\nfunction createSystem(world, cTypes, systemFunc) {\n  world.registerSystem(cTypes);\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    const cTypeArrs = world.entitiesByCTypes.get(cTypes) || new Set();\n\n    for (const eid of cTypeArrs) {\n      const args = {\n        entity: world.entities.get(eid) || new Entity_Entity(world),\n        components: world.componentCollections.get(eid) || new ComponentCollection(),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/Component.ts\nfunction Component_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass Component {\n  constructor(storage) {\n    Component_defineProperty(this, "type", void 0);\n\n    Component_defineProperty(this, "storage", void 0);\n\n    this.type = "AbstractComponent";\n    this.storage = storage;\n\n    for (const [key, val] of Object.entries(storage)) {\n      Object.defineProperty(this, key, {\n        get: () => {\n          return this.storage[key];\n        },\n        set: nextVal => {\n          this.storage[key] = nextVal;\n        }\n      });\n    } // Add getters/setters?\n\n  } // getProperty():\n  // TODO: Will add onRemove later as not to screw up components that\n  //       "implement" Component instead of "extend"ing it.\n\n\n  onRemove() {// empty\n  }\n\n}\n// CONCATENATED MODULE: ./src/LifecycleComponent.ts\nfunction LifecycleComponent_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass LifeCycleComponent {\n  constructor(storage) {\n    LifecycleComponent_defineProperty(this, "type", void 0);\n\n    LifecycleComponent_defineProperty(this, "storage", void 0);\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropAccess", (_target, prop, _receiver) => {\n      this.storageWillBeAccessed(prop);\n      const val = this.onStorageAccess(prop);\n      this.storageWasAccessed(prop);\n      return val;\n    });\n\n    LifecycleComponent_defineProperty(this, "handleStoragePropChange", (target, prop, value, _receiver) => {\n      if (this.storageShouldUpdate(prop, value)) {\n        this.storageWillUpdate(prop, value);\n        const prevValue = target[prop];\n        target[prop] = value;\n        this.storageDidUpdate(prop, prevValue);\n      }\n\n      return true;\n    });\n\n    this.type = "AbstractComponent"; // Should the proxy be a "revocable" type?\n\n    this.storage = new Proxy(storage, {\n      get: this.handleStoragePropAccess,\n      set: this.handleStoragePropChange\n    });\n  }\n\n  // Lifecycle methods\n  storageShouldUpdate(_prop, _value) {\n    return true;\n  }\n\n  storageWillBeAccessed(_prop) {// left empty.\n  }\n\n  onStorageAccess(prop) {\n    return this.storage[prop];\n  }\n\n  storageWasAccessed(_prop) {// left empty.\n  }\n\n  storageWillUpdate(_prop, _nextValue) {// left empty.\n  }\n\n  storageDidUpdate(_prop, _prevValue) {// left empty.\n  }\n\n  onRemove() {// do stuff when removed....\n  }\n\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvQ29tcG9uZW50LnRzPzRkNmIiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvTGlmZWN5Y2xlQ29tcG9uZW50LnRzPzZhY2MiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsInR5cGUiLCJjVHlwZSIsImZ1bmMiLCJoYXMiLCJjIiwiZ2V0IiwidXBkYXRlZENvbXBvbmVudCIsIm9uUmVtb3ZlIiwiZGVsZXRlIiwiRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJldmVyeSIsImN0IiwiY29tcG9uZW50VHlwZXMiLCJrZXlzIiwic2l6ZSIsIldvcmxkIiwicHJlZGljYXRlIiwiZW50aXR5IiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJyZXN1bHRzIiwicHVzaCIsImNUeXBlcyIsImxvY2F0ZSIsImNjIiwiY29tcG9uZW50Q29sbGVjdGlvbnMiLCJpZCIsImxvY2F0ZUFsbCIsIm1hcCIsImVpZCIsInRhZyIsInRhZ0VudGl0eUlkcyIsImVudGl0aWVzQnlUYWdzIiwiZW50aXR5SWQiLCJuZXh0IiwidmFsdWUiLCJhZGQiLCJjdEFyciIsImVudGl0eVNldCIsImVudGl0aWVzQnlDVHlwZXMiLCJyZW1vdmUiLCJyZWdpc3RlclN5c3RlbSIsIlNldCIsInJlZ2lzdGVyRW50aXR5IiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiZGVzdHJveUVudGl0eSIsIkVudGl0eSIsImNvbnN0cnVjdG9yIiwid29ybGQiLCJfaWQiLCJ1dWlkdjQiLCJfd29ybGQiLCJhZGRUYWciLCJoYXNUYWciLCJnZXRBbGwiLCJyZW1vdmVUYWciLCJjbGVhciIsImNsZWFyVGFncyIsImVudHJpZXMiLCJkZXN0cm95IiwidGFncyIsImNyZWF0ZUVudGl0eSIsImNyZWF0ZVN5c3RlbSIsInN5c3RlbUZ1bmMiLCJpbmRleCIsImNUeXBlQXJycyIsImFyZ3MiLCJpc0ZpcnN0IiwiaXNMYXN0IiwiQ29tcG9uZW50Iiwic3RvcmFnZSIsImtleSIsInZhbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwibmV4dFZhbCIsIkxpZmVDeWNsZUNvbXBvbmVudCIsIl90YXJnZXQiLCJwcm9wIiwiX3JlY2VpdmVyIiwic3RvcmFnZVdpbGxCZUFjY2Vzc2VkIiwib25TdG9yYWdlQWNjZXNzIiwic3RvcmFnZVdhc0FjY2Vzc2VkIiwidGFyZ2V0Iiwic3RvcmFnZVNob3VsZFVwZGF0ZSIsInN0b3JhZ2VXaWxsVXBkYXRlIiwicHJldlZhbHVlIiwic3RvcmFnZURpZFVwZGF0ZSIsIlByb3h5IiwiaGFuZGxlU3RvcmFnZVByb3BBY2Nlc3MiLCJoYW5kbGVTdG9yYWdlUHJvcENoYW5nZSIsIl9wcm9wIiwiX3ZhbHVlIiwiX25leHRWYWx1ZSIsIl9wcmV2VmFsdWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFNZSxNQUFNQSxtQkFBTixDQUE4QjtBQUFBO0FBQUEsd0NBQ0UsSUFBSUMsR0FBSixFQURGOztBQUFBLGlDQUdwQ0MsU0FBRCxJQUFvQztBQUN4QyxXQUFLQyxVQUFMLENBQWdCQyxHQUFoQixDQUFvQkYsU0FBUyxDQUFDRyxJQUE5QixFQUFvQ0gsU0FBcEM7QUFDRCxLQUwwQzs7QUFBQSxvQ0FPbEMsQ0FBQ0ksS0FBRCxFQUFZQyxJQUFaLEtBQWdFO0FBQ3ZFLFVBQUksS0FBS0osVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JGLEtBQXBCLENBQUosRUFBZ0M7QUFDOUIsY0FBTUcsQ0FBQyxHQUFHLEtBQUtOLFVBQUwsQ0FBZ0JPLEdBQWhCLENBQW9CSixLQUFwQixDQUFWOztBQUVBLFlBQUlHLENBQUosRUFBTztBQUNMLGdCQUFNRSxnQkFBZ0IsR0FBR0osSUFBSSxDQUFDRSxDQUFELENBQTdCO0FBQ0EsZUFBS04sVUFBTCxDQUFnQkMsR0FBaEIsQ0FBb0JFLEtBQXBCLEVBQTJCSyxnQkFBM0I7QUFDRDtBQUNGO0FBQ0YsS0FoQjBDOztBQUFBLG9DQWtCakNMLEtBQUQsSUFBcUI7QUFDNUIsVUFBSSxLQUFLSCxVQUFMLENBQWdCSyxHQUFoQixDQUFvQkYsS0FBcEIsQ0FBSixFQUFnQztBQUM5QixjQUFNSixTQUFTLEdBQUcsS0FBS0MsVUFBTCxDQUFnQk8sR0FBaEIsQ0FBb0JKLEtBQXBCLENBQWxCOztBQUVBLFlBQUlKLFNBQUosRUFBZTtBQUNiQSxtQkFBUyxDQUFDVSxRQUFWO0FBQ0Q7QUFDRjs7QUFFRCxXQUFLVCxVQUFMLENBQWdCVSxNQUFoQixDQUF1QlAsS0FBdkI7QUFDRCxLQTVCMEM7O0FBQUEsaUNBOEJqQ0EsS0FBSixJQUFxQjtBQUN6QixVQUFJLENBQUMsS0FBS0gsVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JGLEtBQXBCLENBQUwsRUFBaUM7QUFDL0IsY0FBTSxJQUFJUSxLQUFKLENBQVcsdURBQXNEUixLQUFNLEVBQXZFLENBQU47QUFDRDs7QUFFRCxhQUFPLEtBQUtILFVBQUwsQ0FBZ0JPLEdBQWhCLENBQW9CSixLQUFwQixDQUFQO0FBQ0QsS0FwQzBDOztBQUFBLGlDQXNDcENBLEtBQUQsSUFBK0I7QUFDbkMsVUFBSVMsS0FBSyxDQUFDQyxPQUFOLENBQWNWLEtBQWQsQ0FBSixFQUEwQjtBQUN4QixlQUFPQSxLQUFLLENBQUNXLEtBQU4sQ0FBYUMsRUFBRCxJQUFRLEtBQUtmLFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CVSxFQUFwQixNQUE0QixJQUFoRCxDQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBTyxLQUFLZixVQUFMLENBQWdCSyxHQUFoQixDQUFvQkYsS0FBcEIsQ0FBUDtBQUNEO0FBQ0YsS0E1QzBDO0FBQUE7O0FBOEMzQyxNQUFJYSxjQUFKLEdBQTJCO0FBQ3pCLFdBQU8sQ0FBQyxHQUFHLEtBQUtoQixVQUFMLENBQWdCaUIsSUFBaEIsRUFBSixDQUFQO0FBQ0Q7O0FBRUQsTUFBSUMsSUFBSixHQUFtQjtBQUNqQixXQUFPLEtBQUtsQixVQUFMLENBQWdCa0IsSUFBdkI7QUFDRDs7QUFwRDBDLEM7Ozs7QUNIN0M7QUFjZSxNQUFNQyxXQUFOLENBQWdCO0FBQUE7QUFBQSx1REFDa0MsSUFBSXJCLEdBQUosRUFEbEM7O0FBQUEsMkNBR1MsSUFBSUEsR0FBSixFQUhUOztBQUFBLG1EQUtnQixJQUFJQSxHQUFKLEVBTGhCOztBQUFBLGlEQU9hLElBQUlBLEdBQUosRUFQYjs7QUFBQSx1Q0FZckJzQixTQUFELElBQXFEO0FBQzFELFdBQUssTUFBTUMsTUFBWCxJQUFxQixLQUFLQyxRQUFMLENBQWNDLE1BQWQsRUFBckIsRUFBNkM7QUFDM0MsWUFBSUgsU0FBUyxDQUFDQyxNQUFELENBQWIsRUFBdUI7QUFDckIsaUJBQU9BLE1BQVA7QUFDRDtBQUNGOztBQUVELGFBQU8sSUFBUDtBQUNELEtBcEI0Qjs7QUFBQSwwQ0F5QmxCRCxTQUFELElBQWdEO0FBQ3hELFlBQU1JLE9BQXFCLEdBQUcsRUFBOUI7O0FBRUEsV0FBSyxNQUFNSCxNQUFYLElBQXFCLEtBQUtDLFFBQUwsQ0FBY0MsTUFBZCxFQUFyQixFQUE2QztBQUMzQyxZQUFJSCxTQUFTLENBQUNDLE1BQUQsQ0FBYixFQUF1QjtBQUNyQkcsaUJBQU8sQ0FBQ0MsSUFBUixDQUFhSixNQUFiO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPRyxPQUFQO0FBQ0QsS0FuQzRCOztBQUFBLHlDQXdDbkJFLE1BQUQsSUFBMEM7QUFDakQsV0FBSyxNQUFNTCxNQUFYLElBQXFCLEtBQUtDLFFBQUwsQ0FBY0MsTUFBZCxFQUFyQixFQUE2QztBQUMzQyxZQUFJRixNQUFNLENBQUNyQixVQUFQLENBQWtCSyxHQUFsQixDQUFzQnFCLE1BQXRCLENBQUosRUFBbUM7QUFDakMsaUJBQU9MLE1BQVA7QUFDRDtBQUNGOztBQUVELGFBQU8sSUFBUDtBQUNELEtBaEQ0Qjs7QUFBQSw0Q0FxRGhCSyxNQUFELElBQXFDO0FBQy9DLFlBQU1GLE9BQXFCLEdBQUcsRUFBOUI7O0FBRUEsV0FBSyxNQUFNSCxNQUFYLElBQXFCLEtBQUtDLFFBQUwsQ0FBY0MsTUFBZCxFQUFyQixFQUE2QztBQUMzQyxZQUFJRixNQUFNLENBQUNyQixVQUFQLENBQWtCSyxHQUFsQixDQUFzQnFCLE1BQXRCLENBQUosRUFBbUM7QUFDakNGLGlCQUFPLENBQUNDLElBQVIsQ0FBYUosTUFBYjtBQUNEO0FBQ0Y7O0FBRUQsYUFBT0csT0FBUDtBQUNELEtBL0Q0Qjs7QUFBQSx1Q0F3RWxCckIsS0FBSixJQUFxRDtBQUMxRCxZQUFNa0IsTUFBTSxHQUFHLEtBQUtNLE1BQUwsQ0FBWXhCLEtBQVosQ0FBZjs7QUFFQSxVQUFJa0IsTUFBSixFQUFZO0FBQ1YsY0FBTU8sRUFBRSxHQUNOLEtBQUtDLG9CQUFMLENBQTBCdEIsR0FBMUIsQ0FBOEJjLE1BQU0sQ0FBQ1MsRUFBckMsS0FDQSxJQUFJakMsbUJBQUosRUFGRjtBQUlBLGNBQU1FLFNBQVMsR0FBRzZCLEVBQUUsQ0FBQ3JCLEdBQUgsQ0FBVUosS0FBVixDQUFsQjtBQUVBLGVBQU87QUFDTGtCLGdCQURLO0FBRUx0QjtBQUZLLFNBQVA7QUFJRDs7QUFFRCxhQUFPLElBQVA7QUFDRCxLQXpGNEI7O0FBQUEseUNBbUdwQixDQUNQSSxLQURPLEVBRVBpQixTQUZPLEtBRytCO0FBQ3RDLFlBQU1FLFFBQVEsR0FBRyxLQUFLUyxTQUFMLENBQWU1QixLQUFmLENBQWpCOztBQUVBLFdBQUssTUFBTWtCLE1BQVgsSUFBcUJDLFFBQXJCLEVBQStCO0FBQzdCLGNBQU1NLEVBQUUsR0FDTixLQUFLQyxvQkFBTCxDQUEwQnRCLEdBQTFCLENBQThCYyxNQUFNLENBQUNTLEVBQXJDLEtBQ0EsSUFBSWpDLG1CQUFKLEVBRkY7QUFJQSxjQUFNRSxTQUFTLEdBQUc2QixFQUFFLENBQUNyQixHQUFILENBQVVKLEtBQVYsQ0FBbEI7O0FBRUEsWUFBSWlCLFNBQVMsQ0FBQ3JCLFNBQUQsQ0FBYixFQUEwQjtBQUN4QixpQkFBTztBQUNMQSxxQkFESztBQUVMc0I7QUFGSyxXQUFQO0FBSUQ7QUFDRjs7QUFFRCxhQUFPLElBQVA7QUFDRCxLQXpINEI7O0FBQUEsMENBOEhmbEIsS0FBSixJQUFnRDtBQUN4RCxhQUFPLEtBQUs0QixTQUFMLENBQWU1QixLQUFmLEVBQXNCNkIsR0FBdEIsQ0FBMkJYLE1BQUQsS0FBYTtBQUM1Q0EsY0FENEM7QUFFNUN0QixpQkFBUyxFQUFHc0IsTUFBTSxDQUFDckIsVUFBUCxDQUFrQk8sR0FBbEIsQ0FBc0JKLEtBQXRCO0FBRmdDLE9BQWIsQ0FBMUIsQ0FBUDtBQUlELEtBbkk0Qjs7QUFBQSxzQ0F3SXZCLENBQUk4QixHQUFKLEVBQW1COUIsS0FBbkIsS0FBb0M7QUFDeEMsWUFBTXlCLEVBQUUsR0FDTixLQUFLQyxvQkFBTCxDQUEwQnRCLEdBQTFCLENBQThCMEIsR0FBOUIsS0FBc0MsSUFBSXBDLG1CQUFKLEVBRHhDO0FBR0EsYUFBTytCLEVBQUUsQ0FBQ3JCLEdBQUgsQ0FBVUosS0FBVixDQUFQO0FBQ0QsS0E3STRCOztBQUFBLDRDQWtKaEIrQixHQUFELElBQWlDO0FBQzNDLFlBQU1DLFlBQVksR0FBRyxLQUFLQyxjQUFMLENBQW9CN0IsR0FBcEIsQ0FBd0IyQixHQUF4QixDQUFyQjs7QUFFQSxVQUFJQyxZQUFKLEVBQWtCO0FBQ2hCLGNBQU1FLFFBQVEsR0FBR0YsWUFBWSxDQUFDWixNQUFiLEdBQXNCZSxJQUF0QixHQUE2QkMsS0FBOUM7QUFFQSxjQUFNbEIsTUFBTSxHQUFHLEtBQUtDLFFBQUwsQ0FBY2YsR0FBZCxDQUFrQjhCLFFBQWxCLENBQWY7O0FBRUEsWUFBSWhCLE1BQUosRUFBWTtBQUNWLGlCQUFPQSxNQUFQO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPLElBQVA7QUFDRCxLQWhLNEI7O0FBQUEsK0NBa0tiYSxHQUFELElBQTRCO0FBQ3pDLFVBQUlaLFFBQXNCLEdBQUcsRUFBN0IsQ0FEeUMsQ0FDUjs7QUFFakMsWUFBTWEsWUFBWSxHQUFHLEtBQUtDLGNBQUwsQ0FBb0I3QixHQUFwQixDQUF3QjJCLEdBQXhCLENBQXJCOztBQUVBLFVBQUlDLFlBQUosRUFBa0I7QUFDaEIsYUFBSyxNQUFNRSxRQUFYLElBQXVCRixZQUF2QixFQUFxQztBQUNuQyxnQkFBTWQsTUFBTSxHQUFHLEtBQUtDLFFBQUwsQ0FBY2YsR0FBZCxDQUFrQjhCLFFBQWxCLENBQWY7O0FBQ0EsY0FBSWhCLE1BQUosRUFBWTtBQUNWQyxvQkFBUSxDQUFDRyxJQUFULENBQWNKLE1BQWQ7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsYUFBT0MsUUFBUDtBQUNELEtBakw0Qjs7QUFBQSxzQ0FzTHZCLENBQUNXLEdBQUQsRUFBZ0JsQyxTQUFoQixLQUF3RDtBQUM1RCxZQUFNNkIsRUFBRSxHQUNOLEtBQUtDLG9CQUFMLENBQTBCdEIsR0FBMUIsQ0FBOEIwQixHQUE5QixLQUFzQyxJQUFJcEMsbUJBQUosRUFEeEM7QUFHQStCLFFBQUUsQ0FBQ1ksR0FBSCxDQUFPekMsU0FBUDtBQUVBLFdBQUs4QixvQkFBTCxDQUEwQjVCLEdBQTFCLENBQThCZ0MsR0FBOUIsRUFBbUNMLEVBQW5DOztBQUVBLFdBQUssTUFBTSxDQUFDYSxLQUFELEVBQVFDLFNBQVIsQ0FBWCxJQUFpQyxLQUFLQyxnQkFBdEMsRUFBd0Q7QUFDdEQsWUFBSUYsS0FBSyxDQUFDM0IsS0FBTixDQUFZYyxFQUFFLENBQUN2QixHQUFmLENBQUosRUFBeUI7QUFDdkJxQyxtQkFBUyxDQUFDRixHQUFWLENBQWNQLEdBQWQ7QUFDRDtBQUNGOztBQUVELGFBQU8sSUFBUDtBQUNELEtBck00Qjs7QUFBQSx5Q0EyTXBCLENBQUNBLEdBQUQsRUFBZ0I5QixLQUFoQixLQUFvQztBQUMzQyxZQUFNeUIsRUFBRSxHQUNOLEtBQUtDLG9CQUFMLENBQTBCdEIsR0FBMUIsQ0FBOEIwQixHQUE5QixLQUFzQyxJQUFJcEMsbUJBQUosRUFEeEMsQ0FEMkMsQ0FJM0M7O0FBQ0EsV0FBSyxNQUFNLENBQUM0QyxLQUFELEVBQVFDLFNBQVIsQ0FBWCxJQUFpQyxLQUFLQyxnQkFBdEMsRUFBd0Q7QUFDdEQsWUFBSUYsS0FBSyxDQUFDM0IsS0FBTixDQUFZYyxFQUFFLENBQUN2QixHQUFmLENBQUosRUFBeUI7QUFDdkJxQyxtQkFBUyxDQUFDaEMsTUFBVixDQUFpQnVCLEdBQWpCO0FBQ0Q7QUFDRjs7QUFFREwsUUFBRSxDQUFDZ0IsTUFBSCxDQUFVekMsS0FBVixFQVgyQyxDQWEzQzs7QUFDQSxXQUFLLE1BQU0sQ0FBQ3NDLEtBQUQsRUFBUUMsU0FBUixDQUFYLElBQWlDLEtBQUtDLGdCQUF0QyxFQUF3RDtBQUN0RCxZQUFJRixLQUFLLENBQUMzQixLQUFOLENBQVljLEVBQUUsQ0FBQ3ZCLEdBQWYsQ0FBSixFQUF5QjtBQUN2QnFDLG1CQUFTLENBQUNGLEdBQVYsQ0FBY1AsR0FBZDtBQUNEO0FBQ0Y7QUFDRixLQTlONEI7QUFBQTs7QUFnTzdCOzs7QUFHQVksZ0JBQWMsQ0FBQ25CLE1BQUQsRUFBMEI7QUFDdEMsU0FBS2lCLGdCQUFMLENBQXNCMUMsR0FBdEIsQ0FBMEJ5QixNQUExQixFQUFrQyxJQUFJb0IsR0FBSixFQUFsQztBQUVBLFdBQU8sSUFBUDtBQUNEOztBQUVEQyxnQkFBYyxDQUFDMUIsTUFBRCxFQUFnQztBQUM1QyxVQUFNTyxFQUFFLEdBQUcsSUFBSS9CLG1CQUFKLEVBQVg7QUFFQSxTQUFLZ0Msb0JBQUwsQ0FBMEI1QixHQUExQixDQUE4Qm9CLE1BQU0sQ0FBQ1MsRUFBckMsRUFBeUNGLEVBQXpDO0FBQ0EsU0FBS04sUUFBTCxDQUFjckIsR0FBZCxDQUFrQm9CLE1BQU0sQ0FBQ1MsRUFBekIsRUFBNkJULE1BQTdCO0FBRUEsV0FBTyxJQUFQO0FBQ0Q7QUFFRDs7Ozs7QUFHQTJCLHVCQUFxQixDQUFDZixHQUFELEVBQTJCO0FBQzlDLFNBQUtKLG9CQUFMLENBQTBCNUIsR0FBMUIsQ0FBOEJnQyxHQUE5QixFQUFtQyxJQUFJcEMsbUJBQUosRUFBbkM7O0FBRUEsU0FBSyxNQUFNNkMsU0FBWCxJQUF3QixLQUFLQyxnQkFBTCxDQUFzQnBCLE1BQXRCLEVBQXhCLEVBQXdEO0FBQ3RELFVBQUltQixTQUFTLENBQUNyQyxHQUFWLENBQWM0QixHQUFkLENBQUosRUFBd0I7QUFDdEJTLGlCQUFTLENBQUNoQyxNQUFWLENBQWlCdUIsR0FBakI7QUFDRDtBQUNGOztBQUVELFdBQU8sSUFBUDtBQUNEO0FBRUQ7Ozs7OztBQUlBZ0IsZUFBYSxDQUFDaEIsR0FBRCxFQUEyQjtBQUN0QyxTQUFLSixvQkFBTCxDQUEwQm5CLE1BQTFCLENBQWlDdUIsR0FBakM7QUFDQSxTQUFLWCxRQUFMLENBQWNaLE1BQWQsQ0FBcUJ1QixHQUFyQjs7QUFFQSxTQUFLLE1BQU1TLFNBQVgsSUFBd0IsS0FBS0MsZ0JBQUwsQ0FBc0JwQixNQUF0QixFQUF4QixFQUF3RDtBQUN0RCxVQUFJbUIsU0FBUyxDQUFDckMsR0FBVixDQUFjNEIsR0FBZCxDQUFKLEVBQXdCO0FBQ3RCUyxpQkFBUyxDQUFDaEMsTUFBVixDQUFpQnVCLEdBQWpCO0FBQ0Q7QUFDRixLQVJxQyxDQVV0Qzs7O0FBQ0EsU0FBSyxNQUFNLENBQUNDLEdBQUQsRUFBTVEsU0FBTixDQUFYLElBQStCLEtBQUtOLGNBQXBDLEVBQW9EO0FBQ2xELFVBQUlNLFNBQVMsQ0FBQ3JDLEdBQVYsQ0FBYzRCLEdBQWQsQ0FBSixFQUF3QjtBQUN0QlMsaUJBQVMsQ0FBQ2hDLE1BQVYsQ0FBaUJ1QixHQUFqQjtBQUNEOztBQUVELFVBQUlTLFNBQVMsQ0FBQ3hCLElBQVYsS0FBbUIsQ0FBdkIsRUFBMEI7QUFDeEIsYUFBS2tCLGNBQUwsQ0FBb0IxQixNQUFwQixDQUEyQndCLEdBQTNCO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLElBQVA7QUFDRDs7QUEzUjRCLEM7O0FDakIvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQzs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsYUFBQyxLQUFLLENBQUMsYUFBQyxPQUFPLEdBQUcsYUFBQztBQUM1QixrQkFBa0IsYUFBQztBQUNuQjs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBOztBQUVlLHVFQUFXLEU7O0FDakJDO0FBQ2dCOztBQUUzQztBQUNBO0FBQ0EsK0NBQStDLEdBQUcsSUFBSTs7QUFFdEQ7QUFDQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7O0FBRUEsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVMsdUJBQVc7QUFDcEI7O0FBRWUscURBQUUsRTs7OztBQ3ZCakI7QUFHQTtBQUtlLE1BQU1nQixhQUFOLENBQWlCO0FBSTlCQyxhQUFXLENBQUNDLEtBQUQsRUFBbUI7QUFBQTs7QUFBQTs7QUFDNUIsU0FBS0MsR0FBTCxHQUFXQyxjQUFNLEVBQWpCO0FBQ0EsU0FBS0MsTUFBTCxHQUFjSCxLQUFkO0FBRUE7Ozs7QUFHQSxTQUFLRyxNQUFMLENBQVlSLGNBQVosQ0FBMkIsSUFBM0I7QUFDRDtBQUVEOzs7OztBQUdBUCxLQUFHLENBQUN6QyxTQUFELEVBQXVDO0FBQ3hDLFNBQUt3RCxNQUFMLENBQVl0RCxHQUFaLENBQWdCLEtBQUtvRCxHQUFyQixFQUEwQnRELFNBQTFCOztBQUVBLFdBQU8sSUFBUDtBQUNEO0FBRUQ7Ozs7O0FBR0F5RCxRQUFNLENBQUN0QixHQUFELEVBQXVCO0FBQzNCLFVBQU1RLFNBQVMsR0FBRyxLQUFLYSxNQUFMLENBQVluQixjQUFaLENBQTJCL0IsR0FBM0IsQ0FBK0I2QixHQUEvQixJQUNkLEtBQUtxQixNQUFMLENBQVluQixjQUFaLENBQTJCN0IsR0FBM0IsQ0FBK0IyQixHQUEvQixDQURjLEdBRWQsSUFBSVksR0FBSixFQUZKOztBQUlBLFFBQUlKLFNBQUosRUFBZTtBQUNiQSxlQUFTLENBQUNGLEdBQVYsQ0FBYyxLQUFLYSxHQUFuQjs7QUFDQSxXQUFLRSxNQUFMLENBQVluQixjQUFaLENBQTJCbkMsR0FBM0IsQ0FBK0JpQyxHQUEvQixFQUFvQ1EsU0FBcEM7QUFDRDs7QUFFRCxXQUFPLElBQVA7QUFDRDtBQUVEOzs7OztBQUdBckMsS0FBRyxDQUFDRixLQUFELEVBQXFCO0FBQ3RCLFVBQU15QixFQUFFLEdBQUcsS0FBSzJCLE1BQUwsQ0FBWTFCLG9CQUFaLENBQWlDdEIsR0FBakMsQ0FBcUMsS0FBSzhDLEdBQTFDLEtBQWtELElBQUl4RCxtQkFBSixFQUE3RDtBQUVBLFdBQU8rQixFQUFFLENBQUN2QixHQUFILENBQU9GLEtBQVAsQ0FBUDtBQUNEO0FBRUQ7Ozs7O0FBR0FzRCxRQUFNLENBQUN2QixHQUFELEVBQW9CO0FBQ3hCLFFBQUksS0FBS3FCLE1BQUwsQ0FBWW5CLGNBQVosQ0FBMkIvQixHQUEzQixDQUErQjZCLEdBQS9CLENBQUosRUFBeUM7QUFDdkMsWUFBTVEsU0FBUyxHQUFHLEtBQUthLE1BQUwsQ0FBWW5CLGNBQVosQ0FBMkI3QixHQUEzQixDQUErQjJCLEdBQS9CLENBQWxCOztBQUNBLFVBQUlRLFNBQUosRUFBZTtBQUNiLGVBQU9BLFNBQVMsQ0FBQ3JDLEdBQVYsQ0FBYyxLQUFLZ0QsR0FBbkIsQ0FBUDtBQUNEO0FBQ0Y7O0FBRUQsV0FBTyxLQUFQO0FBQ0Q7QUFFRDs7Ozs7QUFHQTlDLEtBQUcsQ0FBSUosS0FBSixFQUFrQjtBQUNuQixVQUFNeUIsRUFBRSxHQUFHLEtBQUsyQixNQUFMLENBQVkxQixvQkFBWixDQUFpQ3RCLEdBQWpDLENBQXFDLEtBQUs4QyxHQUExQyxLQUFrRCxJQUFJeEQsbUJBQUosRUFBN0Q7QUFFQSxVQUFNRSxTQUFTLEdBQUc2QixFQUFFLENBQUNyQixHQUFILENBQVVKLEtBQVYsQ0FBbEI7QUFFQSxXQUFPSixTQUFQO0FBQ0Q7QUFFRDs7Ozs7QUFHQTJELFFBQU0sR0FBNEI7QUFDaEMsV0FBTyxLQUFLSCxNQUFMLENBQVkxQixvQkFBWixDQUFpQ3RCLEdBQWpDLENBQXFDLEtBQUs4QyxHQUExQyxLQUFrRCxJQUFJeEQsbUJBQUosRUFBekQ7QUFDRDs7QUFFRCtDLFFBQU0sQ0FBQ3pDLEtBQUQsRUFBd0I7QUFDNUIsU0FBS29ELE1BQUwsQ0FBWVgsTUFBWixDQUFtQixLQUFLUyxHQUF4QixFQUE2QmxELEtBQTdCOztBQUVBLFdBQU8sSUFBUDtBQUNEO0FBRUQ7Ozs7O0FBR0F3RCxXQUFTLENBQUN6QixHQUFELEVBQW1DO0FBQzFDLFFBQUksS0FBS3FCLE1BQUwsQ0FBWW5CLGNBQVosQ0FBMkIvQixHQUEzQixDQUErQjZCLEdBQS9CLENBQUosRUFBeUM7QUFDdkMsWUFBTVEsU0FBUyxHQUFHLEtBQUthLE1BQUwsQ0FBWW5CLGNBQVosQ0FBMkI3QixHQUEzQixDQUErQjJCLEdBQS9CLENBQWxCOztBQUVBLFVBQUlRLFNBQUosRUFBZTtBQUNiQSxpQkFBUyxDQUFDaEMsTUFBVixDQUFpQixLQUFLMkMsR0FBdEI7O0FBRUEsWUFBSVgsU0FBUyxDQUFDeEIsSUFBVixLQUFtQixDQUF2QixFQUEwQjtBQUN4QixlQUFLcUMsTUFBTCxDQUFZbkIsY0FBWixDQUEyQjFCLE1BQTNCLENBQWtDd0IsR0FBbEM7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0QsV0FBTyxJQUFQO0FBQ0Q7QUFFRDs7O0FBQ0EwQixPQUFLLEdBQWU7QUFDbEIsU0FBS0wsTUFBTCxDQUFZUCxxQkFBWixDQUFrQyxLQUFLSyxHQUF2Qzs7QUFFQSxXQUFPLElBQVA7QUFDRDtBQUVEOzs7OztBQUdBUSxXQUFTLEdBQWU7QUFDdEIsU0FBSyxNQUFNLENBQUMzQixHQUFELEVBQU1RLFNBQU4sQ0FBWCxJQUErQixLQUFLYSxNQUFMLENBQVluQixjQUFaLENBQTJCMEIsT0FBM0IsRUFBL0IsRUFBcUU7QUFDbkVwQixlQUFTLENBQUNoQyxNQUFWLENBQWlCLEtBQUsyQyxHQUF0Qjs7QUFFQSxVQUFJWCxTQUFTLENBQUN4QixJQUFWLEtBQW1CLENBQXZCLEVBQTBCO0FBQ3hCLGFBQUtxQyxNQUFMLENBQVluQixjQUFaLENBQTJCMUIsTUFBM0IsQ0FBa0N3QixHQUFsQztBQUNEO0FBQ0Y7O0FBRUQsV0FBTyxJQUFQO0FBQ0Q7O0FBRUQ2QixTQUFPLEdBQVM7QUFDZCxTQUFLUixNQUFMLENBQVlOLGFBQVosQ0FBMEIsS0FBS0ksR0FBL0I7QUFDRDs7QUFFRCxNQUFJdkIsRUFBSixHQUFpQjtBQUNmLFdBQU8sS0FBS3VCLEdBQVo7QUFDRDs7QUFFRCxNQUFJRCxLQUFKLEdBQXVCO0FBQ3JCLFdBQU8sS0FBS0csTUFBWjtBQUNEO0FBRUQ7Ozs7OztBQUlBLE1BQUl2RCxVQUFKLEdBQTBDO0FBQ3hDLFdBQU8sS0FBS3VELE1BQUwsQ0FBWTFCLG9CQUFaLENBQWlDdEIsR0FBakMsQ0FBcUMsS0FBSzhDLEdBQTFDLEtBQWtELElBQUl4RCxtQkFBSixFQUF6RDtBQUNEO0FBRUQ7Ozs7O0FBR0EsTUFBSW1FLElBQUosR0FBcUI7QUFDbkIsVUFBTUEsSUFBSSxHQUFHLElBQUlsQixHQUFKLEVBQWI7O0FBQ0EsU0FBSyxNQUFNLENBQUNaLEdBQUQsRUFBTVEsU0FBTixDQUFYLElBQStCLEtBQUthLE1BQUwsQ0FBWW5CLGNBQVosQ0FBMkIwQixPQUEzQixFQUEvQixFQUFxRTtBQUNuRSxVQUFJcEIsU0FBUyxDQUFDckMsR0FBVixDQUFjLEtBQUtnRCxHQUFuQixDQUFKLEVBQTZCO0FBQzNCVyxZQUFJLENBQUN4QixHQUFMLENBQVNOLEdBQVQ7QUFDRDtBQUNGOztBQUVELFdBQU84QixJQUFQO0FBQ0Q7O0FBOUo2QjtBQWlLekIsU0FBU0MsWUFBVCxDQUNMYixLQURLLEVBRU87QUFDWixRQUFNL0IsTUFBTSxHQUFHLElBQUk2QixhQUFKLENBQWVFLEtBQWYsQ0FBZjtBQUVBLFNBQU8vQixNQUFQO0FBQ0QsQzs7QUM5S0Q7QUFDQTs7QUE2Q0E7Ozs7Ozs7QUFPTyxTQUFTNkMsWUFBVCxDQUNMZCxLQURLLEVBRUwxQixNQUZLLEVBR0x5QyxVQUhLLEVBSUc7QUFDUmYsT0FBSyxDQUFDUCxjQUFOLENBQXFCbkIsTUFBckI7QUFFQSxTQUFPLE1BQVk7QUFDakIsUUFBSTBDLEtBQUssR0FBRyxDQUFaO0FBQ0EsVUFBTWxELElBQUksR0FBR2tDLEtBQUssQ0FBQ1QsZ0JBQU4sQ0FBdUJ6QixJQUFwQyxDQUZpQixDQUlqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFNbUQsU0FBUyxHQUFHakIsS0FBSyxDQUFDVCxnQkFBTixDQUF1QnBDLEdBQXZCLENBQTJCbUIsTUFBM0IsS0FBc0MsSUFBSW9CLEdBQUosRUFBeEQ7O0FBRUEsU0FBSyxNQUFNYixHQUFYLElBQWtCb0MsU0FBbEIsRUFBNkI7QUFDM0IsWUFBTUMsSUFBd0IsR0FBRztBQUMvQmpELGNBQU0sRUFBRStCLEtBQUssQ0FBQzlCLFFBQU4sQ0FBZWYsR0FBZixDQUFtQjBCLEdBQW5CLEtBQTJCLElBQUlpQixhQUFKLENBQWVFLEtBQWYsQ0FESjtBQUUvQnBELGtCQUFVLEVBQUVvRCxLQUFLLENBQUN2QixvQkFBTixDQUEyQnRCLEdBQTNCLENBQStCMEIsR0FBL0IsS0FBdUMsSUFBSXBDLG1CQUFKLEVBRnBCO0FBRy9CdUQsYUFIK0I7QUFJL0JnQixhQUorQjtBQUsvQmxELFlBTCtCO0FBTS9CcUQsZUFBTyxFQUFFSCxLQUFLLEtBQUssQ0FOWTtBQU8vQkksY0FBTSxFQUFFSixLQUFLLEdBQUcsQ0FBUixLQUFjbEQ7QUFQUyxPQUFqQztBQVVBaUQsZ0JBQVUsQ0FBQ0csSUFBRCxDQUFWO0FBRUFGLFdBQUssSUFBSSxDQUFUO0FBQ0Q7QUFDRixHQTlDRDtBQStDRCxDOzs7O0FDNUdjLE1BQU1LLFNBQU4sQ0FBMkM7QUFJeER0QixhQUFXLENBQUN1QixPQUFELEVBQWE7QUFBQTs7QUFBQTs7QUFDdEIsU0FBS3hFLElBQUwsR0FBYSxtQkFBYjtBQUNBLFNBQUt3RSxPQUFMLEdBQWVBLE9BQWY7O0FBRUEsU0FBSyxNQUFNLENBQUNDLEdBQUQsRUFBTUMsR0FBTixDQUFYLElBQXlCQyxNQUFNLENBQUNmLE9BQVAsQ0FBZVksT0FBZixDQUF6QixFQUFrRDtBQUNoREcsWUFBTSxDQUFDQyxjQUFQLENBQXNCLElBQXRCLEVBQTRCSCxHQUE1QixFQUFpQztBQUMvQnBFLFdBQUcsRUFBRSxNQUFrQjtBQUNyQixpQkFBTyxLQUFLbUUsT0FBTCxDQUFhQyxHQUFiLENBQVA7QUFDRCxTQUg4QjtBQUkvQjFFLFdBQUcsRUFBRzhFLE9BQUQsSUFBK0I7QUFDbEMsZUFBS0wsT0FBTCxDQUFhQyxHQUFiLElBQW9CSSxPQUFwQjtBQUNEO0FBTjhCLE9BQWpDO0FBUUQsS0FicUIsQ0FldEI7O0FBQ0QsR0FwQnVELENBc0J4RDtBQUVBO0FBQ0E7OztBQUNBdEUsVUFBUSxHQUFTLENBQ2Y7QUFDRDs7QUE1QnVELEM7Ozs7QUNBM0MsTUFBTXVFLGtCQUFOLENBQXdEO0FBSXJFN0IsYUFBVyxDQUFDdUIsT0FBRCxFQUFhO0FBQUE7O0FBQUE7O0FBQUEsdUVBVUUsQ0FDeEJPLE9BRHdCLEVBRXhCQyxJQUZ3QixFQUd4QkMsU0FId0IsS0FJVDtBQUNmLFdBQUtDLHFCQUFMLENBQTJCRixJQUEzQjtBQUVBLFlBQU1OLEdBQUcsR0FBRyxLQUFLUyxlQUFMLENBQXFCSCxJQUFyQixDQUFaO0FBRUEsV0FBS0ksa0JBQUwsQ0FBd0JKLElBQXhCO0FBRUEsYUFBT04sR0FBUDtBQUNELEtBdEJ1Qjs7QUFBQSx1RUF3QkUsQ0FDeEJXLE1BRHdCLEVBRXhCTCxJQUZ3QixFQUd4QjNDLEtBSHdCLEVBSXhCNEMsU0FKd0IsS0FLWjtBQUNaLFVBQUksS0FBS0ssbUJBQUwsQ0FBeUJOLElBQXpCLEVBQStCM0MsS0FBL0IsQ0FBSixFQUEyQztBQUN6QyxhQUFLa0QsaUJBQUwsQ0FBdUJQLElBQXZCLEVBQTZCM0MsS0FBN0I7QUFDQSxjQUFNbUQsU0FBUyxHQUFHSCxNQUFNLENBQUNMLElBQUQsQ0FBeEI7QUFDQUssY0FBTSxDQUFDTCxJQUFELENBQU4sR0FBZTNDLEtBQWY7QUFDQSxhQUFLb0QsZ0JBQUwsQ0FBc0JULElBQXRCLEVBQTRCUSxTQUE1QjtBQUNEOztBQUVELGFBQU8sSUFBUDtBQUNELEtBdEN1Qjs7QUFDdEIsU0FBS3hGLElBQUwsR0FBYSxtQkFBYixDQURzQixDQUd0Qjs7QUFDQSxTQUFLd0UsT0FBTCxHQUFlLElBQUlrQixLQUFKLENBQVVsQixPQUFWLEVBQW1CO0FBQ2hDbkUsU0FBRyxFQUFFLEtBQUtzRix1QkFEc0I7QUFFaEM1RixTQUFHLEVBQUUsS0FBSzZGO0FBRnNCLEtBQW5CLENBQWY7QUFJRDs7QUFnQ0Q7QUFDQU4scUJBQW1CLENBQUNPLEtBQUQsRUFBaUJDLE1BQWpCLEVBQXVDO0FBQ3hELFdBQU8sSUFBUDtBQUNEOztBQUVEWix1QkFBcUIsQ0FBQ1csS0FBRCxFQUF1QixDQUMxQztBQUNEOztBQUVEVixpQkFBZSxDQUFDSCxJQUFELEVBQTRCO0FBQ3pDLFdBQU8sS0FBS1IsT0FBTCxDQUFhUSxJQUFiLENBQVA7QUFDRDs7QUFFREksb0JBQWtCLENBQUNTLEtBQUQsRUFBdUIsQ0FDdkM7QUFDRDs7QUFFRE4sbUJBQWlCLENBQUNNLEtBQUQsRUFBaUJFLFVBQWpCLEVBQXdDLENBQ3ZEO0FBQ0Q7O0FBRUROLGtCQUFnQixDQUFDSSxLQUFELEVBQWlCRyxVQUFqQixFQUF3QyxDQUN0RDtBQUNEOztBQUVEekYsVUFBUSxHQUFTLENBQ2Y7QUFDRDs7QUF2RW9FLEM7O0FDQXZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IExpZmVjeWNsZUNvbXBvbmVudCBmcm9tICcuL0xpZmVjeWNsZUNvbXBvbmVudCc7XG5pbXBvcnQgaXNGdW5jdGlvbiBmcm9tICdsb2Rhc2gvaXNGdW5jdGlvbic7XG5cbnR5cGUgSm9pbnRDb21wPENUPiA9IENvbXBvbmVudDxDVD4gfCBMaWZlY3ljbGVDb21wb25lbnQ8Q1Q+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnRDb2xsZWN0aW9uPENUPiB7XG4gIHByaXZhdGUgY29tcG9uZW50czogTWFwPENULCBKb2ludENvbXA8Q1Q+PiA9IG5ldyBNYXAoKTtcblxuICBhZGQgPSAoY29tcG9uZW50OiBKb2ludENvbXA8Q1Q+KTogdm9pZCA9PiB7XG4gICAgdGhpcy5jb21wb25lbnRzLnNldChjb21wb25lbnQudHlwZSwgY29tcG9uZW50KTtcbiAgfVxuXG4gIHVwZGF0ZSA9IChjVHlwZTogQ1QsIGZ1bmM6IChjOiBKb2ludENvbXA8Q1Q+KSA9PiBKb2ludENvbXA8Q1Q+KTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50cy5oYXMoY1R5cGUpKSB7XG4gICAgICBjb25zdCBjID0gdGhpcy5jb21wb25lbnRzLmdldChjVHlwZSk7XG5cbiAgICAgIGlmIChjKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb21wb25lbnQgPSBmdW5jKGMpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGNUeXBlLCB1cGRhdGVkQ29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmVtb3ZlID0gKGNUeXBlOiBDVCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKSkge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnRzLmdldChjVHlwZSk7XG5cbiAgICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgY29tcG9uZW50Lm9uUmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jb21wb25lbnRzLmRlbGV0ZShjVHlwZSk7XG4gIH1cblxuICBnZXQgPSA8Qz4oY1R5cGU6IENUKTogQyA9PiB7XG4gICAgaWYgKCF0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnRDb2xsZWN0aW9uIGRvZXMgbm90IGhhdmUgY29tcG9uZW50IG9mIHR5cGUgJHtjVHlwZX1gKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLmdldChjVHlwZSkgYXMgdW5rbm93biBhcyBDO1xuICB9XG5cbiAgaGFzID0gKGNUeXBlOiBDVCB8IENUW10pOiBib29sZWFuID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjVHlwZSkpIHtcbiAgICAgIHJldHVybiBjVHlwZS5ldmVyeSgoY3QpID0+IHRoaXMuY29tcG9uZW50cy5oYXMoY3QpID09PSB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5oYXMoY1R5cGUpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvbXBvbmVudFR5cGVzKCk6IENUW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5jb21wb25lbnRzLmtleXMoKV07XG4gIH1cblxuICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuc2l6ZTtcbiAgfVxufVxuIiwiaW1wb3J0IEVudGl0eSwgeyBFbnRpdHlJZCB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IExpZmVjeWNsZUNvbXBvbmVudCBmcm9tICcuL0xpZmVjeWNsZUNvbXBvbmVudCc7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tICcuL0NvbXBvbmVudENvbGxlY3Rpb24nO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSAnLi9UYWcnO1xuXG50eXBlIEpvaW50Q29tcDxDVD4gPSBDb21wb25lbnQ8Q1Q+IHwgTGlmZWN5Y2xlQ29tcG9uZW50PENUPjtcblxudHlwZSBGaW5kUHJlZGljYXRlPENUPiA9IChlbnRpdHk6IEVudGl0eTxDVD4pID0+IGJvb2xlYW47XG5cbnR5cGUgR3JhYlByZWRpY2F0ZTxDPiA9IChjb21wb25lbnQ6IEMpID0+IGJvb2xlYW47XG5cbmludGVyZmFjZSBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPiB7XG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgY29tcG9uZW50OiBDO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JsZDxDVD4ge1xuICBjb21wb25lbnRDb2xsZWN0aW9uczogTWFwPEVudGl0eUlkLCBDb21wb25lbnRDb2xsZWN0aW9uPENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXM6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXNCeUNUeXBlczogTWFwPENUW10sIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlUYWdzOiBNYXA8VGFnLCBTZXQ8RW50aXR5SWQ+PiA9IG5ldyBNYXAoKTtcblxuICAvKipcbiAgICogXCJmaW5kc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBhIHByZWRpY2F0ZVxuICAgKi9cbiAgZmluZCA9IChwcmVkaWNhdGU6IEZpbmRQcmVkaWNhdGU8Q1Q+KTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImZpbmRzXCIgYWxsIGVudGl0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlLCBraW5kYSBsaWtlIGZpbHRlci5cbiAgICovXG4gIGZpbmRBbGwgPSAocHJlZGljYXRlOiBGaW5kUHJlZGljYXRlPENUPik6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwibG9jYXRlc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBpdHMgQ29tcG9uZW50cy5cbiAgICovXG4gIGxvY2F0ZSA9IChjVHlwZXM6IENUIHwgQ1RbXSk6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogTG9jYXRlcyBhbGwgZW50aXRpZXMgdGhhdCBjb250YWluIHRoZSBjb21wb25lbnRzIG5hbWVkXG4gICAqL1xuICBsb2NhdGVBbGwgPSAoY1R5cGVzOiBDVCB8IENUW10pOiBFbnRpdHk8Q1Q+W10gPT4ge1xuICAgIGNvbnN0IHJlc3VsdHM6IEVudGl0eTxDVD5bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5jb21wb25lbnRzLmhhcyhjVHlwZXMpKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFicyB0aGUgZmlyc3QgZW50aXR5LCBhbmQgaXRzIHJlbGF0ZWQgY29tcG9uZW50LCB0aGF0IG1hdGNoZXMgdGhlIGNvbXBvbmVudCB0eXBlLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBcbiAgICogY29uc3QgeyBlbnRpdHksIGNvbXBvbmVudCB9ID0gd29ybGQuZ3JhYjxNeUNvbXBvbmVudD4oQ29tcG9uZW50cy5NeUNvbXBvbmVudCk7XG4gICAqIGBgYFxuICAgKi9cbiAgZ3JhYiA9IDxDPihjVHlwZTogQ1QpOiBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPiB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGVudGl0eSA9IHRoaXMubG9jYXRlKGNUeXBlKTtcblxuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgIGNvbnN0IGNjID1cbiAgICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZW50aXR5LmlkKSB8fFxuICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBjb21wb25lbnQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFiIHNpbmdsZSBjb21wb25lbnQgYmFzZWQgb24gY29tcG9uZW50IHR5cGUgYW5kIHByZWRpY2F0ZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50IH0gPSB3b3JsZC5ncmFiQnkoQ29tcG9uZW50cy5GaXJzdENvbXBvbmVudCwgKGNvbXApID0+IGNvbXAuaWQgPT0gJ2F3ZXNvbWUnKVxuICAgKiBgYGBcbiAgICovXG4gIGdyYWJCeSA9IDxDPihcbiAgICBjVHlwZTogQ1QsXG4gICAgcHJlZGljYXRlOiBHcmFiUHJlZGljYXRlPEM+XG4gICk6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLmxvY2F0ZUFsbChjVHlwZSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcykge1xuICAgICAgY29uc3QgY2MgPVxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpIHx8XG4gICAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8Qz4oY1R5cGUpO1xuXG4gICAgICBpZiAocHJlZGljYXRlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgZW50aXR5LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFiIGFsbCB0aGUgY29tcG9uZW50cyBwcmltYXJpbHksIGFuZCB0aGUgZW50aXRpZXMgaWYgbmVlZGVkXG4gICAqL1xuICBncmFiQWxsID0gPEM+KGNUeXBlOiBDVCk6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+W10gPT4ge1xuICAgIHJldHVybiB0aGlzLmxvY2F0ZUFsbChjVHlwZSkubWFwKChlbnRpdHkpID0+ICh7XG4gICAgICBlbnRpdHksXG4gICAgICBjb21wb25lbnQ6IChlbnRpdHkuY29tcG9uZW50cy5nZXQoY1R5cGUpIGFzIHVua25vd24pIGFzIEMsXG4gICAgfSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHaXZlbiBhbiBlbnRpdHkgaWQgYW5kIGNvbXBvbmVudFR5cGUsIHJldHVybnMgY29tcG9uZW50XG4gICAqL1xuICBnZXQgPSA8Qz4oZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENUKTogQyA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHJldHVybiBjYy5nZXQ8Qz4oY1R5cGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYW4gZW50aXR5IHRoYXQgaGFzIGJlZW4gdGFnZ2VkIHdpdGggdGhlIGdpdmVuIHRhZywgb3IgcmV0dXJuIG51bGw7XG4gICAqL1xuICBnZXRUYWdnZWQgPSAodGFnOiBUYWcpOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgdGFnRW50aXR5SWRzID0gdGhpcy5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcblxuICAgIGlmICh0YWdFbnRpdHlJZHMpIHtcbiAgICAgIGNvbnN0IGVudGl0eUlkID0gdGFnRW50aXR5SWRzLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcblxuICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5SWQpO1xuXG4gICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRBbGxUYWdnZWQgPSAodGFnOiBUYWcpOiBFbnRpdHk8Q1Q+W10gPT4ge1xuICAgIGxldCBlbnRpdGllczogRW50aXR5PENUPltdID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGNvbnN0IHRhZ0VudGl0eUlkcyA9IHRoaXMuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG5cbiAgICBpZiAodGFnRW50aXR5SWRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHRhZ0VudGl0eUlkcykge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlbnRpdHlJZCk7XG4gICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICBlbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZW50aXRpZXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgY29tcG9uZW50IG9uIHRoZSBnaXZlbiBlbnRpdHlcbiAgICovXG4gIHNldCA9IChlaWQ6IEVudGl0eUlkLCBjb21wb25lbnQ6IENvbXBvbmVudDxDVD4pOiBXb3JsZDxDVD4gPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICBjYy5hZGQoY29tcG9uZW50KTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgY2MpO1xuXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoY3RBcnIuZXZlcnkoY2MuaGFzKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBnaXZlbiBlbnRpdHkuXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBjaGFuZ2Ugd2hhdCBzeXN0ZW1zIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBlbnRpdHkuXG4gICAqL1xuICByZW1vdmUgPSAoZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENUKTogdm9pZCA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIC8vIHJlbW92ZSBlbnRpdHkgZnJvbSBjdXJyZW50IGVudGl0aWVzQnlDVHlwZXNcbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmIChjdEFyci5ldmVyeShjYy5oYXMpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjYy5yZW1vdmUoY1R5cGUpO1xuXG4gICAgLy8gTW92ZSBlbnRpdHlJZCB0byBuZXcgQ1R5cGVzIGlmIG5lZWRlZC5cbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmIChjdEFyci5ldmVyeShjYy5oYXMpKSB7XG4gICAgICAgIGVudGl0eVNldC5hZGQoZWlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVybmFsIG1ldGhvZCB1c2VkIGluIHNldHRpbmcgdXAgYSBuZXcgc3lzdGVtLlxuICAgKi9cbiAgcmVnaXN0ZXJTeXN0ZW0oY1R5cGVzOiBDVFtdKTogV29ybGQ8Q1Q+IHtcbiAgICB0aGlzLmVudGl0aWVzQnlDVHlwZXMuc2V0KGNUeXBlcywgbmV3IFNldDxFbnRpdHlJZD4oKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlZ2lzdGVyRW50aXR5KGVudGl0eTogRW50aXR5PENUPik6IFdvcmxkPENUPiB7XG4gICAgY29uc3QgY2MgPSBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVudGl0eS5pZCwgY2MpO1xuICAgIHRoaXMuZW50aXRpZXMuc2V0KGVudGl0eS5pZCwgZW50aXR5KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgY29tcG9uZW50cyB0aGF0IGJlbG9uZyB0byBhbiBlbnRpdHkuXG4gICAqL1xuICBjbGVhckVudGl0eUNvbXBvbmVudHMoZWlkOiBFbnRpdHlJZCk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5zZXQoZWlkLCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIGFuIGVudGl0eS5cbiAgICogU2FtZSBhcyBlbnRpdHkuZGVzdHJveSgpLlxuICAgKi9cbiAgZGVzdHJveUVudGl0eShlaWQ6IEVudGl0eUlkKTogV29ybGQ8Q1Q+IHtcbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmRlbGV0ZShlaWQpO1xuICAgIHRoaXMuZW50aXRpZXMuZGVsZXRlKGVpZCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbW92ZSBhbnkgdGFnIGFzc29jaWF0aW9ucyB3aXRoIGRlc3Ryb3llZCBlbnRpdGllcy5cbiAgICBmb3IgKGNvbnN0IFt0YWcsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5VGFncykge1xuICAgICAgaWYgKGVudGl0eVNldC5oYXMoZWlkKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVpZClcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXNCeVRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxuLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLiBBbHNvLFxuLy8gZmluZCB0aGUgY29tcGxldGUgaW1wbGVtZW50YXRpb24gb2YgY3J5cHRvIChtc0NyeXB0bykgb24gSUUxMS5cbnZhciBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pIHx8IHR5cGVvZiBtc0NyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PT0gJ2Z1bmN0aW9uJyAmJiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0byk7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0Xykge1xuICB2YXIgb2Zmc2V0ID0gb2Zmc2V0XyB8fCAwOyAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcblxuICByZXR1cm4gKGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBieXRlc1RvVXVpZDsiLCJpbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCBieXRlc1RvVXVpZCBmcm9tICcuL2J5dGVzVG9VdWlkLmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzVG9VdWlkKHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcbmltcG9ydCB7IFRhZyB9IGZyb20gJy4vVGFnJztcblxuZXhwb3J0IHR5cGUgRW50aXR5SWQgPSBzdHJpbmc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudGl0eTxDVD4ge1xuICBwcml2YXRlIF9pZDogc3RyaW5nO1xuICBwcml2YXRlIF93b3JsZDogV29ybGQ8Q1Q+O1xuXG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZDxDVD4pIHtcbiAgICB0aGlzLl9pZCA9IHV1aWR2NCgpO1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICAvKlxuICAgIFJlZ2lzdGVyaW5nIHdpdGggdGhlIFdvcmxkLlxuICAgICovXG4gICAgdGhpcy5fd29ybGQucmVnaXN0ZXJFbnRpdHkodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcG9uZW50IHRvIGFuIEVudGl0eSwgZG9oLlxuICAgKi9cbiAgYWRkKGNvbXBvbmVudDogQ29tcG9uZW50PENUPik6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMuX3dvcmxkLnNldCh0aGlzLl9pZCwgY29tcG9uZW50KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRhZyB0byBhIGNvbXBvbmVudFxuICAgKi9cbiAgYWRkVGFnKHRhZzogVGFnKTogRW50aXR5PENUPiB7XG4gICAgY29uc3QgZW50aXR5U2V0ID0gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuaGFzKHRhZylcbiAgICAgID8gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZylcbiAgICAgIDogbmV3IFNldDxFbnRpdHlJZD4oKTtcblxuICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgIGVudGl0eVNldC5hZGQodGhpcy5faWQpO1xuICAgICAgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3Muc2V0KHRhZywgZW50aXR5U2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGFuIGVudGl0eSBoYXMgYSBjb21wb25lbnQgcmVsYXRlZCB0byBpdC5cbiAgICovXG4gIGhhcyhjVHlwZTogQ1QpOiBib29sZWFuIHtcbiAgICBjb25zdCBjYyA9IHRoaXMuX3dvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLl9pZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICByZXR1cm4gY2MuaGFzKGNUeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgYW4gZW50aXR5IHRhZ2dlZCB3aXRoIGEgZ2l2ZW4gdGFnLlxuICAgKi9cbiAgaGFzVGFnKHRhZzogVGFnKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpKSB7XG4gICAgICBjb25zdCBlbnRpdHlTZXQgPSB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcbiAgICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eVNldC5oYXModGhpcy5faWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjb21wb25lbnQgdGhhdCBiZWxvbmdzIHRvIGFuIGVudGl0eS5cbiAgICovXG4gIGdldDxDPihjVHlwZTogQ1QpOiBDIHtcbiAgICBjb25zdCBjYyA9IHRoaXMuX3dvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLl9pZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8Qz4oY1R5cGUpO1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gZW50aXR5LCB2aWEgYSBDb21wb25lbnRDb2xsZWN0aW9uXG4gICAqL1xuICBnZXRBbGwoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuICB9XG5cbiAgcmVtb3ZlKGNUeXBlOiBDVCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMuX3dvcmxkLnJlbW92ZSh0aGlzLl9pZCwgY1R5cGUpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgdGFnIGZyb20gYW4gZW50aXR5XG4gICAqL1xuICByZW1vdmVUYWcodGFnOiBzdHJpbmcgfCBudW1iZXIpOiBFbnRpdHk8Q1Q+IHtcbiAgICBpZiAodGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuaGFzKHRhZykpIHtcbiAgICAgIGNvbnN0IGVudGl0eVNldCA9IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuICAgICAgXG4gICAgICBpZiAoZW50aXR5U2V0KSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUodGhpcy5faWQpO1xuXG4gICAgICAgIGlmIChlbnRpdHlTZXQuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIENsZWFycyBhbGwgY29tcG9uZW50cyBmcm9tIGFuIEVudGl0eSAqL1xuICBjbGVhcigpOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLl93b3JsZC5jbGVhckVudGl0eUNvbXBvbmVudHModGhpcy5faWQpO1xuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHRhZ3Mgb24gYW4gZW50aXR5XG4gICAqL1xuICBjbGVhclRhZ3MoKTogRW50aXR5PENUPiB7XG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmVudHJpZXMoKSkge1xuICAgICAgZW50aXR5U2V0LmRlbGV0ZSh0aGlzLl9pZCk7XG5cbiAgICAgIGlmIChlbnRpdHlTZXQuc2l6ZSA9PT0gMCkge1xuICAgICAgICB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5kZWxldGUodGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fd29ybGQuZGVzdHJveUVudGl0eSh0aGlzLl9pZCk7XG4gIH1cblxuICBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBnZXQgd29ybGQoKTogV29ybGQ8Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjb21wb25lbnRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIGFuIGVudGl0eSwgdmlhIGEgQ29tcG9uZW50Q29sbGVjdGlvbi5cbiAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBlbnRpdHlJbnN0YW5jZS5nZXRBbGwoKS5cbiAgICovXG4gIGdldCBjb21wb25lbnRzKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHRoZSB0YWdzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoaXMgZW50aXR5LlxuICAgKi9cbiAgZ2V0IHRhZ3MoKTogU2V0PFRhZz4ge1xuICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PFRhZz4oKTtcbiAgICBmb3IgKGNvbnN0IFt0YWcsIGVudGl0eVNldF0gb2YgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZW50cmllcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0Lmhhcyh0aGlzLl9pZCkpIHtcbiAgICAgICAgdGFncy5hZGQodGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFncztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW50aXR5PENUPihcbiAgd29ybGQ6IFdvcmxkPENUPixcbik6IEVudGl0eTxDVD4ge1xuICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5PENUPih3b3JsZCk7XG5cbiAgcmV0dXJuIGVudGl0eTtcbn1cblxuXG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgRW50aXR5IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gJy4vQ29tcG9uZW50Q29sbGVjdGlvbic7XG5cbmV4cG9ydCB0eXBlIFN5c3RlbSA9ICgpID0+IHZvaWQ7XG5cbi8qKlxuICogQXJndW1lbnRzIHRoYXQgYXJlIHBhc3NlZCBpbnRvIGEgU3lzdGVtIGZ1bmN0aW9uIG9uIGVhY2ggaXRlcmF0aW9uLlxuICogVGhpcyBpcyBob3cgeW91IGFjY2VzIHRoaW5ncyBsaWtlIHRoZSBlbnRpdHkgdGhhdCBwYXJ0aWN1bGFyIGVudGl0eSB0byBhY3Qgb24sXG4gKiBhcyB3ZWxsIGFzIHNvbWUgb3RoZXIgaGVscGZ1bCBwYXJhbXMgbGlrZSBpZiB0aGUgZW50aXR5IGlzIHRoZSBmaXJzdCBvciBsYXN0IGVudGl0eVxuICogaW4gdGhlIGdyb3VwIG9mIGVudGl0aWVzIHRoYXQgYmVpbmcgaXRlcmF0ZWQgb3Zlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1GdW5jQXJnczxDVD4ge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgZW50aXR5IGJlaW5nIGl0ZXJhdGVkLlxuICAgKi9cbiAgZW50aXR5OiBFbnRpdHk8Q1Q+O1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gdGhlIGVudGl0eVxuICAgKi9cbiAgY29tcG9uZW50czogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD47XG4gIC8qKlxuICAgKiBUaGUgV29ybGQgaW5zdGFuY2UuXG4gICAqIFVzZSB0aGlzIHRvIGFjY2VzcyBvdGhlciBlbnRpdGllcy5cbiAgICovXG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIGluZGV4OiBudW1iZXI7XG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIElzIHRoZSBmaXJzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIEhlbHBmdWwgZm9yIHNldHRpbmcgdXAgc3RhdGUgdGhhdCBpcyB0aGUgc2FtZSBmb3IgYWxsIGVudGl0aWVzIG9ubHkgb25jZS5cbiAgICovXG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJcyB0aGUgbGFzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIENhbiBiZSBoZWxwZnVsIHRvIHRlYXIgZG93biBhbnl0aGluZyB0aGF0IHNob3VsZCBiZSBkZWFsdCB3aXRoIGFmdGVyIGFsbCB0aGUgZW50aXRlcyBoYXZlIHJhbi5cbiAgICovXG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc3lzdGVtIGlzIHJ1bi5cbiAqL1xuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVD4gPSAoXG4gIHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPixcbikgPT4gdm9pZDtcblxuLyoqXG4gKiBUaGlzIGlzIGhvdyB5b3UgY3JlYXRlIGEgU3lzdGVtLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY3JlYXRlU3lzdGVtKHdvcmxkLCBbJ0NvbXBvbmVudFR5cGUnXSwgKHsgZW50aXR5IH0pID0+ICdEbyBmdW4gc3lzdGVtIHRoaW5ncyBoZXJlLicpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbTxDVD4oXG4gIHdvcmxkOiBXb3JsZDxDVD4sXG4gIGNUeXBlczogQ1RbXSxcbiAgc3lzdGVtRnVuYzogU3lzdGVtRnVuYzxDVD5cbik6IFN5c3RlbSB7XG4gIHdvcmxkLnJlZ2lzdGVyU3lzdGVtKGNUeXBlcyk7XG5cbiAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IHNpemUgPSB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNpemU7XG5cbiAgICAvLyBVc2VkIGZvciBtYXRjaGluZyB0aGUgYXJyYXkgb2YgQ29tcG9uZW50VHlwZXMgd2hpY2ggaXMgdGhlIGtleVxuICAgIC8vIG9mIHdoZXJlIHRoZSBDb21wb25lbnRDb2xsZWN0aW9uIGlzLCB3aXRoIHRoZSBhcnJheSBvZiBDb21wb25lbnRUeXBlc1xuICAgIC8vIHRoYXQgYXJlIHBhc3Nlcy5cbiAgICAvLyBNaWdodCBiZSBuaWNlIGluIHRoZSBmdXR1cmUgdG8gZ28gYmFjayB0byBhIHJlZiBjaGVjayBvbiBjVHlwZXMsIGJ1dFxuICAgIC8vIGZvciBub3cgdGhpcyBkb2Vzbid0IHNlZW0gdG8gYmUgdGhhdCBtdWNoIG9mIGEgcGVyZiBoaXQuXG4gICAgLy8gZm9yIChjb25zdCBjdCBvZiB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmtleXMoKSkge1xuICAgIC8vICAgaWYgKGNUeXBlcy5sZW5ndGggPT09IGN0Lmxlbmd0aCAmJiBjVHlwZXMuZXZlcnkoYyA9PiBjdC5pbmNsdWRlcyhjKSkpIHtcbiAgICAvLyAgICAgZm9yIChjb25zdCBlaWQgb2Ygd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSkge1xuICAgIC8vICAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAvLyAgICAgICAgIGVudGl0eTogd29ybGQuZW50aXRpZXMuZ2V0KGVpZCksXG4gICAgLy8gICAgICAgICBjb21wb25lbnRzOiB3b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSxcbiAgICAvLyAgICAgICAgIHdvcmxkLFxuICAgIC8vICAgICAgICAgaW5kZXgsXG4gICAgLy8gICAgICAgICBzaXplLFxuICAgIC8vICAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgLy8gICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAvLyAgICAgICB9XG4gICAgXG4gICAgLy8gICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcbiAgICBcbiAgICAvLyAgICAgICBpbmRleCArPSAxO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgY29uc3QgY1R5cGVBcnJzID0gd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSB8fCBuZXcgU2V0KCk7XG5cbiAgICBmb3IgKGNvbnN0IGVpZCBvZiBjVHlwZUFycnMpIHtcbiAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAgICAgZW50aXR5OiB3b3JsZC5lbnRpdGllcy5nZXQoZWlkKSB8fCBuZXcgRW50aXR5PENUPih3b3JsZCksXG4gICAgICAgIGNvbXBvbmVudHM6IHdvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpLFxuICAgICAgICB3b3JsZCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNpemUsXG4gICAgICAgIGlzRmlyc3Q6IGluZGV4ID09PSAwLFxuICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAgIH1cblxuICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcblxuICAgICAgaW5kZXggKz0gMTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudDxDVCwgUyBleHRlbmRzIG9iamVjdCA9IHt9PiB7XG4gIHR5cGU6IENUO1xuICBzdG9yYWdlOiBTO1xuXG4gIGNvbnN0cnVjdG9yKHN0b3JhZ2U6IFMpIHtcbiAgICB0aGlzLnR5cGUgPSAoXCJBYnN0cmFjdENvbXBvbmVudFwiIGFzIHVua25vd24pIGFzIENUO1xuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoc3RvcmFnZSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcbiAgICAgICAgZ2V0OiAoKTogdHlwZW9mIHZhbCA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVtrZXldO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IChuZXh0VmFsOiB0eXBlb2YgdmFsKTogdm9pZCA9PiB7XG4gICAgICAgICAgdGhpcy5zdG9yYWdlW2tleV0gPSBuZXh0VmFsO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGdldHRlcnMvc2V0dGVycz9cbiAgfVxuXG4gIC8vIGdldFByb3BlcnR5KCk6XG5cbiAgLy8gVE9ETzogV2lsbCBhZGQgb25SZW1vdmUgbGF0ZXIgYXMgbm90IHRvIHNjcmV3IHVwIGNvbXBvbmVudHMgdGhhdFxuICAvLyAgICAgICBcImltcGxlbWVudFwiIENvbXBvbmVudCBpbnN0ZWFkIG9mIFwiZXh0ZW5kXCJpbmcgaXQuXG4gIG9uUmVtb3ZlKCk6IHZvaWQge1xuICAgIC8vIGVtcHR5XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExpZmVDeWNsZUNvbXBvbmVudDxDVCwgUyBleHRlbmRzIG9iamVjdCA9IG9iamVjdD4ge1xuICB0eXBlOiBDVDtcbiAgc3RvcmFnZTogUztcblxuICBjb25zdHJ1Y3RvcihzdG9yYWdlOiBTKSB7XG4gICAgdGhpcy50eXBlID0gKFwiQWJzdHJhY3RDb21wb25lbnRcIiBhcyB1bmtub3duKSBhcyBDVDtcblxuICAgIC8vIFNob3VsZCB0aGUgcHJveHkgYmUgYSBcInJldm9jYWJsZVwiIHR5cGU/XG4gICAgdGhpcy5zdG9yYWdlID0gbmV3IFByb3h5KHN0b3JhZ2UsIHtcbiAgICAgIGdldDogdGhpcy5oYW5kbGVTdG9yYWdlUHJvcEFjY2VzcyxcbiAgICAgIHNldDogdGhpcy5oYW5kbGVTdG9yYWdlUHJvcENoYW5nZSxcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVN0b3JhZ2VQcm9wQWNjZXNzID0gKFxuICAgIF90YXJnZXQ6IFMsXG4gICAgcHJvcDoga2V5b2YgUyxcbiAgICBfcmVjZWl2ZXI6IGFueVxuICApOiBTW2tleW9mIFNdID0+IHtcbiAgICB0aGlzLnN0b3JhZ2VXaWxsQmVBY2Nlc3NlZChwcm9wKTtcblxuICAgIGNvbnN0IHZhbCA9IHRoaXMub25TdG9yYWdlQWNjZXNzKHByb3ApO1xuXG4gICAgdGhpcy5zdG9yYWdlV2FzQWNjZXNzZWQocHJvcCk7XG5cbiAgICByZXR1cm4gdmFsO1xuICB9O1xuXG4gIGhhbmRsZVN0b3JhZ2VQcm9wQ2hhbmdlID0gKFxuICAgIHRhcmdldDogUyxcbiAgICBwcm9wOiBrZXlvZiBTLFxuICAgIHZhbHVlOiBhbnksXG4gICAgX3JlY2VpdmVyOiBhbnlcbiAgKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKHRoaXMuc3RvcmFnZVNob3VsZFVwZGF0ZShwcm9wLCB2YWx1ZSkpIHtcbiAgICAgIHRoaXMuc3RvcmFnZVdpbGxVcGRhdGUocHJvcCwgdmFsdWUpO1xuICAgICAgY29uc3QgcHJldlZhbHVlID0gdGFyZ2V0W3Byb3BdO1xuICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICB0aGlzLnN0b3JhZ2VEaWRVcGRhdGUocHJvcCwgcHJldlZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBMaWZlY3ljbGUgbWV0aG9kc1xuICBzdG9yYWdlU2hvdWxkVXBkYXRlKF9wcm9wOiBrZXlvZiBTLCBfdmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc3RvcmFnZVdpbGxCZUFjY2Vzc2VkKF9wcm9wOiBrZXlvZiBTKTogdm9pZCB7XG4gICAgLy8gbGVmdCBlbXB0eS5cbiAgfVxuXG4gIG9uU3RvcmFnZUFjY2Vzcyhwcm9wOiBrZXlvZiBTKTogU1trZXlvZiBTXSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZVtwcm9wXTtcbiAgfVxuXG4gIHN0b3JhZ2VXYXNBY2Nlc3NlZChfcHJvcDoga2V5b2YgUyk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBzdG9yYWdlV2lsbFVwZGF0ZShfcHJvcDoga2V5b2YgUywgX25leHRWYWx1ZTogYW55KTogdm9pZCB7XG4gICAgLy8gbGVmdCBlbXB0eS5cbiAgfVxuXG4gIHN0b3JhZ2VEaWRVcGRhdGUoX3Byb3A6IGtleW9mIFMsIF9wcmV2VmFsdWU6IGFueSk6IHZvaWQge1xuICAgIC8vIGxlZnQgZW1wdHkuXG4gIH1cblxuICBvblJlbW92ZSgpOiB2b2lkIHtcbiAgICAvLyBkbyBzdHVmZiB3aGVuIHJlbW92ZWQuLi4uXG4gIH1cbn1cbiIsImltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCB7IGNyZWF0ZUVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IGNyZWF0ZVN5c3RlbSB9IGZyb20gJy4vU3lzdGVtJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IExpZmVjeWNsZUNvbXBvbmVudCBmcm9tICcuL0xpZmVjeWNsZUNvbXBvbmVudCc7XG5cbmV4cG9ydCB7XG4gIFdvcmxkLFxuICBjcmVhdGVFbnRpdHksXG4gIGNyZWF0ZVN5c3RlbSxcbiAgQ29tcG9uZW50LFxuICBMaWZlY3ljbGVDb21wb25lbnQsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')}])}));