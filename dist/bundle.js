!function(Q,B){"object"==typeof exports&&"object"==typeof module?module.exports=B():"function"==typeof define&&define.amd?define("ecstatic",[],B):"object"==typeof exports?exports.ecstatic=B():Q.ecstatic=B()}(window,(function(){return function(Q){var B=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(Q,n){!function(Q,B){if(!x[Q]||!y[Q])return;for(var n in y[Q]=!1,B)Object.prototype.hasOwnProperty.call(B,n)&&(b[n]=B[n]);0==--G&&0===u&&Z()}(Q,n),B&&B(Q,n)};var n,t=!0,F="19235c89b7f2b3e5175e",e={},U=[],I=[];function s(Q){var B=E[Q];if(!B)return L;var t=function(t){return B.hot.active?(E[t]?-1===E[t].parents.indexOf(Q)&&E[t].parents.push(Q):(U=[Q],n=t),-1===B.children.indexOf(t)&&B.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+Q),U=[]),L(t)},F=function(Q){return{configurable:!0,enumerable:!0,get:function(){return L[Q]},set:function(B){L[Q]=B}}};for(var e in L)Object.prototype.hasOwnProperty.call(L,e)&&"e"!==e&&"t"!==e&&Object.defineProperty(t,e,F(e));return t.e=function(Q){return"ready"===i&&g("prepare"),u++,L.e(Q).then(B,(function(Q){throw B(),Q}));function B(){u--,"prepare"===i&&(R[Q]||X(Q),0===u&&0===G&&Z())}},t.t=function(Q,B){return 1&B&&(Q=t(Q)),L.t(Q,-2&B)},t}function c(B){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==B,active:!0,accept:function(Q,B){if(void 0===Q)t._selfAccepted=!0;else if("function"==typeof Q)t._selfAccepted=Q;else if("object"==typeof Q)for(var n=0;n<Q.length;n++)t._acceptedDependencies[Q[n]]=B||function(){};else t._acceptedDependencies[Q]=B||function(){}},decline:function(Q){if(void 0===Q)t._selfDeclined=!0;else if("object"==typeof Q)for(var B=0;B<Q.length;B++)t._declinedDependencies[Q[B]]=!0;else t._declinedDependencies[Q]=!0},dispose:function(Q){t._disposeHandlers.push(Q)},addDisposeHandler:function(Q){t._disposeHandlers.push(Q)},removeDisposeHandler:function(Q){var B=t._disposeHandlers.indexOf(Q);B>=0&&t._disposeHandlers.splice(B,1)},invalidate:function(){switch(this._selfInvalidated=!0,i){case"idle":(b={})[B]=Q[B],g("ready");break;case"ready":r(B);break;case"prepare":case"check":case"dispose":case"apply":(o=o||[]).push(B)}},check:V,apply:N,status:function(Q){if(!Q)return i;l.push(Q)},addStatusHandler:function(Q){l.push(Q)},removeStatusHandler:function(Q){var B=l.indexOf(Q);B>=0&&l.splice(B,1)},data:e[B]};return n=void 0,t}var l=[],i="idle";function g(Q){i=Q;for(var B=0;B<l.length;B++)l[B].call(null,Q)}var d,b,C,o,G=0,u=0,R={},y={},x={};function a(Q){return+Q+""===Q?+Q:Q}function V(Q){if("idle"!==i)throw new Error("check() is only allowed in idle status");return t=Q,g("check"),(B=1e4,B=B||1e4,new Promise((function(Q,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var t=new XMLHttpRequest,F=L.p+"hot/hot-update.json";t.open("GET",F,!0),t.timeout=B,t.send(null)}catch(Q){return n(Q)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)n(new Error("Manifest request to "+F+" timed out."));else if(404===t.status)Q();else if(200!==t.status&&304!==t.status)n(new Error("Manifest request to "+F+" failed."));else{try{var B=JSON.parse(t.responseText)}catch(Q){return void n(Q)}Q(B)}}}))).then((function(Q){if(!Q)return g(m()?"ready":"idle"),null;y={},R={},x=Q.c,C=Q.h,g("prepare");var B=new Promise((function(Q,B){d={resolve:Q,reject:B}}));b={};return X(0),"prepare"===i&&0===u&&0===G&&Z(),B}));var B}function X(Q){var B;x[Q]?(y[Q]=!0,G++,(B=document.createElement("script")).charset="utf-8",B.src=L.p+"hot/hot-update.js",document.head.appendChild(B)):R[Q]=!0}function Z(){g("ready");var Q=d;if(d=null,Q)if(t)Promise.resolve().then((function(){return N(t)})).then((function(B){Q.resolve(B)}),(function(B){Q.reject(B)}));else{var B=[];for(var n in b)Object.prototype.hasOwnProperty.call(b,n)&&B.push(a(n));Q.resolve(B)}}function N(B){if("ready"!==i)throw new Error("apply() is only allowed in ready status");return function B(t){var I,s,c,l,i;function d(Q){for(var B=[Q],n={},t=B.map((function(Q){return{chain:[Q],id:Q}}));t.length>0;){var F=t.pop(),e=F.id,U=F.chain;if((l=E[e])&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:U,moduleId:e};if(l.hot._main)return{type:"unaccepted",chain:U,moduleId:e};for(var I=0;I<l.parents.length;I++){var s=l.parents[I],c=E[s];if(c){if(c.hot._declinedDependencies[e])return{type:"declined",chain:U.concat([s]),moduleId:e,parentId:s};-1===B.indexOf(s)&&(c.hot._acceptedDependencies[e]?(n[s]||(n[s]=[]),G(n[s],[e])):(delete n[s],B.push(s),t.push({chain:U.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:Q,outdatedModules:B,outdatedDependencies:n}}function G(Q,B){for(var n=0;n<B.length;n++){var t=B[n];-1===Q.indexOf(t)&&Q.push(t)}}m();var u={},R=[],y={},V=function(){console.warn("[HMR] unexpected require("+Z.moduleId+") to disposed module")};for(var X in b)if(Object.prototype.hasOwnProperty.call(b,X)){var Z;i=a(X),Z=b[X]?d(i):{type:"disposed",moduleId:X};var N=!1,r=!1,W=!1,p="";switch(Z.chain&&(p="\nUpdate propagation: "+Z.chain.join(" -> ")),Z.type){case"self-declined":t.onDeclined&&t.onDeclined(Z),t.ignoreDeclined||(N=new Error("Aborted because of self decline: "+Z.moduleId+p));break;case"declined":t.onDeclined&&t.onDeclined(Z),t.ignoreDeclined||(N=new Error("Aborted because of declined dependency: "+Z.moduleId+" in "+Z.parentId+p));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(Z),t.ignoreUnaccepted||(N=new Error("Aborted because "+i+" is not accepted"+p));break;case"accepted":t.onAccepted&&t.onAccepted(Z),r=!0;break;case"disposed":t.onDisposed&&t.onDisposed(Z),W=!0;break;default:throw new Error("Unexception type "+Z.type)}if(N)return g("abort"),Promise.reject(N);if(r)for(i in y[i]=b[i],G(R,Z.outdatedModules),Z.outdatedDependencies)Object.prototype.hasOwnProperty.call(Z.outdatedDependencies,i)&&(u[i]||(u[i]=[]),G(u[i],Z.outdatedDependencies[i]));W&&(G(R,[Z.moduleId]),y[i]=V)}var A,S=[];for(s=0;s<R.length;s++)i=R[s],E[i]&&E[i].hot._selfAccepted&&y[i]!==V&&!E[i].hot._selfInvalidated&&S.push({module:i,parents:E[i].parents.slice(),errorHandler:E[i].hot._selfAccepted});g("dispose"),Object.keys(x).forEach((function(Q){!1===x[Q]&&function(Q){delete installedChunks[Q]}(Q)}));var h,D,v=R.slice();for(;v.length>0;)if(i=v.pop(),l=E[i]){var H={},Y=l.hot._disposeHandlers;for(c=0;c<Y.length;c++)(I=Y[c])(H);for(e[i]=H,l.hot.active=!1,delete E[i],delete u[i],c=0;c<l.children.length;c++){var k=E[l.children[c]];k&&((A=k.parents.indexOf(i))>=0&&k.parents.splice(A,1))}}for(i in u)if(Object.prototype.hasOwnProperty.call(u,i)&&(l=E[i]))for(D=u[i],c=0;c<D.length;c++)h=D[c],(A=l.children.indexOf(h))>=0&&l.children.splice(A,1);g("apply"),void 0!==C&&(F=C,C=void 0);for(i in b=void 0,y)Object.prototype.hasOwnProperty.call(y,i)&&(Q[i]=y[i]);var T=null;for(i in u)if(Object.prototype.hasOwnProperty.call(u,i)&&(l=E[i])){D=u[i];var z=[];for(s=0;s<D.length;s++)if(h=D[s],I=l.hot._acceptedDependencies[h]){if(-1!==z.indexOf(I))continue;z.push(I)}for(s=0;s<z.length;s++){I=z[s];try{I(D)}catch(Q){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:i,dependencyId:D[s],error:Q}),t.ignoreErrored||T||(T=Q)}}}for(s=0;s<S.length;s++){var J=S[s];i=J.module,U=J.parents,n=i;try{L(i)}catch(Q){if("function"==typeof J.errorHandler)try{J.errorHandler(Q)}catch(B){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:i,error:B,originalError:Q}),t.ignoreErrored||T||(T=B),T||(T=Q)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:i,error:Q}),t.ignoreErrored||T||(T=Q)}}if(T)return g("fail"),Promise.reject(T);if(o)return B(t).then((function(Q){return R.forEach((function(B){Q.indexOf(B)<0&&Q.push(B)})),Q}));return g("idle"),new Promise((function(Q){Q(R)}))}(B=B||{})}function m(){if(o)return b||(b={}),o.forEach(r),o=void 0,!0}function r(B){Object.prototype.hasOwnProperty.call(b,B)||(b[B]=Q[B])}var E={};function L(B){if(E[B])return E[B].exports;var n=E[B]={i:B,l:!1,exports:{},hot:c(B),parents:(I=U,U=[],I),children:[]};return Q[B].call(n.exports,n,n.exports,s(B)),n.l=!0,n.exports}return L.m=Q,L.c=E,L.d=function(Q,B,n){L.o(Q,B)||Object.defineProperty(Q,B,{enumerable:!0,get:n})},L.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},L.t=function(Q,B){if(1&B&&(Q=L(Q)),8&B)return Q;if(4&B&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var n=Object.create(null);if(L.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:Q}),2&B&&"string"!=typeof Q)for(var t in Q)L.d(n,t,function(B){return Q[B]}.bind(null,t));return n},L.n=function(Q){var B=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return L.d(B,"a",B),B},L.o=function(Q,B){return Object.prototype.hasOwnProperty.call(Q,B)},L.p="/static/",L.h=function(){return F},s(0)(L.s=0)}([function(Q,B,n){Q.exports=n(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "trackComponent", function() { return /* reexport */ trackComponent; });\n__webpack_require__.d(__webpack_exports__, "Entity", function() { return /* reexport */ Entity_Entity; });\n\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/regex.js\n/* harmony default export */ var regex = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/validate.js\n\n\nfunction validate(uuid) {\n  return typeof uuid === \'string\' && regex.test(uuid);\n}\n\n/* harmony default export */ var esm_browser_validate = (validate);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/stringify.js\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var stringify_i = 0; stringify_i < 256; ++stringify_i) {\n  byteToHex.push((stringify_i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \'-\' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \'-\' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \'-\' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \'-\' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it\'s likely due to one\n  // of the following:\n  // - One or more input array values don\'t map to a hex octet (leading to\n  // "undefined" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!esm_browser_validate(uuid)) {\n    throw TypeError(\'Stringified UUID is invalid\');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ var esm_browser_stringify = (stringify);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_stringify(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/guards.ts\nfunction isComponentInstance(Class, comp) {\n  if (!comp) {\n    return false;\n  }\n\n  if (!(comp instanceof Class)) {\n    return false;\n  }\n\n  return true;\n}\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n// CT is a Union, like `type = FirstComponent | SecondComponent`.\nclass ComponentCollection_ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.constructor.name, component);\n    });\n\n    _defineProperty(this, "update", (cl, func) => {\n      const c = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, c)) {\n        const updatedComponent = func(c);\n        this.components.set(cl.name, updatedComponent);\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      this.components.delete(cType.name);\n    });\n\n    _defineProperty(this, "get", cl => {\n      const comp = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, comp)) {\n        return comp;\n      } else {\n        throw new Error(`ComponentCollection does not have component of type ${cl.name}`);\n      }\n    });\n\n    _defineProperty(this, "has", cType => {\n      return Array.isArray(cType) ? cType.every(ct => this.components.has(ct.name) === true) : this.components.has(cType.name);\n    });\n\n    _defineProperty(this, "hasByName", cName => {\n      return Array.isArray(cName) ? cName.every(ct => this.components.has(ct) === true) : this.components.has(cName);\n    });\n  }\n\n  /**\n   * Get the component type names that are currently being used in the collection.\n   */\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n  /**\n   * Get the current number of components that are in the collection.\n   */\n\n\n  get size() {\n    return this.components.size;\n  }\n\n  toDevComponents() {\n    const obj = {};\n\n    for (const [compName, comp] of this.components) {\n      obj[compName] = comp;\n    }\n\n    return obj;\n  }\n\n}\n// CONCATENATED MODULE: ./src/DevEntity.ts\nfunction DevEntity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass DevEntity {\n  constructor(entity, world) {\n    DevEntity_defineProperty(this, "id", void 0);\n\n    DevEntity_defineProperty(this, "components", void 0);\n\n    DevEntity_defineProperty(this, "tags", void 0);\n\n    DevEntity_defineProperty(this, "systems", []);\n\n    DevEntity_defineProperty(this, "state", void 0);\n\n    this.id = entity.id;\n    this.components = entity.components.toDevComponents(), this.tags = [...entity.tags];\n    this.state = entity.state;\n    const compNames = Object.keys(this.components);\n\n    for (const [systemName, cNames] of world.systems.compNamesBySystemName) {\n      if (cNames.every(cName => compNames.includes(cName))) {\n        this.systems.push(systemName);\n      }\n    }\n  }\n\n  toTableRow() {\n    return {\n      id: this.id,\n      components: Object.keys(this.components).join(", "),\n      tags: this.tags.join(", "),\n      systems: this.systems.join(\', \')\n    };\n  }\n\n}\n\n/* harmony default export */ var src_DevEntity = (DevEntity);\n// CONCATENATED MODULE: ./src/SimpleFSM.ts\nfunction SimpleFSM_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass SimpleFSM {\n  constructor(initialState, transitions) {\n    SimpleFSM_defineProperty(this, "current", void 0);\n\n    SimpleFSM_defineProperty(this, "inital", void 0);\n\n    SimpleFSM_defineProperty(this, "transitions", void 0);\n\n    this.inital = initialState;\n    this.current = initialState;\n    this.transitions = transitions;\n  }\n\n  next(data) {\n    if (this.transitions[this.current]) {\n      this.current = this.transitions[this.current](data, this.current);\n    }\n  }\n\n  reset() {\n    this.current = this.inital;\n  }\n\n  is(checkState) {\n    return this.current === checkState;\n  }\n\n}\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nclass Entity_Entity {\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n\n  get state() {\n    return this._state.current;\n  }\n\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    Entity_defineProperty(this, "_error", void 0);\n\n    Entity_defineProperty(this, "_state", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    this._error = null;\n\n    const fsmTransition = ns => {\n      if (ns === "error" || this._error) return "error";\n      return ns;\n    };\n\n    this._state = new SimpleFSM("creating", {\n      creating: fsmTransition,\n      created: fsmTransition,\n      destroying: fsmTransition,\n      destroyed: () => "destroyed",\n      error: () => "error"\n    });\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n\n    if (this._world.systems.compNamesBySystemName.size === 0) {\n      this._state.next(\'created\');\n    }\n  }\n  /* LifeCycle methods, meant to be overridden */\n\n\n  onCreate(world) {// abstract\n  }\n\n  onDestroy(world) {// abstract\n  }\n\n  onComponentAdd(args) {// abstract\n  }\n\n  onTrackedComponentUpdate(args) {// abstract\n  }\n\n  onComponentRemove(args) {// abstract\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.add(this._id, component);\n\n    return this;\n  }\n  /**\n   * Add a tag to a component\n   */\n\n\n  addTag(tag) {\n    const entitySet = this._world.entitiesByTags.has(tag) ? this._world.entitiesByTags.get(tag) : new Set();\n\n    if (entitySet) {\n      entitySet.add(this._id);\n\n      this._world.entitiesByTags.set(tag, entitySet);\n    }\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Check to see if an entity tagged with a given tag.\n   */\n\n\n  hasTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        return entitySet.has(this._id);\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cl) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    const component = cc.get(cl);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n  /**\n   * Remove a component from an entity.\n   * @param cType A component class, eg MyComponent\n   */\n\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /**\n   * Remove a tag from an entity\n   */\n\n\n  removeTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        entitySet.delete(this._id);\n\n        if (entitySet.size === 0) {\n          this._world.entitiesByTags.delete(tag);\n        }\n      }\n    }\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n  /**\n   * Remove all tags on an entity\n   */\n\n\n  clearTags() {\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      entitySet.delete(this._id);\n\n      if (entitySet.size === 0) {\n        this._world.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Sets the state of the entity to \'created\'. that\'s it.\n   */\n\n\n  finishCreation() {\n    this._state.next(\'created\');\n  }\n  /**\n   * Destroy an entity. Actual destruction is deferred until after the next pass of systems.\n   * This gives the systems a chance to do any cleanup that might be needed.\n   */\n\n\n  destroy() {\n    // If no systems are added, the destroy immediately.\n    if (this._world.systems.compNamesBySystemName.size === 0) {\n      this.destroyImmediately();\n      return;\n    } // Mark as "destroying" so that systems can act on it before actually being destroyed.\n\n\n    this._state.next(\'destroying\');\n  }\n\n  destroyImmediately() {\n    // Right now calling before the actual destorying of the entity.\n    // Might want to change this to post destruction in the future, who knows.\n    this.onDestroy(this._world); // Actually destroy entity.\n\n    this._world.destroyEntity(this._id); // should return an error??\n\n\n    this._state.next(\'destroyed\');\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n  /**\n   * Retrieves all the tags that have been added to this entity.\n   */\n\n\n  get tags() {\n    const tags = new Set();\n\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      if (entitySet.has(this._id)) {\n        tags.add(tag);\n      }\n    }\n\n    return tags;\n  }\n  /**\n   * Convert Entity to a DevEntity. Very helpful in for debugging.\n   */\n\n\n  toDevEntity() {\n    return new src_DevEntity(this, this._world);\n  }\n\n}\n// CONCATENATED MODULE: ./src/DevTools.ts\nfunction DevTools_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass DevTools {\n  constructor(world) {\n    DevTools_defineProperty(this, "world", void 0);\n\n    this.world = world;\n  }\n  /**\n   * display the all systems of the world, and the components required by each system.\n   * Super helpful to use with console.table()\n   * @example\n   * ```\n   * console.table(world.dev.systemComponents);\n   * ```\n   */\n\n\n  get systemComponents() {\n    const compsBySystems = [];\n\n    for (const [system, compNames] of this.world.systems.compNamesBySystemName) {\n      compsBySystems.push({\n        system,\n        components: compNames.join(", ")\n      });\n    }\n\n    return compsBySystems;\n  }\n  /**\n   * Create an array of DevEntites. Can be very helpful for things like inspecting component state,\n   * and which systems will be called on an entity.\n   * @example\n   * ```\n   * console.table(world.dev.entities);\n   *\n   * // Pro tip! try displaying a table of entities with console.table and DevEntity.toTableRow().\n   * console.table(world.dev.entities.map(devEntity => devEntity.toTableRow()));\n   * ```\n   */\n\n\n  get entities() {\n    return [...this.world.entities.values()].map(e => e.toDevEntity());\n  }\n\n}\n\n/* harmony default export */ var src_DevTools = (DevTools);\n// CONCATENATED MODULE: ./src/Systems.ts\nfunction Systems_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n/**\n * Arguments that are passed into a System function on each iteration.\n * This is how you acces things like the entity that particular entity to act on,\n * as well as some other helpful params like if the entity is the first or last entity\n * in the group of entities that being iterated over.\n */\n\nclass Systems_Systems {\n  // double check to make sure that maps are ordered.\n  constructor(world) {\n    Systems_defineProperty(this, "world", void 0);\n\n    Systems_defineProperty(this, "systemFuncBySystemName", void 0);\n\n    Systems_defineProperty(this, "compNamesBySystemName", void 0);\n\n    this.world = world;\n    this.systemFuncBySystemName = new Map();\n    this.compNamesBySystemName = new Map();\n  }\n\n  add(cTypes, systemFunc, funcName) {\n    const cNames = cTypes.map(ct => ct.name);\n    let name = systemFunc.name;\n\n    if (systemFunc.name === "") {\n      // Super brute force, and might lead to errors in the future, but for now\n      // using the stringified system function if the function doesn\'t already have a name.\n      // This is useful for anonymous functions used as a system function.\n      // Might be good to figure out how to get a hash of the function string.\n      name = systemFunc.toString().slice(0, 30);\n    }\n\n    if (funcName) {\n      name = funcName;\n    }\n\n    this.systemFuncBySystemName.set(name, systemFunc);\n    this.compNamesBySystemName.set(name, cNames);\n    this.world.entitiesByCTypes.set(cNames, new Set());\n    return this;\n  }\n\n  run() {\n    const size = this.world.entitiesByCTypes.size;\n    const entitiesInCreatingState = [];\n    const entitiesInDestroyingState = [];\n\n    for (const entity of this.world.entities.values()) {\n      if (entity.state === "creating") {\n        entitiesInCreatingState.push(entity);\n      }\n\n      if (entity.state === "destroying") {\n        entitiesInDestroyingState.push(entity);\n      }\n    }\n\n    for (const [funcName, systemFunc] of this.systemFuncBySystemName.entries()) {\n      let index = 0;\n      const cNames = this.compNamesBySystemName.get(funcName) || [];\n      const cTypeArrs = this.world.entitiesByCTypes.get(cNames) || new Set();\n\n      for (const eid of cTypeArrs) {\n        const args = {\n          entity: this.world.entities.get(eid) || new Entity_Entity(this.world),\n          components: this.world.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(),\n          world: this.world,\n          index,\n          size,\n          isFirst: index === 0,\n          isLast: index + 1 === size\n        };\n        systemFunc(args);\n        index += 1;\n      }\n    }\n\n    for (const entity of entitiesInCreatingState) {\n      entity.finishCreation();\n    }\n\n    for (const entity of entitiesInDestroyingState) {\n      entity.destroyImmediately();\n    }\n  }\n  /*\n    TODO: Nice to have options here:\n      - systems.activeSystems = new Set(); // if not in set, system doesn\'t run.\n      - systems.deactivateSystem(\'systemName\') // remove system from activeSystems\n      - systems.activateSystem(\'systemName) // adds system back to activeSystems\n      - systems.pause() // pauses running of systems. basically return immediately on run().\n      - systems.resume() // resume running of systems.\n  */\n\n\n}\n// CONCATENATED MODULE: ./src/TrackedComponent.ts\n// Waiting for Typescript 4.2 to come out so that Symbols are supporded keys.\nconst TrackedCompSymbolKeys = {\n  isTracked: Symbol.for("ecs.trackedComponent.isTracked"),\n  world: Symbol.for("ecs.trackedComponent.world"),\n  entityIDs: Symbol.for("ecs.trackedComponent.entityIDs"),\n  getEntities: Symbol.for("ecs.trackedComponent.getEntities"),\n  setWorld: Symbol.for("ecs.trackedComponent.setWorld"),\n  onAdd: Symbol.for("ecs.trackedComponent.onAdd"),\n  onUpdate: Symbol.for("ecs.trackedComponent.onUpdate"),\n  onRemove: Symbol.for("ecs.trackedComponent.onRemove")\n}; //@ts-ignore\n\n// NOTE: Really need to get symbols working as keys in Typescript.\n//       Until then will have to cast to keyof CT.\n// https://stackoverflow.com/questions/54324323/typescript-type-string-is-not-assignable-to-type-keyof\n// https://github.com/microsoft/TypeScript/pull/26797\nfunction createClassInstanceProxyHandlers(trackedEventHandlers) {\n  const updatedProps = new Set();\n  return {\n    set(component, property, value) {\n      updatedProps.add(property); //@ts-ignore\n\n      const world = component[TrackedCompSymbolKeys.world];\n      const previousVal = component[property];\n      component[property] = value; //@ts-ignore\n\n      const entities = component[TrackedCompSymbolKeys.getEntities](world);\n\n      for (const entity of entities.values()) {\n        entity.onTrackedComponentUpdate({\n          world,\n          component\n        });\n      }\n\n      if (trackedEventHandlers.onUpdate) {\n        trackedEventHandlers.onUpdate({\n          entities,\n          world,\n          component,\n          previousVal,\n          property: property\n        });\n      }\n\n      return true;\n    }\n\n  };\n}\n\nfunction trackComponent(CompClass, trackedEventHandlers) {\n  return new Proxy(CompClass, {\n    construct(Component, args) {\n      const component = new Component(...args); // For use in identifing a "tracked" class through the proxy.\n      //@ts-ignore\n\n      component[TrackedCompSymbolKeys.isTracked] = true; //@ts-ignore\n\n      component[TrackedCompSymbolKeys.setWorld] = world => {\n        //@ts-ignore\n        component[TrackedCompSymbolKeys.world] = world;\n      }; // Holds entities that this component has been added to.\n      // Added and removed in world.add()/world.remove().\n      //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.entityIDs] = new Set(); // Helper function to get the Entities from entityIDs\n      //@ts-ignore\n\n      component[TrackedCompSymbolKeys.getEntities] = world => {\n        const entities = new Map(); //@ts-ignore\n\n        for (const eid of component[TrackedCompSymbolKeys.entityIDs]) {\n          const entity = world.entities.get(eid);\n\n          if (entity) {\n            entities.set(eid, entity);\n          }\n        }\n\n        return entities;\n      }; //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.onAdd] = (world, entity) => {\n        if (trackedEventHandlers.onAdd) {\n          //@ts-ignore\n          const entities = component[TrackedCompSymbolKeys.getEntities](world);\n          trackedEventHandlers.onAdd({\n            component,\n            world,\n            entity,\n            entities\n          });\n        }\n      }; //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.onRemove] = (world, entity) => {\n        if (trackedEventHandlers.onRemove) {\n          //@ts-ignore\n          const entities = component[TrackedCompSymbolKeys.getEntities](world);\n          trackedEventHandlers.onRemove({\n            component,\n            world,\n            entity,\n            entities\n          });\n        }\n      };\n\n      return new Proxy(component, createClassInstanceProxyHandlers(trackedEventHandlers));\n    }\n\n  });\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "entitiesByTags", new Map());\n\n    World_defineProperty(this, "systems", void 0);\n\n    World_defineProperty(this, "dev", void 0);\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cl => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cl)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cl => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cl)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cl => {\n      const entity = this.locate(cl);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cl, predicate) => {\n      const entities = this.locateAll(cl); // const entities = this.locateAll((cl as unknown) as CT);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cl => {\n      const entities = this.locateAll(cl);\n      return entities.map(entity => {\n        return {\n          entity,\n          component: entity.components.get(cl)\n        };\n      });\n    });\n\n    World_defineProperty(this, "get", (eid, cl) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      return cc.get(cl);\n    });\n\n    World_defineProperty(this, "getComponent", (cl, defaultValue) => {\n      const result = this.grab(cl);\n\n      if (!result) {\n        return defaultValue ? defaultValue : null;\n      }\n\n      return result.component;\n    });\n\n    World_defineProperty(this, "getTagged", tag => {\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        const entityId = tagEntityIds.values().next().value;\n        const entity = this.entities.get(entityId);\n\n        if (entity) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "getAllTagged", tag => {\n      let entities = []; // eslint-disable-line\n\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        for (const entityId of tagEntityIds) {\n          const entity = this.entities.get(entityId);\n\n          if (entity) {\n            entities.push(entity);\n          }\n        }\n      }\n\n      return entities;\n    });\n\n    World_defineProperty(this, "add", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      const entity = this.entities.get(eid);\n\n      if (!entity) {\n        throw new Error(`world.add: Unable to locate entity with id ${eid}`);\n      }\n\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      } // @ts-ignore\n\n\n      if (component[TrackedCompSymbolKeys.isTracked]) {\n        // @ts-ignore\n        component[TrackedCompSymbolKeys.setWorld](this); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.entityIDs].add(eid); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.onAdd](this, entity);\n      }\n\n      entity.onComponentAdd({\n        world: this,\n        component\n      });\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(); // need to get component instance...\n\n      const component = cc.get(cType); // @ts-ignore\n\n      if (component[TrackedCompSymbolKeys.isTracked]) {\n        const entity = this.entities.get(eid);\n\n        if (!entity) {\n          throw new Error(`world.remove: Unable to locate entity. eid: ${eid}, cType: ${cType.name}`);\n        } // @ts-ignore\n\n\n        component[TrackedCompSymbolKeys.entityIDs].delete(eid); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.onRemove](this, entity);\n      } // remove entity from current entitiesByCTypes\n\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      }\n\n      const entity = this.entities.get(eid);\n\n      if (entity) {\n        entity.onComponentRemove({\n          world: this,\n          component\n        });\n      }\n\n      return this;\n    });\n\n    this.dev = new src_DevTools(this);\n    this.systems = new Systems_Systems(this);\n  }\n  /**\n   * "finds" a single entity based on a predicate\n   */\n\n\n  /**\n   * Method for adding systems.\n   */\n  addSystem(cTypes, systemFunc, funcName) {\n    this.systems.add(cTypes, systemFunc, funcName);\n    return this;\n  }\n  /**\n   * Setup an entity to exist in the given world. This is mostly an internal method, but exposed just in case.\n   */\n\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection_ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    entity.onCreate(this);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(entityId) {\n    this.componentCollections.set(entityId, new ComponentCollection_ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Create an entity that is in the world.\n   * Basically just new Entity(world), but saves an import of Entity.\n   */\n\n\n  createEntity() {\n    const entity = new Entity_Entity(this);\n    return entity; // Register entity here....\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(entityId) {\n    this.componentCollections.delete(entityId);\n    const entity = this.entities.get(entityId);\n\n    if (!entity) {\n      throw new Error(`world.destroyEntity: No entity found. entity id: ${entityId}`);\n    }\n\n    this.entities.delete(entityId);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n    } // remove any tag associations with destroyed entities.\n\n\n    for (const [tag, entitySet] of this.entitiesByTags) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n\n      if (entitySet.size === 0) {\n        this.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n  /*\n  TODO: world.destroy() and world.destroyImmediately() methods.\n  */\n\n\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzPzQwZDYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3ZhbGlkYXRlLmpzPzA2ZTQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcz81OGNmIiwid2VicGFjazovL2Vjc3RhdGljLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcz9lYzI2Iiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL2d1YXJkcy50cz8zYjU3Iiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL0NvbXBvbmVudENvbGxlY3Rpb24udHM/NTFjNCIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9EZXZFbnRpdHkudHM/ZDE0MiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9TaW1wbGVGU00udHM/NDY5OSIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9FbnRpdHkudHM/YWM2OCIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9EZXZUb29scy50cz9lMDFhIiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL1N5c3RlbXMudHM/YTYxMyIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9UcmFja2VkQ29tcG9uZW50LnRzP2JhMjciLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9pbmRleC50cz9mZmI0Il0sIm5hbWVzIjpbImlzQ29tcG9uZW50SW5zdGFuY2UiLCJDbGFzcyIsImNvbXAiLCJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsImNvbnN0cnVjdG9yIiwibmFtZSIsImNsIiwiZnVuYyIsImMiLCJnZXQiLCJ1cGRhdGVkQ29tcG9uZW50IiwiY1R5cGUiLCJkZWxldGUiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5IiwiY3QiLCJoYXMiLCJjTmFtZSIsImNvbXBvbmVudFR5cGVzIiwia2V5cyIsInNpemUiLCJ0b0RldkNvbXBvbmVudHMiLCJvYmoiLCJjb21wTmFtZSIsIkRldkVudGl0eSIsImVudGl0eSIsIndvcmxkIiwiaWQiLCJ0YWdzIiwic3RhdGUiLCJjb21wTmFtZXMiLCJPYmplY3QiLCJzeXN0ZW1OYW1lIiwiY05hbWVzIiwic3lzdGVtcyIsImNvbXBOYW1lc0J5U3lzdGVtTmFtZSIsImluY2x1ZGVzIiwicHVzaCIsInRvVGFibGVSb3ciLCJqb2luIiwiU2ltcGxlRlNNIiwiaW5pdGlhbFN0YXRlIiwidHJhbnNpdGlvbnMiLCJpbml0YWwiLCJjdXJyZW50IiwibmV4dCIsImRhdGEiLCJyZXNldCIsImlzIiwiY2hlY2tTdGF0ZSIsIkVudGl0eSIsIl9pZCIsIl93b3JsZCIsIl9zdGF0ZSIsInV1aWR2NCIsIl9lcnJvciIsImZzbVRyYW5zaXRpb24iLCJucyIsImNyZWF0aW5nIiwiY3JlYXRlZCIsImRlc3Ryb3lpbmciLCJkZXN0cm95ZWQiLCJlcnJvciIsInJlZ2lzdGVyRW50aXR5Iiwib25DcmVhdGUiLCJvbkRlc3Ryb3kiLCJvbkNvbXBvbmVudEFkZCIsImFyZ3MiLCJvblRyYWNrZWRDb21wb25lbnRVcGRhdGUiLCJvbkNvbXBvbmVudFJlbW92ZSIsImFkZCIsImFkZFRhZyIsInRhZyIsImVudGl0eVNldCIsImVudGl0aWVzQnlUYWdzIiwiU2V0IiwiY2MiLCJjb21wb25lbnRDb2xsZWN0aW9ucyIsImhhc1RhZyIsImdldEFsbCIsInJlbW92ZSIsInJlbW92ZVRhZyIsImNsZWFyIiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiY2xlYXJUYWdzIiwiZW50cmllcyIsImZpbmlzaENyZWF0aW9uIiwiZGVzdHJveSIsImRlc3Ryb3lJbW1lZGlhdGVseSIsImRlc3Ryb3lFbnRpdHkiLCJ0b0RldkVudGl0eSIsIkRldlRvb2xzIiwic3lzdGVtQ29tcG9uZW50cyIsImNvbXBzQnlTeXN0ZW1zIiwic3lzdGVtIiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiU3lzdGVtcyIsInN5c3RlbUZ1bmNCeVN5c3RlbU5hbWUiLCJjVHlwZXMiLCJzeXN0ZW1GdW5jIiwiZnVuY05hbWUiLCJ0b1N0cmluZyIsInNsaWNlIiwiZW50aXRpZXNCeUNUeXBlcyIsInJ1biIsImVudGl0aWVzSW5DcmVhdGluZ1N0YXRlIiwiZW50aXRpZXNJbkRlc3Ryb3lpbmdTdGF0ZSIsImluZGV4IiwiY1R5cGVBcnJzIiwiZWlkIiwiaXNGaXJzdCIsImlzTGFzdCIsIlRyYWNrZWRDb21wU3ltYm9sS2V5cyIsImlzVHJhY2tlZCIsIlN5bWJvbCIsImZvciIsImVudGl0eUlEcyIsImdldEVudGl0aWVzIiwic2V0V29ybGQiLCJvbkFkZCIsIm9uVXBkYXRlIiwib25SZW1vdmUiLCJjcmVhdGVDbGFzc0luc3RhbmNlUHJveHlIYW5kbGVycyIsInRyYWNrZWRFdmVudEhhbmRsZXJzIiwidXBkYXRlZFByb3BzIiwicHJvcGVydHkiLCJ2YWx1ZSIsInByZXZpb3VzVmFsIiwidHJhY2tDb21wb25lbnQiLCJDb21wQ2xhc3MiLCJQcm94eSIsImNvbnN0cnVjdCIsIkNvbXBvbmVudCIsIldvcmxkIiwicHJlZGljYXRlIiwicmVzdWx0cyIsImxvY2F0ZSIsImxvY2F0ZUFsbCIsImRlZmF1bHRWYWx1ZSIsInJlc3VsdCIsImdyYWIiLCJ0YWdFbnRpdHlJZHMiLCJlbnRpdHlJZCIsImN0QXJyIiwiaGFzQnlOYW1lIiwiZGV2IiwiYWRkU3lzdGVtIiwiY3JlYXRlRW50aXR5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNB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Q0FBQ3pELEdBQVYsQ0FBY2lJLFFBQWQsQ0FBSixFQUE2QjtBQUMzQnhFLGlCQUFTLENBQUMvRCxNQUFWLENBQWlCdUksUUFBakI7QUFDRDtBQUNGLEtBZDBDLENBZ0IzQzs7O0FBQ0EsU0FBSyxNQUFNLENBQUN6RSxHQUFELEVBQU1DLFNBQU4sQ0FBWCxJQUErQixLQUFLQyxjQUFwQyxFQUFvRDtBQUNsRCxVQUFJRCxTQUFTLENBQUN6RCxHQUFWLENBQWNpSSxRQUFkLENBQUosRUFBNkI7QUFDM0J4RSxpQkFBUyxDQUFDL0QsTUFBVixDQUFpQnVJLFFBQWpCO0FBQ0Q7O0FBRUQsVUFBSXhFLFNBQVMsQ0FBQ3JELElBQVYsS0FBbUIsQ0FBdkIsRUFBMEI7QUFDeEIsYUFBS3NELGNBQUwsQ0FBb0JoRSxNQUFwQixDQUEyQjhELEdBQTNCO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLElBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7O0FBN1krQixDOztBQ1YvQjtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxudmFyIGdldFJhbmRvbVZhbHVlcztcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLiBBbHNvLFxuICAgIC8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcG9uZW50SW5zdGFuY2U8VD4oXG4gIENsYXNzOiBuZXcgKC4uLmFyZ3M6IGFueSkgPT4gVCxcbiAgY29tcDogYW55XG4pOiBjb21wIGlzIEluc3RhbmNlVHlwZTx0eXBlb2YgQ2xhc3M+IHtcbiAgaWYgKCFjb21wKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCEoY29tcCBpbnN0YW5jZW9mIENsYXNzKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIiwiaW1wb3J0IHsgaXNDb21wb25lbnRJbnN0YW5jZSB9IGZyb20gXCIuL2d1YXJkc1wiO1xuXG50eXBlIENvbXBOYW1lID0gc3RyaW5nO1xudHlwZSBDbGFzc0NvbnN0cnVjdG9yPFQ+ID0geyBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVCB9O1xuXG4vLyBDVCBpcyBhIFVuaW9uLCBsaWtlIGB0eXBlID0gRmlyc3RDb21wb25lbnQgfCBTZWNvbmRDb21wb25lbnRgLlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICBjb21wb25lbnRzOiBNYXA8Q29tcE5hbWUsIENUPiA9IG5ldyBNYXAoKTtcblxuICAvLyBpbnN0YW5jZSBvZiBhIGNvbXBvbmVudFxuICBhZGQgPSAoY29tcG9uZW50OiBDVCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5zZXQoKDxhbnk+Y29tcG9uZW50KS5jb25zdHJ1Y3Rvci5uYW1lLCBjb21wb25lbnQpO1xuICB9O1xuXG4gIHVwZGF0ZSA9IDxUIGV4dGVuZHMgQ1Q+KGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+LCBmdW5jOiAoYzogVCkgPT4gVCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbXBvbmVudHMuZ2V0KGNsLm5hbWUpO1xuXG4gICAgaWYgKGlzQ29tcG9uZW50SW5zdGFuY2UoY2wsIGMpKSB7XG4gICAgICBjb25zdCB1cGRhdGVkQ29tcG9uZW50ID0gZnVuYyhjKTtcbiAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY2wubmFtZSwgdXBkYXRlZENvbXBvbmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjb21wb25lbnQuXG4gICAqIEBwYXJhbSBjVHlwZSBDbGFzcyBvZiBjb21wb25lbnQgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcmVtb3ZlID0gKGNUeXBlOiBDbGFzc0NvbnN0cnVjdG9yPENUPik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY1R5cGUubmFtZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhIGNvbXBvbmVudCB0aGF0IG1hdGNoZXMgdGhlIHBhc3NlZCBjbGFzcy5cbiAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBpZiBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gY29tcG9uZW50XG4gICAqIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIHNvIGlmIHlvdSBkb24ndCBrbm93IGlmIGl0J3Mgc2FmZVxuICAgKiB0byBnZXQgYSBjb21wb25lbnQsIHlvdSBzaG91bGQgdGVzdCB3aXRoIGhhcygpIG9yIGhhc0J5TmFtZSgpIGZpcnN0LlxuICAgKiBZb3UgaGF2ZSBiZWVuIHdhcm5lZC5cbiAgICogQHBhcmFtIGNsIGNvbXBvbmVudCBDbGFzcyByZWZlcmVuY2UuXG4gICAqL1xuICBnZXQgPSA8VCBleHRlbmRzIENUPihjbDogQ2xhc3NDb25zdHJ1Y3RvcjxUPik6IFQgPT4ge1xuICAgIGNvbnN0IGNvbXAgPSB0aGlzLmNvbXBvbmVudHMuZ2V0KGNsLm5hbWUpO1xuXG4gICAgaWYgKGlzQ29tcG9uZW50SW5zdGFuY2U8VD4oY2wsIGNvbXApKSB7XG4gICAgICByZXR1cm4gY29tcDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ29tcG9uZW50Q29sbGVjdGlvbiBkb2VzIG5vdCBoYXZlIGNvbXBvbmVudCBvZiB0eXBlICR7Y2wubmFtZX1gXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVGVzdCB0byBzZWUgaWYgdGhlIGNvbGxlY3Rpb24gY29udGFpbnMgYSBzcGVjaWZpYyBDbGFzcyBvciBDbGFzc2VzLlxuICAgKiBAcGFyYW0gY1R5cGUgY29tcG9uZW50IENsYXNzLCBvciBhcnJheSBvZiBjb21wb25lbnQgQ2xhc3Nlcy5cbiAgICovXG4gIGhhcyA9IChjVHlwZTogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4gfCBDbGFzc0NvbnN0cnVjdG9yPENUPltdKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY1R5cGUpXG4gICAgICA/IGNUeXBlLmV2ZXJ5KChjdCkgPT4gdGhpcy5jb21wb25lbnRzLmhhcyhjdC5uYW1lKSA9PT0gdHJ1ZSlcbiAgICAgIDogdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZS5uYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCB0byBzZWUgaWYgdGhlIGNvbGxlY3Rpb24gaGFzIGEgY29tcG9uZW50IGluc3RhbmNlIGJhc2VkIG9uIGFcbiAgICogY2xhc3MgbmFtZS4gU29tZSBidWlsZCBzdGVwcy9taW5pZmllcnMgd2lsbCBjaGFuZ2UgdGhlIG5hbWUgb2YgQ2xhc3NlcyxcbiAgICogc28gaXQncyB1c3VhbGx5IGJlc3QgdG8gcGFzcyBpbiBhIE15Q2xhc3MubmFtZSBpbnN0ZWFkIG9mICdNeUNsYXNzJy5cbiAgICogQHBhcmFtIGNOYW1lIFRoZSBuYW1lIG9mIGEgQ2xhc3MsIG9yIGFycmF5IG9mIENsYXNzIG5hbWVzLlxuICAgKi9cbiAgaGFzQnlOYW1lID0gKGNOYW1lOiBzdHJpbmcgfCBzdHJpbmdbXSk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGNOYW1lKVxuICAgICAgPyBjTmFtZS5ldmVyeSgoY3QpID0+IHRoaXMuY29tcG9uZW50cy5oYXMoY3QpID09PSB0cnVlKVxuICAgICAgOiB0aGlzLmNvbXBvbmVudHMuaGFzKGNOYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb21wb25lbnQgdHlwZSBuYW1lcyB0aGF0IGFyZSBjdXJyZW50bHkgYmVpbmcgdXNlZCBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICovXG4gIGdldCBjb21wb25lbnRUeXBlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmNvbXBvbmVudHMua2V5cygpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGNvbXBvbmVudHMgdGhhdCBhcmUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqL1xuICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuc2l6ZTtcbiAgfVxuXG4gIHRvRGV2Q29tcG9uZW50cygpOiBSZWNvcmQ8c3RyaW5nLCBDVD4ge1xuICAgIGNvbnN0IG9iajogUmVjb3JkPHN0cmluZywgQ1Q+ID0ge307XG4gICAgZm9yIChjb25zdCBbY29tcE5hbWUsIGNvbXBdIG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgb2JqW2NvbXBOYW1lXSA9IGNvbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfVxufVxuIiwiaW1wb3J0IFdvcmxkIGZyb20gXCIuL1dvcmxkXCI7XG5pbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eVwiO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSBcIi4vVGFnXCI7XG5pbXBvcnQgeyBFbnRpdHlTdGF0ZSB9IGZyb20gXCJlY3N0YXRpY1wiO1xuXG5pbnRlcmZhY2UgRGV2RW50aXR5VGFibGVSb3cge1xuICBpZDogc3RyaW5nO1xuICBjb21wb25lbnRzOiBzdHJpbmc7XG4gIHRhZ3M6IHN0cmluZztcbiAgc3lzdGVtczogc3RyaW5nO1xufVxuXG5jbGFzcyBEZXZFbnRpdHk8Q1Q+IHtcbiAgaWQ6IHN0cmluZztcblxuICBjb21wb25lbnRzOiBSZWNvcmQ8c3RyaW5nLCBDVD47XG5cbiAgdGFnczogVGFnW107XG5cbiAgc3lzdGVtczogc3RyaW5nW10gPSBbXTtcblxuICBzdGF0ZTogRW50aXR5U3RhdGU7XG5cbiAgY29uc3RydWN0b3IoZW50aXR5OiBFbnRpdHk8Q1Q+LCB3b3JsZDogV29ybGQ8Q1Q+KSB7XG4gICAgdGhpcy5pZCA9IGVudGl0eS5pZDtcbiAgICB0aGlzLmNvbXBvbmVudHMgPSBlbnRpdHkuY29tcG9uZW50cy50b0RldkNvbXBvbmVudHMoKSxcbiAgICB0aGlzLnRhZ3MgPSBbLi4uZW50aXR5LnRhZ3NdO1xuICAgIHRoaXMuc3RhdGUgPSBlbnRpdHkuc3RhdGU7XG5cbiAgICBjb25zdCBjb21wTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudHMpO1xuXG4gICAgZm9yIChjb25zdCBbc3lzdGVtTmFtZSwgY05hbWVzXSBvZiB3b3JsZC5zeXN0ZW1zLmNvbXBOYW1lc0J5U3lzdGVtTmFtZSkge1xuICAgICAgaWYgKGNOYW1lcy5ldmVyeSgoY05hbWUpID0+IGNvbXBOYW1lcy5pbmNsdWRlcyhjTmFtZSkpKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKHN5c3RlbU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvVGFibGVSb3coKTogRGV2RW50aXR5VGFibGVSb3cge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIGNvbXBvbmVudHM6IE9iamVjdC5rZXlzKHRoaXMuY29tcG9uZW50cykuam9pbihcIiwgXCIpLFxuICAgICAgdGFnczogdGhpcy50YWdzLmpvaW4oXCIsIFwiKSxcbiAgICAgIHN5c3RlbXM6IHRoaXMuc3lzdGVtcy5qb2luKCcsICcpLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGV2RW50aXR5O1xuIiwiZXhwb3J0IHR5cGUgU3RhdGUgPSBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2w7XG5cbmV4cG9ydCB0eXBlIFRyYW5zaXRpb25zPFMgZXh0ZW5kcyBTdGF0ZSwgRCA9IHVuZGVmaW5lZD4gPSBSZWNvcmQ8XG4gIFMsXG4gIChkYXRhOiBELCBjdXJyZW50OiBTKSA9PiBTXG4+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW1wbGVGU008UyBleHRlbmRzIFN0YXRlLCBEID0gdW5kZWZpbmVkPiB7XG4gIGN1cnJlbnQ6IFM7XG5cbiAgaW5pdGFsOiBTO1xuXG4gIHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uczxTLCBEPjtcblxuICBjb25zdHJ1Y3Rvcihpbml0aWFsU3RhdGU6IFMsIHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uczxTLCBEPikge1xuICAgIHRoaXMuaW5pdGFsID0gaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuY3VycmVudCA9IGluaXRpYWxTdGF0ZTtcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gdHJhbnNpdGlvbnM7XG4gIH1cblxuICBuZXh0KGRhdGE6IEQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uc1t0aGlzLmN1cnJlbnRdKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnRyYW5zaXRpb25zW3RoaXMuY3VycmVudF0oZGF0YSwgdGhpcy5jdXJyZW50KTtcbiAgICB9XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmluaXRhbDtcbiAgfVxuXG4gIGlzKGNoZWNrU3RhdGU6IFMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50ID09PSBjaGVja1N0YXRlO1xuICB9XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IFdvcmxkLCB7IENsYXNzQ29uc3RydWN0b3IgfSBmcm9tIFwiLi9Xb3JsZFwiO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSBcIi4vQ29tcG9uZW50Q29sbGVjdGlvblwiO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSBcIi4vVGFnXCI7XG5pbXBvcnQgRGV2RW50aXR5IGZyb20gXCIuL0RldkVudGl0eVwiO1xuXG5pbXBvcnQgU2ltcGxlRlNNIGZyb20gXCIuL1NpbXBsZUZTTVwiO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxuZXhwb3J0IHR5cGUgRW50aXR5U3RhdGUgPVxuICB8IFwiY3JlYXRpbmdcIlxuICB8IFwiY3JlYXRlZFwiXG4gIHwgXCJkZXN0cm95aW5nXCJcbiAgfCBcImRlc3Ryb3llZFwiXG4gIHwgXCJlcnJvclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVudGl0eUNvbXBFdmVudEFyZ3M8Q1Q+IHtcbiAgd29ybGQ6IFdvcmxkPENUPjtcbiAgY29tcG9uZW50OiBDVDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5PENUPiB7XG4gIHByaXZhdGUgX2lkOiBzdHJpbmc7XG4gIHByaXZhdGUgX3dvcmxkOiBXb3JsZDxDVD47XG5cbiAgcHJpdmF0ZSBfZXJyb3I6IEVycm9yIHwgbnVsbDtcblxuICBwcml2YXRlIF9zdGF0ZTogU2ltcGxlRlNNPEVudGl0eVN0YXRlLCBFbnRpdHlTdGF0ZT47XG5cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgZ2V0IHdvcmxkKCk6IFdvcmxkPENUPiB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkO1xuICB9XG5cbiAgZ2V0IHN0YXRlKCk6IEVudGl0eVN0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGUuY3VycmVudDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZDxDVD4pIHtcbiAgICB0aGlzLl9pZCA9IHV1aWR2NCgpO1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICB0aGlzLl9lcnJvciA9IG51bGw7XG5cbiAgICBjb25zdCBmc21UcmFuc2l0aW9uID0gKFxuICAgICAgbnM6IEVudGl0eVN0YXRlXG4gICAgKTogRW50aXR5U3RhdGUgPT4ge1xuICAgICAgaWYgKG5zID09PSBcImVycm9yXCIgfHwgdGhpcy5fZXJyb3IpIHJldHVybiBcImVycm9yXCI7XG4gICAgICByZXR1cm4gbnM7XG4gICAgfTtcblxuICAgIHRoaXMuX3N0YXRlID0gbmV3IFNpbXBsZUZTTTxFbnRpdHlTdGF0ZSwgRW50aXR5U3RhdGU+KFwiY3JlYXRpbmdcIiwge1xuICAgICAgY3JlYXRpbmc6IGZzbVRyYW5zaXRpb24sXG4gICAgICBjcmVhdGVkOiBmc21UcmFuc2l0aW9uLFxuICAgICAgZGVzdHJveWluZzogZnNtVHJhbnNpdGlvbixcbiAgICAgIGRlc3Ryb3llZDogKCkgPT4gXCJkZXN0cm95ZWRcIixcbiAgICAgIGVycm9yOiAoKSA9PiBcImVycm9yXCIsXG4gICAgfSk7XG5cbiAgICAvKlxuICAgIFJlZ2lzdGVyaW5nIHdpdGggdGhlIFdvcmxkLlxuICAgICovXG4gICAgdGhpcy5fd29ybGQucmVnaXN0ZXJFbnRpdHkodGhpcyk7XG5cbiAgICBpZiAodGhpcy5fd29ybGQuc3lzdGVtcy5jb21wTmFtZXNCeVN5c3RlbU5hbWUuc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5fc3RhdGUubmV4dCgnY3JlYXRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qIExpZmVDeWNsZSBtZXRob2RzLCBtZWFudCB0byBiZSBvdmVycmlkZGVuICovXG5cbiAgb25DcmVhdGUod29ybGQ6IFdvcmxkPENUPik6IHZvaWQge1xuICAgIC8vIGFic3RyYWN0XG4gIH1cblxuICBvbkRlc3Ryb3kod29ybGQ6IFdvcmxkPENUPik6IHZvaWQge1xuICAgIC8vIGFic3RyYWN0XG4gIH1cblxuICBvbkNvbXBvbmVudEFkZChhcmdzOiBFbnRpdHlDb21wRXZlbnRBcmdzPENUPik6IHZvaWQge1xuICAgIC8vIGFic3RyYWN0XG4gIH1cblxuICBvblRyYWNrZWRDb21wb25lbnRVcGRhdGUoYXJnczogRW50aXR5Q29tcEV2ZW50QXJnczxDVD4pOiB2b2lkIHtcbiAgICAvLyBhYnN0cmFjdFxuICB9XG5cbiAgb25Db21wb25lbnRSZW1vdmUoYXJnczogRW50aXR5Q29tcEV2ZW50QXJnczxDVD4pOiB2b2lkIHtcbiAgICAvLyBhYnN0cmFjdFxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCB0byBhbiBFbnRpdHksIGRvaC5cbiAgICovXG4gIGFkZDxUIGV4dGVuZHMgQ1Q+KGNvbXBvbmVudDogVCk6IHRoaXMge1xuICAgIHRoaXMuX3dvcmxkLmFkZCh0aGlzLl9pZCwgY29tcG9uZW50KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRhZyB0byBhIGNvbXBvbmVudFxuICAgKi9cbiAgYWRkVGFnKHRhZzogVGFnKTogdGhpcyB7XG4gICAgY29uc3QgZW50aXR5U2V0ID0gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuaGFzKHRhZylcbiAgICAgID8gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZylcbiAgICAgIDogbmV3IFNldDxFbnRpdHlJZD4oKTtcblxuICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgIGVudGl0eVNldC5hZGQodGhpcy5faWQpO1xuICAgICAgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3Muc2V0KHRhZywgZW50aXR5U2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGFuIGVudGl0eSBoYXMgYSBjb21wb25lbnQgcmVsYXRlZCB0byBpdC5cbiAgICovXG4gIGhhczxUIGV4dGVuZHMgQ1Q+KGNUeXBlOiBDbGFzc0NvbnN0cnVjdG9yPFQ+KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fFxuICAgICAgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICByZXR1cm4gY2MuaGFzKGNUeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgYW4gZW50aXR5IHRhZ2dlZCB3aXRoIGEgZ2l2ZW4gdGFnLlxuICAgKi9cbiAgaGFzVGFnKHRhZzogVGFnKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpKSB7XG4gICAgICBjb25zdCBlbnRpdHlTZXQgPSB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcbiAgICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eVNldC5oYXModGhpcy5faWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjb21wb25lbnQgdGhhdCBiZWxvbmdzIHRvIGFuIGVudGl0eS5cbiAgICovXG4gIGdldDxUIGV4dGVuZHMgQ1Q+KGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+KTogVCB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fFxuICAgICAgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8VD4oY2wpO1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gZW50aXR5LCB2aWEgYSBDb21wb25lbnRDb2xsZWN0aW9uXG4gICAqL1xuICBnZXRBbGwoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8XG4gICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gYW4gZW50aXR5LlxuICAgKiBAcGFyYW0gY1R5cGUgQSBjb21wb25lbnQgY2xhc3MsIGVnIE15Q29tcG9uZW50XG4gICAqL1xuICByZW1vdmUoY1R5cGU6IENsYXNzQ29uc3RydWN0b3I8Q1Q+KTogdGhpcyB7XG4gICAgdGhpcy5fd29ybGQucmVtb3ZlKHRoaXMuX2lkLCBjVHlwZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB0YWcgZnJvbSBhbiBlbnRpdHlcbiAgICovXG4gIHJlbW92ZVRhZyh0YWc6IFRhZyk6IHRoaXMge1xuICAgIGlmICh0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5oYXModGFnKSkge1xuICAgICAgY29uc3QgZW50aXR5U2V0ID0gdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG5cbiAgICAgIGlmIChlbnRpdHlTZXQpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZSh0aGlzLl9pZCk7XG5cbiAgICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQ2xlYXJzIGFsbCBjb21wb25lbnRzIGZyb20gYW4gRW50aXR5ICovXG4gIGNsZWFyKCk6IHRoaXMge1xuICAgIHRoaXMuX3dvcmxkLmNsZWFyRW50aXR5Q29tcG9uZW50cyh0aGlzLl9pZCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHRhZ3Mgb24gYW4gZW50aXR5XG4gICAqL1xuICBjbGVhclRhZ3MoKTogdGhpcyB7XG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmVudHJpZXMoKSkge1xuICAgICAgZW50aXR5U2V0LmRlbGV0ZSh0aGlzLl9pZCk7XG5cbiAgICAgIGlmIChlbnRpdHlTZXQuc2l6ZSA9PT0gMCkge1xuICAgICAgICB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5kZWxldGUodGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgZW50aXR5IHRvICdjcmVhdGVkJy4gdGhhdCdzIGl0LlxuICAgKi9cbiAgZmluaXNoQ3JlYXRpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fc3RhdGUubmV4dCgnY3JlYXRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgYW4gZW50aXR5LiBBY3R1YWwgZGVzdHJ1Y3Rpb24gaXMgZGVmZXJyZWQgdW50aWwgYWZ0ZXIgdGhlIG5leHQgcGFzcyBvZiBzeXN0ZW1zLlxuICAgKiBUaGlzIGdpdmVzIHRoZSBzeXN0ZW1zIGEgY2hhbmNlIHRvIGRvIGFueSBjbGVhbnVwIHRoYXQgbWlnaHQgYmUgbmVlZGVkLlxuICAgKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAvLyBJZiBubyBzeXN0ZW1zIGFyZSBhZGRlZCwgdGhlIGRlc3Ryb3kgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuX3dvcmxkLnN5c3RlbXMuY29tcE5hbWVzQnlTeXN0ZW1OYW1lLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuZGVzdHJveUltbWVkaWF0ZWx5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFyayBhcyBcImRlc3Ryb3lpbmdcIiBzbyB0aGF0IHN5c3RlbXMgY2FuIGFjdCBvbiBpdCBiZWZvcmUgYWN0dWFsbHkgYmVpbmcgZGVzdHJveWVkLlxuICAgIHRoaXMuX3N0YXRlLm5leHQoJ2Rlc3Ryb3lpbmcnKTtcbiAgfVxuXG4gIGRlc3Ryb3lJbW1lZGlhdGVseSgpOiB2b2lkIHtcbiAgICAvLyBSaWdodCBub3cgY2FsbGluZyBiZWZvcmUgdGhlIGFjdHVhbCBkZXN0b3J5aW5nIG9mIHRoZSBlbnRpdHkuXG4gICAgLy8gTWlnaHQgd2FudCB0byBjaGFuZ2UgdGhpcyB0byBwb3N0IGRlc3RydWN0aW9uIGluIHRoZSBmdXR1cmUsIHdobyBrbm93cy5cbiAgICB0aGlzLm9uRGVzdHJveSh0aGlzLl93b3JsZCk7XG5cbiAgICAvLyBBY3R1YWxseSBkZXN0cm95IGVudGl0eS5cbiAgICB0aGlzLl93b3JsZC5kZXN0cm95RW50aXR5KHRoaXMuX2lkKTsgLy8gc2hvdWxkIHJldHVybiBhbiBlcnJvcj8/XG5cbiAgICB0aGlzLl9zdGF0ZS5uZXh0KCdkZXN0cm95ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gZW50aXR5LCB2aWEgYSBDb21wb25lbnRDb2xsZWN0aW9uLlxuICAgKiBEb2VzIHRoZSBzYW1lIHRoaW5nIGFzIGVudGl0eUluc3RhbmNlLmdldEFsbCgpLlxuICAgKi9cbiAgZ2V0IGNvbXBvbmVudHMoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8XG4gICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCB0aGUgdGFncyB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byB0aGlzIGVudGl0eS5cbiAgICovXG4gIGdldCB0YWdzKCk6IFNldDxUYWc+IHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxUYWc+KCk7XG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmVudHJpZXMoKSkge1xuICAgICAgaWYgKGVudGl0eVNldC5oYXModGhpcy5faWQpKSB7XG4gICAgICAgIHRhZ3MuYWRkKHRhZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhZ3M7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBFbnRpdHkgdG8gYSBEZXZFbnRpdHkuIFZlcnkgaGVscGZ1bCBpbiBmb3IgZGVidWdnaW5nLlxuICAgKi9cbiAgdG9EZXZFbnRpdHkoKTogRGV2RW50aXR5PENUPiB7XG4gICAgcmV0dXJuIG5ldyBEZXZFbnRpdHk8Q1Q+KHRoaXMsIHRoaXMuX3dvcmxkKTtcbiAgfVxufVxuIiwiaW1wb3J0IFdvcmxkIGZyb20gJy4vV29ybGQnO1xuaW1wb3J0IERldkVudGl0eSBmcm9tICcuL0RldkVudGl0eSc7XG5cbmludGVyZmFjZSBEZXZTeXN0ZW1Db21wcyB7XG4gIHN5c3RlbTogc3RyaW5nO1xuICBjb21wb25lbnRzOiBzdHJpbmc7XG59XG5cblxuY2xhc3MgRGV2VG9vbHM8Q1Q+IHtcbiAgd29ybGQ6IFdvcmxkPENUPjtcblxuICBjb25zdHJ1Y3Rvcih3b3JsZDogV29ybGQ8Q1Q+KSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICB9XG4gIC8qKlxuICAgKiBkaXNwbGF5IHRoZSBhbGwgc3lzdGVtcyBvZiB0aGUgd29ybGQsIGFuZCB0aGUgY29tcG9uZW50cyByZXF1aXJlZCBieSBlYWNoIHN5c3RlbS5cbiAgICogU3VwZXIgaGVscGZ1bCB0byB1c2Ugd2l0aCBjb25zb2xlLnRhYmxlKClcbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIGNvbnNvbGUudGFibGUod29ybGQuZGV2LnN5c3RlbUNvbXBvbmVudHMpO1xuICAgKiBgYGBcbiAgICovXG4gIGdldCBzeXN0ZW1Db21wb25lbnRzKCk6IERldlN5c3RlbUNvbXBzW10ge1xuICAgIGNvbnN0IGNvbXBzQnlTeXN0ZW1zID0gW107XG5cbiAgICBmb3IgKGNvbnN0IFtzeXN0ZW0sIGNvbXBOYW1lc10gb2YgdGhpcy53b3JsZC5zeXN0ZW1zLmNvbXBOYW1lc0J5U3lzdGVtTmFtZSkge1xuICAgICAgY29tcHNCeVN5c3RlbXMucHVzaCh7IHN5c3RlbSwgY29tcG9uZW50czogY29tcE5hbWVzLmpvaW4oXCIsIFwiKSB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcHNCeVN5c3RlbXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGFycmF5IG9mIERldkVudGl0ZXMuIENhbiBiZSB2ZXJ5IGhlbHBmdWwgZm9yIHRoaW5ncyBsaWtlIGluc3BlY3RpbmcgY29tcG9uZW50IHN0YXRlLFxuICAgKiBhbmQgd2hpY2ggc3lzdGVtcyB3aWxsIGJlIGNhbGxlZCBvbiBhbiBlbnRpdHkuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYFxuICAgKiBjb25zb2xlLnRhYmxlKHdvcmxkLmRldi5lbnRpdGllcyk7XG4gICAqXG4gICAqIC8vIFBybyB0aXAhIHRyeSBkaXNwbGF5aW5nIGEgdGFibGUgb2YgZW50aXRpZXMgd2l0aCBjb25zb2xlLnRhYmxlIGFuZCBEZXZFbnRpdHkudG9UYWJsZVJvdygpLlxuICAgKiBjb25zb2xlLnRhYmxlKHdvcmxkLmRldi5lbnRpdGllcy5tYXAoZGV2RW50aXR5ID0+IGRldkVudGl0eS50b1RhYmxlUm93KCkpKTtcbiAgICogYGBgXG4gICAqL1xuXG4gIGdldCBlbnRpdGllcygpOiBEZXZFbnRpdHk8Q1Q+W10ge1xuICAgIHJldHVybiBbLi4udGhpcy53b3JsZC5lbnRpdGllcy52YWx1ZXMoKV0ubWFwKChlKSA9PiBlLnRvRGV2RW50aXR5KCkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERldlRvb2xzO1xuIiwiaW1wb3J0IEVudGl0eSwgeyBFbnRpdHlJZCB9IGZyb20gXCIuL0VudGl0eVwiO1xuaW1wb3J0IFdvcmxkLCB7IENsYXNzQ29uc3RydWN0b3IgfSBmcm9tIFwiLi9Xb3JsZFwiO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSBcIi4vQ29tcG9uZW50Q29sbGVjdGlvblwiO1xuXG4vKipcbiAqIEFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWQgaW50byBhIFN5c3RlbSBmdW5jdGlvbiBvbiBlYWNoIGl0ZXJhdGlvbi5cbiAqIFRoaXMgaXMgaG93IHlvdSBhY2NlcyB0aGluZ3MgbGlrZSB0aGUgZW50aXR5IHRoYXQgcGFydGljdWxhciBlbnRpdHkgdG8gYWN0IG9uLFxuICogYXMgd2VsbCBhcyBzb21lIG90aGVyIGhlbHBmdWwgcGFyYW1zIGxpa2UgaWYgdGhlIGVudGl0eSBpcyB0aGUgZmlyc3Qgb3IgbGFzdCBlbnRpdHlcbiAqIGluIHRoZSBncm91cCBvZiBlbnRpdGllcyB0aGF0IGJlaW5nIGl0ZXJhdGVkIG92ZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3lzdGVtRnVuY0FyZ3M8Q1Q+IHtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGVudGl0eSBiZWluZyBpdGVyYXRlZC5cbiAgICovXG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnRzIHRoYXQgYmVsb25nIHRvIHRoZSBlbnRpdHlcbiAgICovXG4gIGNvbXBvbmVudHM6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+O1xuICAvKipcbiAgICogVGhlIFdvcmxkIGluc3RhbmNlLlxuICAgKiBVc2UgdGhpcyB0byBhY2Nlc3Mgb3RoZXIgZW50aXRpZXMuXG4gICAqL1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBpbmRleDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG4gIC8qKlxuICAgKiBJcyB0aGUgZmlyc3QgZW50aXR5IHRvIGJlIGl0ZXJhdGVkIG9uIHRoaXMgcnVuIG9mIGEgc3lzdGVtLlxuICAgKiBIZWxwZnVsIGZvciBzZXR0aW5nIHVwIHN0YXRlIHRoYXQgaXMgdGhlIHNhbWUgZm9yIGFsbCBlbnRpdGllcyBvbmx5IG9uY2UuXG4gICAqL1xuICBpc0ZpcnN0OiBib29sZWFuO1xuICAvKipcbiAgICogSXMgdGhlIGxhc3QgZW50aXR5IHRvIGJlIGl0ZXJhdGVkIG9uIHRoaXMgcnVuIG9mIGEgc3lzdGVtLlxuICAgKiBDYW4gYmUgaGVscGZ1bCB0byB0ZWFyIGRvd24gYW55dGhpbmcgdGhhdCBzaG91bGQgYmUgZGVhbHQgd2l0aCBhZnRlciBhbGwgdGhlIGVudGl0ZXMgaGF2ZSByYW4uXG4gICAqL1xuICBpc0xhc3Q6IGJvb2xlYW47XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHN5c3RlbSBpcyBydW4uXG4gKi9cbmV4cG9ydCB0eXBlIFN5c3RlbUZ1bmM8Q1Q+ID0gKHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPikgPT4gdm9pZDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3lzdGVtczxDVD4ge1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuXG4gIHN5c3RlbUZ1bmNCeVN5c3RlbU5hbWU6IE1hcDxzdHJpbmcsIFN5c3RlbUZ1bmM8Q1Q+PjsgLy8gZG91YmxlIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG1hcHMgYXJlIG9yZGVyZWQuXG5cbiAgY29tcE5hbWVzQnlTeXN0ZW1OYW1lOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFdvcmxkPENUPikge1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLnN5c3RlbUZ1bmNCeVN5c3RlbU5hbWUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5jb21wTmFtZXNCeVN5c3RlbU5hbWUgPSBuZXcgTWFwKCk7XG4gIH1cblxuICBhZGQoXG4gICAgY1R5cGVzOiBDbGFzc0NvbnN0cnVjdG9yPENUPltdLFxuICAgIHN5c3RlbUZ1bmM6IFN5c3RlbUZ1bmM8Q1Q+LFxuICAgIGZ1bmNOYW1lPzogc3RyaW5nXG4gICk6IHRoaXMge1xuICAgIGNvbnN0IGNOYW1lcyA9IGNUeXBlcy5tYXAoKGN0KSA9PiBjdC5uYW1lKTtcblxuICAgIGxldCBuYW1lID0gc3lzdGVtRnVuYy5uYW1lO1xuICAgIGlmIChzeXN0ZW1GdW5jLm5hbWUgPT09IFwiXCIpIHtcbiAgICAgIC8vIFN1cGVyIGJydXRlIGZvcmNlLCBhbmQgbWlnaHQgbGVhZCB0byBlcnJvcnMgaW4gdGhlIGZ1dHVyZSwgYnV0IGZvciBub3dcbiAgICAgIC8vIHVzaW5nIHRoZSBzdHJpbmdpZmllZCBzeXN0ZW0gZnVuY3Rpb24gaWYgdGhlIGZ1bmN0aW9uIGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGEgbmFtZS5cbiAgICAgIC8vIFRoaXMgaXMgdXNlZnVsIGZvciBhbm9ueW1vdXMgZnVuY3Rpb25zIHVzZWQgYXMgYSBzeXN0ZW0gZnVuY3Rpb24uXG4gICAgICAvLyBNaWdodCBiZSBnb29kIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGdldCBhIGhhc2ggb2YgdGhlIGZ1bmN0aW9uIHN0cmluZy5cbiAgICAgIG5hbWUgPSBzeXN0ZW1GdW5jLnRvU3RyaW5nKCkuc2xpY2UoMCwgMzApO1xuICAgIH1cblxuICAgIGlmIChmdW5jTmFtZSkge1xuICAgICAgbmFtZSA9IGZ1bmNOYW1lO1xuICAgIH1cblxuICAgIHRoaXMuc3lzdGVtRnVuY0J5U3lzdGVtTmFtZS5zZXQobmFtZSwgc3lzdGVtRnVuYyk7XG4gICAgdGhpcy5jb21wTmFtZXNCeVN5c3RlbU5hbWUuc2V0KG5hbWUsIGNOYW1lcyk7XG4gICAgdGhpcy53b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNldChjTmFtZXMsIG5ldyBTZXQ8RW50aXR5SWQ+KCkpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBydW4oKTogdm9pZCB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMud29ybGQuZW50aXRpZXNCeUNUeXBlcy5zaXplO1xuICAgIFxuICAgIGNvbnN0IGVudGl0aWVzSW5DcmVhdGluZ1N0YXRlID0gW107XG4gICAgY29uc3QgZW50aXRpZXNJbkRlc3Ryb3lpbmdTdGF0ZSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy53b3JsZC5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5zdGF0ZSA9PT0gXCJjcmVhdGluZ1wiKSB7XG4gICAgICAgIGVudGl0aWVzSW5DcmVhdGluZ1N0YXRlLnB1c2goZW50aXR5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eS5zdGF0ZSA9PT0gXCJkZXN0cm95aW5nXCIpIHtcbiAgICAgICAgZW50aXRpZXNJbkRlc3Ryb3lpbmdTdGF0ZS5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBbXG4gICAgICBmdW5jTmFtZSxcbiAgICAgIHN5c3RlbUZ1bmMsXG4gICAgXSBvZiB0aGlzLnN5c3RlbUZ1bmNCeVN5c3RlbU5hbWUuZW50cmllcygpKSB7XG4gICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgY29uc3QgY05hbWVzID0gdGhpcy5jb21wTmFtZXNCeVN5c3RlbU5hbWUuZ2V0KGZ1bmNOYW1lKSB8fCBbXTtcbiAgICAgIGNvbnN0IGNUeXBlQXJycyA9IHRoaXMud29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY05hbWVzKSB8fCBuZXcgU2V0KCk7XG5cbiAgICAgIGZvciAoY29uc3QgZWlkIG9mIGNUeXBlQXJycykge1xuICAgICAgICBjb25zdCBhcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4gPSB7XG4gICAgICAgICAgZW50aXR5OiB0aGlzLndvcmxkLmVudGl0aWVzLmdldChlaWQpIHx8IG5ldyBFbnRpdHk8Q1Q+KHRoaXMud29ybGQpLFxuICAgICAgICAgIGNvbXBvbmVudHM6XG4gICAgICAgICAgICB0aGlzLndvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8XG4gICAgICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSxcbiAgICAgICAgICB3b3JsZDogdGhpcy53b3JsZCxcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBzaXplLFxuICAgICAgICAgIGlzRmlyc3Q6IGluZGV4ID09PSAwLFxuICAgICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgICAgICB9O1xuXG4gICAgICAgIHN5c3RlbUZ1bmMoYXJncyk7XG5cbiAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzSW5DcmVhdGluZ1N0YXRlKSB7XG4gICAgICBlbnRpdHkuZmluaXNoQ3JlYXRpb24oKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllc0luRGVzdHJveWluZ1N0YXRlKSB7XG4gICAgICBlbnRpdHkuZGVzdHJveUltbWVkaWF0ZWx5KCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICBUT0RPOiBOaWNlIHRvIGhhdmUgb3B0aW9ucyBoZXJlOlxuICAgICAgLSBzeXN0ZW1zLmFjdGl2ZVN5c3RlbXMgPSBuZXcgU2V0KCk7IC8vIGlmIG5vdCBpbiBzZXQsIHN5c3RlbSBkb2Vzbid0IHJ1bi5cbiAgICAgIC0gc3lzdGVtcy5kZWFjdGl2YXRlU3lzdGVtKCdzeXN0ZW1OYW1lJykgLy8gcmVtb3ZlIHN5c3RlbSBmcm9tIGFjdGl2ZVN5c3RlbXNcbiAgICAgIC0gc3lzdGVtcy5hY3RpdmF0ZVN5c3RlbSgnc3lzdGVtTmFtZSkgLy8gYWRkcyBzeXN0ZW0gYmFjayB0byBhY3RpdmVTeXN0ZW1zXG4gICAgICAtIHN5c3RlbXMucGF1c2UoKSAvLyBwYXVzZXMgcnVubmluZyBvZiBzeXN0ZW1zLiBiYXNpY2FsbHkgcmV0dXJuIGltbWVkaWF0ZWx5IG9uIHJ1bigpLlxuICAgICAgLSBzeXN0ZW1zLnJlc3VtZSgpIC8vIHJlc3VtZSBydW5uaW5nIG9mIHN5c3RlbXMuXG4gICovXG59XG4iLCJpbXBvcnQgV29ybGQsIHsgQ2xhc3NDb25zdHJ1Y3RvciB9IGZyb20gXCIuL1dvcmxkXCI7XG5pbXBvcnQgRW50aXR5LCB7IEVudGl0eUlkIH0gZnJvbSBcIi4vRW50aXR5XCI7XG5cbi8vIFdhaXRpbmcgZm9yIFR5cGVzY3JpcHQgNC4yIHRvIGNvbWUgb3V0IHNvIHRoYXQgU3ltYm9scyBhcmUgc3VwcG9yZGVkIGtleXMuXG5leHBvcnQgY29uc3QgVHJhY2tlZENvbXBTeW1ib2xLZXlzID0ge1xuICBpc1RyYWNrZWQ6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5pc1RyYWNrZWRcIiksXG4gIHdvcmxkOiBTeW1ib2wuZm9yKFwiZWNzLnRyYWNrZWRDb21wb25lbnQud29ybGRcIiksXG4gIGVudGl0eUlEczogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50LmVudGl0eUlEc1wiKSxcbiAgZ2V0RW50aXRpZXM6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5nZXRFbnRpdGllc1wiKSxcbiAgc2V0V29ybGQ6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5zZXRXb3JsZFwiKSxcbiAgb25BZGQ6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5vbkFkZFwiKSxcbiAgb25VcGRhdGU6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5vblVwZGF0ZVwiKSxcbiAgb25SZW1vdmU6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC5vblJlbW92ZVwiKSxcbn0gYXMgY29uc3Q7XG5cbi8vQHRzLWlnbm9yZVxudHlwZSBUcmFja2VkQ29tcG9uZW50PENUPiA9IHtcbiAgbmV3ICguLi5hcmdzOiBhbnlbXSk6IENUO1xuXG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmlzVHJhY2tlZF06IGJvb2xlYW47XG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLnNldFdvcmxkXTogKHdvcmxkOiBXb3JsZDxDVD4pID0+IHZvaWQ7XG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLndvcmxkXTogV29ybGQ8Q1Q+O1xuICAvL0B0cy1pZ25vcmVcbiAgW1RyYWNrZWRDb21wU3ltYm9sS2V5cy5lbnRpdHlJRHNdOiBTZXQ8RW50aXR5SWQ+O1xuICAvL0B0cy1pZ25vcmVcbiAgW1RyYWNrZWRDb21wU3ltYm9sS2V5cy5nZXRFbnRpdGllc106ICgpID0+IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLm9uQWRkXTogKFxuICAgIHdvcmxkOiBXb3JsZDxDVD4sXG4gICAgZW50aXR5OiBFbnRpdHk8Q1Q+XG4gICkgPT4gdm9pZDtcbiAgLy9AdHMtaWdub3JlXG4gIFtUcmFja2VkQ29tcFN5bWJvbEtleXMub25SZW1vdmVdOiAoXG4gICAgd29ybGQ6IFdvcmxkPENUPixcbiAgICBlbnRpdHk6IEVudGl0eTxDVD5cbiAgKSA9PiB2b2lkO1xufTtcblxuaW50ZXJmYWNlIEFkZEV2ZW50QXJnczxDVD4ge1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBjb21wb25lbnQ6IENUO1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlRXZlbnRBcmdzPENUPiB7XG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xuICBjb21wb25lbnQ6IENUO1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBwcmV2aW91c1ZhbDogQ1Rba2V5b2YgQ1RdO1xuICBwcm9wZXJ0eToga2V5b2YgQ1Q7XG59XG5cbmludGVyZmFjZSBSZW1vdmVFdmVudEFyZ3M8Q1Q+IHtcbiAgd29ybGQ6IFdvcmxkPENUPjtcbiAgY29tcG9uZW50OiBDVDtcbiAgZW50aXR5OiBFbnRpdHk8Q1Q+O1xuICBlbnRpdGllczogTWFwPEVudGl0eUlkLCBFbnRpdHk8Q1Q+Pjtcbn1cblxuaW50ZXJmYWNlIFRyYWNrZWRFdmVudEhhbmRsZXJzPENUPiB7XG4gIG9uQWRkPzogKGFyZ3M6IEFkZEV2ZW50QXJnczxDVD4pID0+IHZvaWQ7XG4gIG9uVXBkYXRlPzogKGFyZ3M6IFVwZGF0ZUV2ZW50QXJnczxDVD4pID0+IHZvaWQ7XG4gIG9uUmVtb3ZlPzogKGFyZ3M6IFJlbW92ZUV2ZW50QXJnczxDVD4pID0+IHZvaWQ7XG59XG5cblxuLy8gTk9URTogUmVhbGx5IG5lZWQgdG8gZ2V0IHN5bWJvbHMgd29ya2luZyBhcyBrZXlzIGluIFR5cGVzY3JpcHQuXG4vLyAgICAgICBVbnRpbCB0aGVuIHdpbGwgaGF2ZSB0byBjYXN0IHRvIGtleW9mIENULlxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTQzMjQzMjMvdHlwZXNjcmlwdC10eXBlLXN0cmluZy1pcy1ub3QtYXNzaWduYWJsZS10by10eXBlLWtleW9mXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvcHVsbC8yNjc5N1xuZnVuY3Rpb24gY3JlYXRlQ2xhc3NJbnN0YW5jZVByb3h5SGFuZGxlcnM8Q1Q+KFxuICB0cmFja2VkRXZlbnRIYW5kbGVyczogVHJhY2tlZEV2ZW50SGFuZGxlcnM8Q1Q+XG4pOiBQcm94eUhhbmRsZXI8YW55PiB7XG4gIGNvbnN0IHVwZGF0ZWRQcm9wcyA9IG5ldyBTZXQoKTtcbiAgcmV0dXJuIHtcbiAgICBzZXQoXG4gICAgICBjb21wb25lbnQ6IENULFxuICAgICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICAgIHZhbHVlOiBDVFtrZXlvZiBDVF1cbiAgICApIHtcbiAgICAgIHVwZGF0ZWRQcm9wcy5hZGQocHJvcGVydHkpO1xuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbnN0IHdvcmxkID0gY29tcG9uZW50W1xuICAgICAgICBUcmFja2VkQ29tcFN5bWJvbEtleXMud29ybGRcbiAgICAgIF0gYXMgV29ybGQ8Q1Q+O1xuXG4gICAgICBjb25zdCBwcmV2aW91c1ZhbCA9IGNvbXBvbmVudFtwcm9wZXJ0eSBhcyBrZXlvZiBDVF07XG5cbiAgICAgIGNvbXBvbmVudFtwcm9wZXJ0eSBhcyBrZXlvZiBDVF0gPSB2YWx1ZTtcblxuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjb25zdCBlbnRpdGllcyA9IGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuZ2V0RW50aXRpZXNdKHdvcmxkKSBhcyBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgICBlbnRpdHkub25UcmFja2VkQ29tcG9uZW50VXBkYXRlKHsgd29ybGQsIGNvbXBvbmVudCB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyYWNrZWRFdmVudEhhbmRsZXJzLm9uVXBkYXRlKSB7XG4gICAgICAgIHRyYWNrZWRFdmVudEhhbmRsZXJzLm9uVXBkYXRlKHtcbiAgICAgICAgICBlbnRpdGllcyxcbiAgICAgICAgICB3b3JsZCxcbiAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgcHJldmlvdXNWYWwsXG4gICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5IGFzIGtleW9mIENULFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYWNrQ29tcG9uZW50PENUPihcbiAgQ29tcENsYXNzOiBDbGFzc0NvbnN0cnVjdG9yPENUPixcbiAgdHJhY2tlZEV2ZW50SGFuZGxlcnM6IFRyYWNrZWRFdmVudEhhbmRsZXJzPENUPlxuKTogVHJhY2tlZENvbXBvbmVudDxDVD4ge1xuICByZXR1cm4gbmV3IFByb3h5KENvbXBDbGFzcywge1xuICAgIGNvbnN0cnVjdChDb21wb25lbnQ6IGFueSwgYXJnczogYW55KSB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KC4uLmFyZ3MpIGFzIENUICYgVHJhY2tlZENvbXBvbmVudDxDVD47XG5cbiAgICAgIC8vIEZvciB1c2UgaW4gaWRlbnRpZmluZyBhIFwidHJhY2tlZFwiIGNsYXNzIHRocm91Z2ggdGhlIHByb3h5LlxuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmlzVHJhY2tlZF0gPSB0cnVlO1xuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuc2V0V29ybGRdID0gKFxuICAgICAgICB3b3JsZDogV29ybGQ8Q1Q+XG4gICAgICApID0+IHtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMud29ybGRdID0gd29ybGQ7XG4gICAgICB9O1xuXG4gICAgICAvLyBIb2xkcyBlbnRpdGllcyB0aGF0IHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIGFkZGVkIHRvLlxuICAgICAgLy8gQWRkZWQgYW5kIHJlbW92ZWQgaW4gd29ybGQuYWRkKCkvd29ybGQucmVtb3ZlKCkuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuZW50aXR5SURzXSA9IG5ldyBTZXQoKTtcblxuXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBFbnRpdGllcyBmcm9tIGVudGl0eUlEc1xuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmdldEVudGl0aWVzXSA9ICh3b3JsZDogV29ybGQ8Q1Q+KTogTWFwPEVudGl0eUlkLCBFbnRpdHk8Q1Q+PiA9PiB7XG4gICAgICAgIGNvbnN0IGVudGl0aWVzID0gbmV3IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj4oKTtcblxuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgZm9yIChjb25zdCBlaWQgb2YgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5lbnRpdHlJRHNdKSB7XG4gICAgICAgICAgY29uc3QgZW50aXR5ID0gd29ybGQuZW50aXRpZXMuZ2V0KGVpZCk7XG4gICAgICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICAgICAgZW50aXRpZXMuc2V0KGVpZCwgZW50aXR5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZW50aXRpZXM7XG4gICAgICB9XG5cbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5vbkFkZF0gPSAoXG4gICAgICAgIHdvcmxkOiBXb3JsZDxDVD4sXG4gICAgICAgIGVudGl0eTogRW50aXR5PENUPlxuICAgICAgKSA9PiB7XG4gICAgICAgIGlmICh0cmFja2VkRXZlbnRIYW5kbGVycy5vbkFkZCkge1xuICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0IGVudGl0aWVzID0gY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5nZXRFbnRpdGllc10od29ybGQpIGFzIE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG5cbiAgICAgICAgICB0cmFja2VkRXZlbnRIYW5kbGVycy5vbkFkZCh7IGNvbXBvbmVudCwgd29ybGQsIGVudGl0eSwgZW50aXRpZXMgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5vblJlbW92ZV0gPSAoXG4gICAgICAgIHdvcmxkOiBXb3JsZDxDVD4sXG4gICAgICAgIGVudGl0eTogRW50aXR5PENUPlxuICAgICAgKSA9PiB7XG4gICAgICAgIGlmICh0cmFja2VkRXZlbnRIYW5kbGVycy5vblJlbW92ZSkge1xuICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0IGVudGl0aWVzID0gY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5nZXRFbnRpdGllc10od29ybGQpIGFzIE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG5cbiAgICAgICAgICB0cmFja2VkRXZlbnRIYW5kbGVycy5vblJlbW92ZSh7IGNvbXBvbmVudCwgd29ybGQsIGVudGl0eSwgZW50aXRpZXMgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBuZXcgUHJveHkoXG4gICAgICAgIGNvbXBvbmVudCxcbiAgICAgICAgY3JlYXRlQ2xhc3NJbnN0YW5jZVByb3h5SGFuZGxlcnModHJhY2tlZEV2ZW50SGFuZGxlcnMpXG4gICAgICApO1xuICAgIH0sXG4gIH0pO1xufVxuIiwiaW1wb3J0IEVudGl0eSwgeyBFbnRpdHlJZCB9IGZyb20gXCIuL0VudGl0eVwiO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSBcIi4vQ29tcG9uZW50Q29sbGVjdGlvblwiO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSBcIi4vVGFnXCI7XG5pbXBvcnQgeyBTeXN0ZW1GdW5jIH0gZnJvbSBcIi4vU3lzdGVtc1wiO1xuaW1wb3J0IERldlRvb2xzIGZyb20gXCIuL0RldlRvb2xzXCI7XG5pbXBvcnQgU3lzdGVtcyBmcm9tICcuL1N5c3RlbXMnO1xuaW1wb3J0IHsgVHJhY2tlZENvbXBTeW1ib2xLZXlzIH0gZnJvbSAnLi9UcmFja2VkQ29tcG9uZW50JztcblxuZXhwb3J0IHR5cGUgQ2xhc3NDb25zdHJ1Y3RvcjxUPiA9IHsgbmV3ICguLi5hcmdzOiBhbnlbXSk6IFQgfTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ybGQ8Q1Q+IHtcbiAgY29tcG9uZW50Q29sbGVjdGlvbnM6IE1hcDxFbnRpdHlJZCwgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlDVHlwZXM6IE1hcDxzdHJpbmdbXSwgU2V0PEVudGl0eUlkPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXNCeVRhZ3M6IE1hcDxUYWcsIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIHN5c3RlbXM6IFN5c3RlbXM8Q1Q+O1xuXG4gIGRldjogRGV2VG9vbHM8Q1Q+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGV2ID0gbmV3IERldlRvb2xzKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtcyA9IG5ldyBTeXN0ZW1zKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiZmluZHNcIiBhIHNpbmdsZSBlbnRpdHkgYmFzZWQgb24gYSBwcmVkaWNhdGVcbiAgICovXG4gIGZpbmQgPSAocHJlZGljYXRlOiAoZW50aXR5OiBFbnRpdHk8Q1Q+KSA9PiBib29sZWFuKTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBcImZpbmRzXCIgYWxsIGVudGl0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlLCBraW5kYSBsaWtlIGZpbHRlci5cbiAgICovXG4gIGZpbmRBbGwgPSAocHJlZGljYXRlOiAoZW50aXR5OiBFbnRpdHk8Q1Q+KSA9PiBib29sZWFuKTogRW50aXR5PENUPltdID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbnRpdHk8Q1Q+W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvKipcbiAgICogXCJsb2NhdGVzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGl0cyBDb21wb25lbnRzLlxuICAgKi9cbiAgbG9jYXRlID0gKGNsOiBDbGFzc0NvbnN0cnVjdG9yPENUPiB8IENsYXNzQ29uc3RydWN0b3I8Q1Q+W10pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5jb21wb25lbnRzLmhhcyhjbCkpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogTG9jYXRlcyBhbGwgZW50aXRpZXMgdGhhdCBjb250YWluIHRoZSBjb21wb25lbnRzIG5hbWVkXG4gICAqL1xuICBsb2NhdGVBbGwgPSAoY2w6IENsYXNzQ29uc3RydWN0b3I8Q1Q+IHwgQ2xhc3NDb25zdHJ1Y3RvcjxDVD5bXSk6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNsKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvKipcbiAgICogR3JhYnMgdGhlIGZpcnN0IGVudGl0eSwgYW5kIGl0cyByZWxhdGVkIGNvbXBvbmVudCwgdGhhdCBtYXRjaGVzIHRoZSBjb21wb25lbnQgdHlwZS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnQgfSA9IHdvcmxkLmdyYWIoTXlDb21wb25lbnQpO1xuICAgKiBgYGBcbiAgICovXG4gIGdyYWIgPSA8VCBleHRlbmRzIENUPihcbiAgICBjbDogQ2xhc3NDb25zdHJ1Y3RvcjxUPlxuICApOiB7IGVudGl0eTogRW50aXR5PENUPjsgY29tcG9uZW50OiBUIH0gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmxvY2F0ZShjbCk7XG5cbiAgICBpZiAoZW50aXR5KSB7XG4gICAgICBjb25zdCBjYyA9XG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVudGl0eS5pZCkgfHxcbiAgICAgICAgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxUPihjbCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVudGl0eSxcbiAgICAgICAgY29tcG9uZW50LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR3JhYiBzaW5nbGUgY29tcG9uZW50IGJhc2VkIG9uIGNvbXBvbmVudCB0eXBlIGFuZCBwcmVkaWNhdGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgeyBlbnRpdHksIGNvbXBvbmVudCB9ID0gd29ybGQuZ3JhYkJ5KEZpcnN0Q29tcG9uZW50LCAoY29tcCkgPT4gY29tcC5pZCA9PSAnYXdlc29tZScpXG4gICAqIGBgYFxuICAgKi9cbiAgZ3JhYkJ5ID0gPFQgZXh0ZW5kcyBDVD4oXG4gICAgY2w6IENsYXNzQ29uc3RydWN0b3I8VD4sXG4gICAgcHJlZGljYXRlOiAoY29tcDogVCkgPT4gYm9vbGVhblxuICApOiB7IGVudGl0eTogRW50aXR5PENUPjsgY29tcG9uZW50OiBUIH0gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMubG9jYXRlQWxsKGNsKTtcbiAgICAvLyBjb25zdCBlbnRpdGllcyA9IHRoaXMubG9jYXRlQWxsKChjbCBhcyB1bmtub3duKSBhcyBDVCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcykge1xuICAgICAgY29uc3QgY2MgPVxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpIHx8XG4gICAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8VD4oY2wpO1xuXG4gICAgICBpZiAocHJlZGljYXRlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgZW50aXR5LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHcmFiIGFsbCB0aGUgY29tcG9uZW50cyBwcmltYXJpbHksIGFuZCB0aGUgZW50aXRpZXMgaWYgbmVlZGVkXG4gICAqL1xuICBncmFiQWxsID0gPFQgZXh0ZW5kcyBDVD4oXG4gICAgY2w6IENsYXNzQ29uc3RydWN0b3I8VD5cbiAgKTogeyBlbnRpdHk6IEVudGl0eTxDVD47IGNvbXBvbmVudDogVCB9W10gPT4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy5sb2NhdGVBbGwoY2wpO1xuXG4gICAgcmV0dXJuIGVudGl0aWVzLm1hcCgoZW50aXR5KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbnRpdHksXG4gICAgICAgIGNvbXBvbmVudDogZW50aXR5LmNvbXBvbmVudHMuZ2V0PFQ+KGNsKSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVE9ETzogQWRkIGdyYWJBbGxCeSBtZXRob2RcblxuICAvKipcbiAgICogR2l2ZW4gYW4gZW50aXR5IGlkIGFuZCBjb21wb25lbnRUeXBlLCByZXR1cm5zIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0ID0gPFQgZXh0ZW5kcyBDVD4oZWlkOiBFbnRpdHlJZCwgY2w6IENsYXNzQ29uc3RydWN0b3I8VD4pOiBUID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgcmV0dXJuIGNjLmdldDxUPihjbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgYW5kIGdldCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYSBjb21wb25lbnQsIHdpdGhvdXQgYW55IGFzc29jaWF0ZWQgZW50aXRpZXMuXG4gICAqIEhlbHBmdWwgaXMgeW91IGtub3cgdGhhdCBvbmx5IG9uZSBpbnN0YW5jZSBvZiBhIGNvbXBvbmVudCBleGlzdHMgYWNyb3NzIGFsbCBlbnRpdGllcy5cbiAgICogQHBhcmFtIGNsIENvbXBvbmVudCBDbGFzcyBDb250cnVjdG9yXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgQSBkZWZhdWx0IGNvbXBvbmVudCBpbnN0YW5jZSBpZiBubyBjb21wb25lbnRzIGFyZSBmb3VuZC5cbiAgICovXG4gIGdldENvbXBvbmVudCA9IDxUIGV4dGVuZHMgQ1Q+KFxuICAgIGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+LFxuICAgIGRlZmF1bHRWYWx1ZT86IFRcbiAgKTogVCB8IG51bGwgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZ3JhYihjbCk7XG5cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5jb21wb25lbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbiBlbnRpdHkgdGhhdCBoYXMgYmVlbiB0YWdnZWQgd2l0aCB0aGUgZ2l2ZW4gdGFnLCBvciByZXR1cm4gbnVsbDtcbiAgICovXG4gIGdldFRhZ2dlZCA9ICh0YWc6IFRhZyk6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBjb25zdCB0YWdFbnRpdHlJZHMgPSB0aGlzLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuXG4gICAgaWYgKHRhZ0VudGl0eUlkcykge1xuICAgICAgY29uc3QgZW50aXR5SWQgPSB0YWdFbnRpdHlJZHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuXG4gICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlbnRpdHlJZCk7XG5cbiAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2V0dCBhbGwgZW50aXRpZXMgdGhhdCBoYXZlIGJlZW4gdGFnZ2VkIHdpdGggdGhlIGdpdmVuIHRhZy5cbiAgICogQHBhcmFtIHRhZyBBIHN0cmluZyBvciBudW1iZXIuXG4gICAqL1xuICBnZXRBbGxUYWdnZWQgPSAodGFnOiBUYWcpOiBFbnRpdHk8Q1Q+W10gPT4ge1xuICAgIGxldCBlbnRpdGllczogRW50aXR5PENUPltdID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGNvbnN0IHRhZ0VudGl0eUlkcyA9IHRoaXMuZW50aXRpZXNCeVRhZ3MuZ2V0KHRhZyk7XG5cbiAgICBpZiAodGFnRW50aXR5SWRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHRhZ0VudGl0eUlkcykge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlbnRpdHlJZCk7XG4gICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICBlbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZW50aXRpZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCBvbiB0aGUgZ2l2ZW4gZW50aXR5XG4gICAqL1xuICBhZGQgPSA8VCBleHRlbmRzIENUPihlaWQ6IEVudGl0eUlkLCBjb21wb25lbnQ6IFQpOiB0aGlzID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZWlkKTtcblxuICAgIGlmICghZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHdvcmxkLmFkZDogVW5hYmxlIHRvIGxvY2F0ZSBlbnRpdHkgd2l0aCBpZCAke2VpZH1gKTtcbiAgICB9XG5cbiAgICBjYy5hZGQoY29tcG9uZW50KTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgY2MpO1xuXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoKGN0QXJyIGFzIHN0cmluZ1tdKS5ldmVyeShjYy5oYXNCeU5hbWUpKSB7XG4gICAgICAgIGVudGl0eVNldC5hZGQoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuaXNUcmFja2VkXSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5zZXRXb3JsZF0odGhpcyk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmVudGl0eUlEc10uYWRkKGVpZCk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLm9uQWRkXSh0aGlzLCBlbnRpdHkpO1xuICAgIH1cblxuICAgIGVudGl0eS5vbkNvbXBvbmVudEFkZCh7IHdvcmxkOiB0aGlzLCBjb21wb25lbnQgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gdGhlIGdpdmVuIGVudGl0eS5cbiAgICogTk9URTogVGhpcyB3aWxsIGNoYW5nZSB3aGF0IHN5c3RlbXMgd2lsbCBiZSBjYWxsZWQgb24gdGhlIGVudGl0eS5cbiAgICovXG4gIHJlbW92ZSA9IChlaWQ6IEVudGl0eUlkLCBjVHlwZTogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4pOiB0aGlzID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgLy8gbmVlZCB0byBnZXQgY29tcG9uZW50IGluc3RhbmNlLi4uXG4gICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0KGNUeXBlKTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5pc1RyYWNrZWRdKSB7XG4gICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlaWQpO1xuXG4gICAgICBpZiAoIWVudGl0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHdvcmxkLnJlbW92ZTogVW5hYmxlIHRvIGxvY2F0ZSBlbnRpdHkuIGVpZDogJHtlaWR9LCBjVHlwZTogJHtjVHlwZS5uYW1lfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmVudGl0eUlEc10uZGVsZXRlKGVpZCk7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMub25SZW1vdmVdKHRoaXMsIGVudGl0eSk7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGVudGl0eSBmcm9tIGN1cnJlbnQgZW50aXRpZXNCeUNUeXBlc1xuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKChjdEFyciBhcyBzdHJpbmdbXSkuZXZlcnkoY2MuaGFzQnlOYW1lKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2MucmVtb3ZlKGNUeXBlKTtcblxuICAgIC8vIE1vdmUgZW50aXR5SWQgdG8gbmV3IENUeXBlcyBpZiBuZWVkZWQuXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoKGN0QXJyIGFzIHN0cmluZ1tdKS5ldmVyeShjYy5oYXNCeU5hbWUpKSB7XG4gICAgICAgIGVudGl0eVNldC5hZGQoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlaWQpO1xuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgIGVudGl0eS5vbkNvbXBvbmVudFJlbW92ZSh7IHdvcmxkOiB0aGlzLCBjb21wb25lbnQgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ldGhvZCBmb3IgYWRkaW5nIHN5c3RlbXMuXG4gICAqL1xuICBhZGRTeXN0ZW0oY1R5cGVzOiBDbGFzc0NvbnN0cnVjdG9yPENUPltdLCBzeXN0ZW1GdW5jOiBTeXN0ZW1GdW5jPENUPiwgZnVuY05hbWU/OiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLnN5c3RlbXMuYWRkKGNUeXBlcywgc3lzdGVtRnVuYywgZnVuY05hbWUpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTZXR1cCBhbiBlbnRpdHkgdG8gZXhpc3QgaW4gdGhlIGdpdmVuIHdvcmxkLiBUaGlzIGlzIG1vc3RseSBhbiBpbnRlcm5hbCBtZXRob2QsIGJ1dCBleHBvc2VkIGp1c3QgaW4gY2FzZS5cbiAgICovXG4gIHJlZ2lzdGVyRW50aXR5KGVudGl0eTogRW50aXR5PENUPik6IFdvcmxkPENUPiB7XG4gICAgY29uc3QgY2MgPSBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVudGl0eS5pZCwgY2MpO1xuICAgIHRoaXMuZW50aXRpZXMuc2V0KGVudGl0eS5pZCwgZW50aXR5KTtcblxuICAgIGVudGl0eS5vbkNyZWF0ZSh0aGlzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgY29tcG9uZW50cyB0aGF0IGJlbG9uZyB0byBhbiBlbnRpdHkuXG4gICAqL1xuICBjbGVhckVudGl0eUNvbXBvbmVudHMoZW50aXR5SWQ6IEVudGl0eUlkKTogdGhpcyB7XG4gICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5zZXQoZW50aXR5SWQsIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5U2V0IG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eVNldC5oYXMoZW50aXR5SWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZW50aXR5SWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBlbnRpdHkgdGhhdCBpcyBpbiB0aGUgd29ybGQuXG4gICAqIEJhc2ljYWxseSBqdXN0IG5ldyBFbnRpdHkod29ybGQpLCBidXQgc2F2ZXMgYW4gaW1wb3J0IG9mIEVudGl0eS5cbiAgICovXG4gIGNyZWF0ZUVudGl0eSgpOiBFbnRpdHk8Q1Q+IHtcbiAgICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5KHRoaXMpO1xuXG4gICAgcmV0dXJuIGVudGl0eTtcblxuICAgIC8vIFJlZ2lzdGVyIGVudGl0eSBoZXJlLi4uLlxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIGFuIGVudGl0eS5cbiAgICogU2FtZSBhcyBlbnRpdHkuZGVzdHJveSgpLlxuICAgKi9cbiAgZGVzdHJveUVudGl0eShlbnRpdHlJZDogRW50aXR5SWQpOiBXb3JsZDxDVD4ge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZGVsZXRlKGVudGl0eUlkKTtcbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChlbnRpdHlJZCk7XG5cbiAgICBpZiAoIWVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB3b3JsZC5kZXN0cm95RW50aXR5OiBObyBlbnRpdHkgZm91bmQuIGVudGl0eSBpZDogJHtlbnRpdHlJZH1gKTtcbiAgICB9XG5cbiAgICB0aGlzLmVudGl0aWVzLmRlbGV0ZShlbnRpdHlJZCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVudGl0eUlkKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVudGl0eUlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgYW55IHRhZyBhc3NvY2lhdGlvbnMgd2l0aCBkZXN0cm95ZWQgZW50aXRpZXMuXG4gICAgZm9yIChjb25zdCBbdGFnLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeVRhZ3MpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVudGl0eUlkKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVudGl0eUlkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXNCeVRhZ3MuZGVsZXRlKHRhZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKlxuICBUT0RPOiB3b3JsZC5kZXN0cm95KCkgYW5kIHdvcmxkLmRlc3Ryb3lJbW1lZGlhdGVseSgpIG1ldGhvZHMuXG4gICovXG59XG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyB0cmFja0NvbXBvbmVudCB9IGZyb20gJy4vVHJhY2tlZENvbXBvbmVudCc7XG5pbXBvcnQgRW50aXR5IGZyb20gJy4vRW50aXR5JztcblxuZXhwb3J0IHtcbiAgV29ybGQsXG4gIHRyYWNrQ29tcG9uZW50LFxuICBFbnRpdHksXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')}])}));