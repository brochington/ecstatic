!function(Q,B){"object"==typeof exports&&"object"==typeof module?module.exports=B():"function"==typeof define&&define.amd?define("ecstatic",[],B):"object"==typeof exports?exports.ecstatic=B():Q.ecstatic=B()}(window,(function(){return function(Q){var B=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(Q,n){!function(Q,B){if(!R[Q]||!x[Q])return;for(var n in x[Q]=!1,B)Object.prototype.hasOwnProperty.call(B,n)&&(b[n]=B[n]);0==--G&&0===u&&X()}(Q,n),B&&B(Q,n)};var n,t=!0,F="5013f8f181fb5d4848f6",e={},U=[],I=[];function s(Q){var B=r[Q];if(!B)return m;var t=function(t){return B.hot.active?(r[t]?-1===r[t].parents.indexOf(Q)&&r[t].parents.push(Q):(U=[Q],n=t),-1===B.children.indexOf(t)&&B.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+Q),U=[]),m(t)},F=function(Q){return{configurable:!0,enumerable:!0,get:function(){return m[Q]},set:function(B){m[Q]=B}}};for(var e in m)Object.prototype.hasOwnProperty.call(m,e)&&"e"!==e&&"t"!==e&&Object.defineProperty(t,e,F(e));return t.e=function(Q){return"ready"===i&&g("prepare"),u++,m.e(Q).then(B,(function(Q){throw B(),Q}));function B(){u--,"prepare"===i&&(y[Q]||Z(Q),0===u&&0===G&&X())}},t.t=function(Q,B){return 1&B&&(Q=t(Q)),m.t(Q,-2&B)},t}function l(B){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==B,active:!0,accept:function(Q,B){if(void 0===Q)t._selfAccepted=!0;else if("function"==typeof Q)t._selfAccepted=Q;else if("object"==typeof Q)for(var n=0;n<Q.length;n++)t._acceptedDependencies[Q[n]]=B||function(){};else t._acceptedDependencies[Q]=B||function(){}},decline:function(Q){if(void 0===Q)t._selfDeclined=!0;else if("object"==typeof Q)for(var B=0;B<Q.length;B++)t._declinedDependencies[Q[B]]=!0;else t._declinedDependencies[Q]=!0},dispose:function(Q){t._disposeHandlers.push(Q)},addDisposeHandler:function(Q){t._disposeHandlers.push(Q)},removeDisposeHandler:function(Q){var B=t._disposeHandlers.indexOf(Q);B>=0&&t._disposeHandlers.splice(B,1)},invalidate:function(){switch(this._selfInvalidated=!0,i){case"idle":(b={})[B]=Q[B],g("ready");break;case"ready":N(B);break;case"prepare":case"check":case"dispose":case"apply":(o=o||[]).push(B)}},check:V,apply:E,status:function(Q){if(!Q)return i;c.push(Q)},addStatusHandler:function(Q){c.push(Q)},removeStatusHandler:function(Q){var B=c.indexOf(Q);B>=0&&c.splice(B,1)},data:e[B]};return n=void 0,t}var c=[],i="idle";function g(Q){i=Q;for(var B=0;B<c.length;B++)c[B].call(null,Q)}var d,b,C,o,G=0,u=0,y={},x={},R={};function a(Q){return+Q+""===Q?+Q:Q}function V(Q){if("idle"!==i)throw new Error("check() is only allowed in idle status");return t=Q,g("check"),(B=1e4,B=B||1e4,new Promise((function(Q,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var t=new XMLHttpRequest,F=m.p+"hot/hot-update.json";t.open("GET",F,!0),t.timeout=B,t.send(null)}catch(Q){return n(Q)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)n(new Error("Manifest request to "+F+" timed out."));else if(404===t.status)Q();else if(200!==t.status&&304!==t.status)n(new Error("Manifest request to "+F+" failed."));else{try{var B=JSON.parse(t.responseText)}catch(Q){return void n(Q)}Q(B)}}}))).then((function(Q){if(!Q)return g(L()?"ready":"idle"),null;x={},y={},R=Q.c,C=Q.h,g("prepare");var B=new Promise((function(Q,B){d={resolve:Q,reject:B}}));b={};return Z(0),"prepare"===i&&0===u&&0===G&&X(),B}));var B}function Z(Q){var B;R[Q]?(x[Q]=!0,G++,(B=document.createElement("script")).charset="utf-8",B.src=m.p+"hot/hot-update.js",document.head.appendChild(B)):y[Q]=!0}function X(){g("ready");var Q=d;if(d=null,Q)if(t)Promise.resolve().then((function(){return E(t)})).then((function(B){Q.resolve(B)}),(function(B){Q.reject(B)}));else{var B=[];for(var n in b)Object.prototype.hasOwnProperty.call(b,n)&&B.push(a(n));Q.resolve(B)}}function E(B){if("ready"!==i)throw new Error("apply() is only allowed in ready status");return function B(t){var I,s,l,c,i;function d(Q){for(var B=[Q],n={},t=B.map((function(Q){return{chain:[Q],id:Q}}));t.length>0;){var F=t.pop(),e=F.id,U=F.chain;if((c=r[e])&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:U,moduleId:e};if(c.hot._main)return{type:"unaccepted",chain:U,moduleId:e};for(var I=0;I<c.parents.length;I++){var s=c.parents[I],l=r[s];if(l){if(l.hot._declinedDependencies[e])return{type:"declined",chain:U.concat([s]),moduleId:e,parentId:s};-1===B.indexOf(s)&&(l.hot._acceptedDependencies[e]?(n[s]||(n[s]=[]),G(n[s],[e])):(delete n[s],B.push(s),t.push({chain:U.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:Q,outdatedModules:B,outdatedDependencies:n}}function G(Q,B){for(var n=0;n<B.length;n++){var t=B[n];-1===Q.indexOf(t)&&Q.push(t)}}L();var u={},y=[],x={},V=function(){console.warn("[HMR] unexpected require("+X.moduleId+") to disposed module")};for(var Z in b)if(Object.prototype.hasOwnProperty.call(b,Z)){var X;i=a(Z),X=b[Z]?d(i):{type:"disposed",moduleId:Z};var E=!1,N=!1,W=!1,p="";switch(X.chain&&(p="\nUpdate propagation: "+X.chain.join(" -> ")),X.type){case"self-declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(E=new Error("Aborted because of self decline: "+X.moduleId+p));break;case"declined":t.onDeclined&&t.onDeclined(X),t.ignoreDeclined||(E=new Error("Aborted because of declined dependency: "+X.moduleId+" in "+X.parentId+p));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(X),t.ignoreUnaccepted||(E=new Error("Aborted because "+i+" is not accepted"+p));break;case"accepted":t.onAccepted&&t.onAccepted(X),N=!0;break;case"disposed":t.onDisposed&&t.onDisposed(X),W=!0;break;default:throw new Error("Unexception type "+X.type)}if(E)return g("abort"),Promise.reject(E);if(N)for(i in x[i]=b[i],G(y,X.outdatedModules),X.outdatedDependencies)Object.prototype.hasOwnProperty.call(X.outdatedDependencies,i)&&(u[i]||(u[i]=[]),G(u[i],X.outdatedDependencies[i]));W&&(G(y,[X.moduleId]),x[i]=V)}var A,h=[];for(s=0;s<y.length;s++)i=y[s],r[i]&&r[i].hot._selfAccepted&&x[i]!==V&&!r[i].hot._selfInvalidated&&h.push({module:i,parents:r[i].parents.slice(),errorHandler:r[i].hot._selfAccepted});g("dispose"),Object.keys(R).forEach((function(Q){!1===R[Q]&&function(Q){delete installedChunks[Q]}(Q)}));var D,S,H=y.slice();for(;H.length>0;)if(i=H.pop(),c=r[i]){var Y={},v=c.hot._disposeHandlers;for(l=0;l<v.length;l++)(I=v[l])(Y);for(e[i]=Y,c.hot.active=!1,delete r[i],delete u[i],l=0;l<c.children.length;l++){var J=r[c.children[l]];J&&((A=J.parents.indexOf(i))>=0&&J.parents.splice(A,1))}}for(i in u)if(Object.prototype.hasOwnProperty.call(u,i)&&(c=r[i]))for(S=u[i],l=0;l<S.length;l++)D=S[l],(A=c.children.indexOf(D))>=0&&c.children.splice(A,1);g("apply"),void 0!==C&&(F=C,C=void 0);for(i in b=void 0,x)Object.prototype.hasOwnProperty.call(x,i)&&(Q[i]=x[i]);var k=null;for(i in u)if(Object.prototype.hasOwnProperty.call(u,i)&&(c=r[i])){S=u[i];var z=[];for(s=0;s<S.length;s++)if(D=S[s],I=c.hot._acceptedDependencies[D]){if(-1!==z.indexOf(I))continue;z.push(I)}for(s=0;s<z.length;s++){I=z[s];try{I(S)}catch(Q){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:i,dependencyId:S[s],error:Q}),t.ignoreErrored||k||(k=Q)}}}for(s=0;s<h.length;s++){var T=h[s];i=T.module,U=T.parents,n=i;try{m(i)}catch(Q){if("function"==typeof T.errorHandler)try{T.errorHandler(Q)}catch(B){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:i,error:B,originalError:Q}),t.ignoreErrored||k||(k=B),k||(k=Q)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:i,error:Q}),t.ignoreErrored||k||(k=Q)}}if(k)return g("fail"),Promise.reject(k);if(o)return B(t).then((function(Q){return y.forEach((function(B){Q.indexOf(B)<0&&Q.push(B)})),Q}));return g("idle"),new Promise((function(Q){Q(y)}))}(B=B||{})}function L(){if(o)return b||(b={}),o.forEach(N),o=void 0,!0}function N(B){Object.prototype.hasOwnProperty.call(b,B)||(b[B]=Q[B])}var r={};function m(B){if(r[B])return r[B].exports;var n=r[B]={i:B,l:!1,exports:{},hot:l(B),parents:(I=U,U=[],I),children:[]};return Q[B].call(n.exports,n,n.exports,s(B)),n.l=!0,n.exports}return m.m=Q,m.c=r,m.d=function(Q,B,n){m.o(Q,B)||Object.defineProperty(Q,B,{enumerable:!0,get:n})},m.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},m.t=function(Q,B){if(1&B&&(Q=m(Q)),8&B)return Q;if(4&B&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var n=Object.create(null);if(m.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:Q}),2&B&&"string"!=typeof Q)for(var t in Q)m.d(n,t,function(B){return Q[B]}.bind(null,t));return n},m.n=function(Q){var B=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return m.d(B,"a",B),B},m.o=function(Q,B){return Object.prototype.hasOwnProperty.call(Q,B)},m.p="/static/",m.h=function(){return F},s(0)(m.s=0)}([function(Q,B,n){Q.exports=n(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "trackComponent", function() { return /* reexport */ trackComponent; });\n\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/regex.js\n/* harmony default export */ var regex = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/validate.js\n\n\nfunction validate(uuid) {\n  return typeof uuid === \'string\' && regex.test(uuid);\n}\n\n/* harmony default export */ var esm_browser_validate = (validate);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/stringify.js\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var stringify_i = 0; stringify_i < 256; ++stringify_i) {\n  byteToHex.push((stringify_i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \'-\' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \'-\' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \'-\' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \'-\' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it\'s likely due to one\n  // of the following:\n  // - One or more input array values don\'t map to a hex octet (leading to\n  // "undefined" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!esm_browser_validate(uuid)) {\n    throw TypeError(\'Stringified UUID is invalid\');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ var esm_browser_stringify = (stringify);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_stringify(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/guards.ts\nfunction isComponentInstance(Class, comp) {\n  if (!comp) {\n    return false;\n  }\n\n  if (!(comp instanceof Class)) {\n    return false;\n  }\n\n  return true;\n}\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n// CT is a Union, like `type = FirstComponent | SecondComponent`.\nclass ComponentCollection_ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.constructor.name, component);\n    });\n\n    _defineProperty(this, "update", (cl, func) => {\n      const c = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, c)) {\n        const updatedComponent = func(c);\n        this.components.set(cl.name, updatedComponent);\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      this.components.delete(cType.name);\n    });\n\n    _defineProperty(this, "get", cl => {\n      const comp = this.components.get(cl.name);\n\n      if (isComponentInstance(cl, comp)) {\n        return comp;\n      } else {\n        throw new Error(`ComponentCollection does not have component of type ${cl.name}`);\n      }\n    });\n\n    _defineProperty(this, "has", cType => {\n      return Array.isArray(cType) ? cType.every(ct => this.components.has(ct.name) === true) : this.components.has(cType.name);\n    });\n\n    _defineProperty(this, "hasByName", cName => {\n      return Array.isArray(cName) ? cName.every(ct => this.components.has(ct) === true) : this.components.has(cName);\n    });\n  }\n\n  /**\n   * Get the component type names that are currently being used in the collection.\n   */\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n  /**\n   * Get the current number of components that are in the collection.\n   */\n\n\n  get size() {\n    return this.components.size;\n  }\n\n  toDevComponents() {\n    const obj = {};\n\n    for (const [compName, comp] of this.components) {\n      obj[compName] = comp;\n    }\n\n    return obj;\n  }\n\n}\n// CONCATENATED MODULE: ./src/DevEntity.ts\nfunction DevEntity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass DevEntity {\n  constructor(entity, world) {\n    DevEntity_defineProperty(this, "id", void 0);\n\n    DevEntity_defineProperty(this, "components", void 0);\n\n    DevEntity_defineProperty(this, "tags", void 0);\n\n    DevEntity_defineProperty(this, "systems", []);\n\n    this.id = entity.id;\n    this.components = entity.components.toDevComponents(), this.tags = [...entity.tags];\n    const compNames = Object.keys(this.components);\n\n    for (const [systemName, cNames] of world.systems.compNamesBySystemName) {\n      if (cNames.every(cName => compNames.includes(cName))) {\n        this.systems.push(systemName);\n      }\n    }\n  }\n\n  toTableRow() {\n    return {\n      id: this.id,\n      components: Object.keys(this.components).join(", "),\n      tags: this.tags.join(", "),\n      systems: this.systems.join(\', \')\n    };\n  }\n\n}\n\n/* harmony default export */ var src_DevEntity = (DevEntity);\n// CONCATENATED MODULE: ./src/SimpleFSM.ts\nfunction SimpleFSM_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass SimpleFSM {\n  constructor(initialState, transitions) {\n    SimpleFSM_defineProperty(this, "current", void 0);\n\n    SimpleFSM_defineProperty(this, "inital", void 0);\n\n    SimpleFSM_defineProperty(this, "transitions", void 0);\n\n    this.inital = initialState;\n    this.current = initialState;\n    this.transitions = transitions;\n  }\n\n  next(data) {\n    if (this.transitions[this.current]) {\n      this.current = this.transitions[this.current](data, this.current);\n    }\n  }\n\n  reset() {\n    this.current = this.inital;\n  }\n\n  is(checkState) {\n    return this.current === checkState;\n  }\n\n}\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nclass Entity_Entity {\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n\n  get state() {\n    return this._state.current;\n  }\n\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    Entity_defineProperty(this, "_error", void 0);\n\n    Entity_defineProperty(this, "_state", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    this._error = null;\n\n    const fsmTransition = ns => {\n      if (ns === "error" || this._error) return "error";\n      return ns;\n    };\n\n    this._state = new SimpleFSM("creating", {\n      creating: fsmTransition,\n      created: fsmTransition,\n      destroying: fsmTransition,\n      destroyed: () => "destroyed",\n      error: () => "error"\n    });\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n\n    if (this._world.systems.compNamesBySystemName.size === 0) {\n      this._state.next(\'created\');\n    }\n  }\n  /* LifeCycle methods, meant to be overridden */\n\n\n  onCreate(world) {// abstract\n  }\n\n  onDestroy(world) {// abstract\n  }\n\n  onComponentAdd(args) {// abstract\n  }\n\n  onTrackedComponentUpdate(args) {// abstract\n  }\n\n  onComponentRemove(args) {// abstract\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.add(this._id, component);\n\n    return this;\n  }\n  /**\n   * Add a tag to a component\n   */\n\n\n  addTag(tag) {\n    const entitySet = this._world.entitiesByTags.has(tag) ? this._world.entitiesByTags.get(tag) : new Set();\n\n    if (entitySet) {\n      entitySet.add(this._id);\n\n      this._world.entitiesByTags.set(tag, entitySet);\n    }\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Check to see if an entity tagged with a given tag.\n   */\n\n\n  hasTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        return entitySet.has(this._id);\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cl) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n    const component = cc.get(cl);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n  /**\n   * Remove a component from an entity.\n   * @param cType A component class, eg MyComponent\n   */\n\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /**\n   * Remove a tag from an entity\n   */\n\n\n  removeTag(tag) {\n    if (this._world.entitiesByTags.has(tag)) {\n      const entitySet = this._world.entitiesByTags.get(tag);\n\n      if (entitySet) {\n        entitySet.delete(this._id);\n\n        if (entitySet.size === 0) {\n          this._world.entitiesByTags.delete(tag);\n        }\n      }\n    }\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n  /**\n   * Remove all tags on an entity\n   */\n\n\n  clearTags() {\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      entitySet.delete(this._id);\n\n      if (entitySet.size === 0) {\n        this._world.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Sets the state of the entity to \'created\'. that\'s it.\n   */\n\n\n  finishCreation() {\n    this._state.next(\'created\');\n  }\n  /**\n   * Destroy an entity. Actual destruction is deferred until after the next pass of systems.\n   * This gives the systems a chance to do any cleanup that might be needed.\n   */\n\n\n  destroy() {\n    // If no systems are added, the destroy immediately.\n    if (this._world.systems.compNamesBySystemName.size === 0) {\n      this.destroyImmediately();\n      return;\n    } // Mark as "destroying" so that systems can act on it before actually being destroyed.\n\n\n    this._state.next(\'destroying\');\n  }\n\n  destroyImmediately() {\n    // Right now calling before the actual destorying of the entity.\n    // Might want to change this to post destruction in the future, who knows.\n    this.onDestroy(this._world); // Actually destroy entity.\n\n    this._world.destroyEntity(this._id); // should return an error??\n\n\n    this._state.next(\'destroyed\');\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection_ComponentCollection();\n  }\n  /**\n   * Retrieves all the tags that have been added to this entity.\n   */\n\n\n  get tags() {\n    const tags = new Set();\n\n    for (const [tag, entitySet] of this._world.entitiesByTags.entries()) {\n      if (entitySet.has(this._id)) {\n        tags.add(tag);\n      }\n    }\n\n    return tags;\n  }\n  /**\n   * Convert Entity to a DevEntity. Very helpful in for debugging.\n   */\n\n\n  toDevEntity() {\n    return new src_DevEntity(this, this._world);\n  }\n\n}\n// CONCATENATED MODULE: ./src/DevTools.ts\nfunction DevTools_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass DevTools {\n  constructor(world) {\n    DevTools_defineProperty(this, "world", void 0);\n\n    this.world = world;\n  }\n  /**\n   * display the all systems of the world, and the components required by each system.\n   * Super helpful to use with console.table()\n   * @example\n   * ```\n   * console.table(world.dev.systemComponents);\n   * ```\n   */\n\n\n  get systemComponents() {\n    const compsBySystems = [];\n\n    for (const [system, compNames] of this.world.systems.compNamesBySystemName) {\n      compsBySystems.push({\n        system,\n        components: compNames.join(", ")\n      });\n    }\n\n    return compsBySystems;\n  }\n  /**\n   * Create an array of DevEntites. Can be very helpful for things like inspecting component state,\n   * and which systems will be called on an entity.\n   * @example\n   * ```\n   * console.table(world.dev.entities);\n   *\n   * // Pro tip! try displaying a table of entities with console.table and DevEntity.toTableRow().\n   * console.table(world.dev.entities.map(devEntity => devEntity.toTableRow()));\n   * ```\n   */\n\n\n  get entities() {\n    return [...this.world.entities.values()].map(e => e.toDevEntity());\n  }\n\n}\n\n/* harmony default export */ var src_DevTools = (DevTools);\n// CONCATENATED MODULE: ./src/Systems.ts\nfunction Systems_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n/**\n * Arguments that are passed into a System function on each iteration.\n * This is how you acces things like the entity that particular entity to act on,\n * as well as some other helpful params like if the entity is the first or last entity\n * in the group of entities that being iterated over.\n */\n\nclass Systems_Systems {\n  // double check to make sure that maps are ordered.\n  constructor(world) {\n    Systems_defineProperty(this, "world", void 0);\n\n    Systems_defineProperty(this, "systemFuncBySystemName", void 0);\n\n    Systems_defineProperty(this, "compNamesBySystemName", void 0);\n\n    this.world = world;\n    this.systemFuncBySystemName = new Map();\n    this.compNamesBySystemName = new Map();\n  }\n\n  add(cTypes, systemFunc, funcName) {\n    const cNames = cTypes.map(ct => ct.name);\n    let name = systemFunc.name;\n\n    if (systemFunc.name === \'\') {\n      // Super brute force, and might lead to errors in the future, but for now\n      // using the stringified system function if the function doesn\'t already have a name.\n      // This is useful for anonymous functions used as a system function.\n      // Might be good to figure out how to get a hash of the function string.\n      name = systemFunc.toString().slice(0, 30);\n    }\n\n    if (funcName) {\n      name = funcName;\n    }\n\n    this.systemFuncBySystemName.set(name, systemFunc);\n    this.compNamesBySystemName.set(name, cNames);\n    this.world.entitiesByCTypes.set(cNames, new Set());\n    return this;\n  }\n\n  run() {\n    // TODO: Might be cool to add a way to stop the systems loop when in dev.\n    //       Maybe something like world.dev.stop() or pause().\n    for (const [funcName, systemFunc] of this.systemFuncBySystemName.entries()) {\n      let index = 0;\n      const size = this.world.entitiesByCTypes.size;\n      const cNames = this.compNamesBySystemName.get(funcName) || [];\n      const cTypeArrs = this.world.entitiesByCTypes.get(cNames) || new Set();\n      const entitiesInCreatingState = [];\n      const entitiesInDestroyingState = [];\n\n      for (const entity of this.world.entities.values()) {\n        if (entity.state === \'creating\') {\n          entitiesInCreatingState.push(entity);\n        }\n\n        if (entity.state === \'destroying\') {\n          entitiesInDestroyingState.push(entity);\n        }\n      }\n\n      for (const eid of cTypeArrs) {\n        const args = {\n          entity: this.world.entities.get(eid) || new Entity_Entity(this.world),\n          components: this.world.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(),\n          world: this.world,\n          index,\n          size,\n          isFirst: index === 0,\n          isLast: index + 1 === size\n        };\n        systemFunc(args);\n        index += 1;\n      }\n\n      for (const entity of entitiesInCreatingState) {\n        entity.finishCreation();\n      }\n\n      for (const entity of entitiesInDestroyingState) {\n        entity.destroyImmediately();\n      }\n    }\n  }\n\n}\n// CONCATENATED MODULE: ./src/TrackedComponent.ts\n// Waiting for Typescript 4.2 to come out so that Symbols are supporded keys.\nconst TrackedCompSymbolKeys = {\n  isTracked: Symbol.for("ecs.trackedComponent.isTracked"),\n  world: Symbol.for("ecs.trackedComponent.world"),\n  entityIDs: Symbol.for("ecs.trackedComponent.entityIDs"),\n  getEntities: Symbol.for("ecs.trackedComponent.getEntities"),\n  setWorld: Symbol.for("ecs.trackedComponent.setWorld"),\n  onAdd: Symbol.for("ecs.trackedComponent.onAdd"),\n  onUpdate: Symbol.for("ecs.trackedComponent.onUpdate"),\n  onRemove: Symbol.for("ecs.trackedComponent.onRemove")\n}; //@ts-ignore\n\nfunction createClassInstanceProxyHandlers(trackedEventHandlers) {\n  const updatedProps = new Set();\n  return {\n    set(component, property, value) {\n      updatedProps.add(property); //@ts-ignore\n\n      const world = component[TrackedCompSymbolKeys.world];\n      const previousVal = component[property];\n      component[property] = value; //@ts-ignore\n\n      const entities = component[TrackedCompSymbolKeys.getEntities](world);\n\n      for (const entity of entities.values()) {\n        entity.onTrackedComponentUpdate({\n          world,\n          component\n        });\n      }\n\n      if (trackedEventHandlers.onUpdate) {\n        trackedEventHandlers.onUpdate({\n          entities,\n          world,\n          component,\n          previousVal,\n          property\n        });\n      }\n\n      return true;\n    }\n\n  };\n}\n\nfunction trackComponent(CompClass, trackedEventHandlers) {\n  return new Proxy(CompClass, {\n    construct(Component, args) {\n      const component = new Component(...args); // For use in identifing a "tracked" class through the proxy.\n      //@ts-ignore\n\n      component[TrackedCompSymbolKeys.isTracked] = true; //@ts-ignore\n\n      component[TrackedCompSymbolKeys.setWorld] = world => {\n        //@ts-ignore\n        component[TrackedCompSymbolKeys.world] = world;\n      }; // Holds entities that this component has been added to.\n      // Added and removed in world.add()/world.remove().\n      //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.entityIDs] = new Set(); // Helper function to get the Entities from entityIDs\n      //@ts-ignore\n\n      component[TrackedCompSymbolKeys.getEntities] = world => {\n        const entities = new Map(); //@ts-ignore\n\n        for (const eid of component[TrackedCompSymbolKeys.entityIDs]) {\n          const entity = world.entities.get(eid);\n\n          if (entity) {\n            entities.set(eid, entity);\n          }\n        }\n\n        return entities;\n      }; //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.onAdd] = (world, entity) => {\n        if (trackedEventHandlers.onAdd) {\n          //@ts-ignore\n          const entities = component[TrackedCompSymbolKeys.getEntities](world);\n          trackedEventHandlers.onAdd({\n            component,\n            world,\n            entity,\n            entities\n          });\n        }\n      }; //@ts-ignore\n\n\n      component[TrackedCompSymbolKeys.onRemove] = (world, entity) => {\n        if (trackedEventHandlers.onRemove) {\n          //@ts-ignore\n          const entities = component[TrackedCompSymbolKeys.getEntities](world);\n          trackedEventHandlers.onRemove({\n            component,\n            world,\n            entity,\n            entities\n          });\n        }\n      };\n\n      return new Proxy(component, createClassInstanceProxyHandlers(trackedEventHandlers));\n    }\n\n  });\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "entitiesByTags", new Map());\n\n    World_defineProperty(this, "systems", void 0);\n\n    World_defineProperty(this, "dev", void 0);\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cl => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cl)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cl => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cl)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cl => {\n      const entity = this.locate(cl);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cl, predicate) => {\n      const entities = this.locateAll(cl); // const entities = this.locateAll((cl as unknown) as CT);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection_ComponentCollection();\n        const component = cc.get(cl);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cl => {\n      const entities = this.locateAll(cl);\n      return entities.map(entity => {\n        return {\n          entity,\n          component: entity.components.get(cl)\n        };\n      });\n    });\n\n    World_defineProperty(this, "get", (eid, cl) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      return cc.get(cl);\n    });\n\n    World_defineProperty(this, "getComponent", (cl, defaultValue) => {\n      const result = this.grab(cl);\n\n      if (!result) {\n        return defaultValue ? defaultValue : null;\n      }\n\n      return result.component;\n    });\n\n    World_defineProperty(this, "getTagged", tag => {\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        const entityId = tagEntityIds.values().next().value;\n        const entity = this.entities.get(entityId);\n\n        if (entity) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "getAllTagged", tag => {\n      let entities = []; // eslint-disable-line\n\n      const tagEntityIds = this.entitiesByTags.get(tag);\n\n      if (tagEntityIds) {\n        for (const entityId of tagEntityIds) {\n          const entity = this.entities.get(entityId);\n\n          if (entity) {\n            entities.push(entity);\n          }\n        }\n      }\n\n      return entities;\n    });\n\n    World_defineProperty(this, "add", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection();\n      const entity = this.entities.get(eid);\n\n      if (!entity) {\n        throw new Error(`world.add: Unable to locate entity with id ${eid}`);\n      }\n\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      } // @ts-ignore\n\n\n      if (component[TrackedCompSymbolKeys.isTracked]) {\n        // @ts-ignore\n        component[TrackedCompSymbolKeys.setWorld](this); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.entityIDs].add(eid); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.onAdd](this, entity);\n      }\n\n      entity.onComponentAdd({\n        world: this,\n        component\n      });\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection_ComponentCollection(); // need to get component instance...\n\n      const component = cc.get(cType); // @ts-ignore\n\n      if (component[TrackedCompSymbolKeys.isTracked]) {\n        const entity = this.entities.get(eid);\n\n        if (!entity) {\n          throw new Error(`world.remove: Unable to locate entity. eid: ${eid}, cType: ${cType.name}`);\n        } // @ts-ignore\n\n\n        component[TrackedCompSymbolKeys.entityIDs].delete(eid); // @ts-ignore\n\n        component[TrackedCompSymbolKeys.onRemove](this, entity);\n      } // remove entity from current entitiesByCTypes\n\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.hasByName)) {\n          entitySet.add(eid);\n        }\n      }\n\n      const entity = this.entities.get(eid);\n\n      if (entity) {\n        entity.onComponentRemove({\n          world: this,\n          component\n        });\n      }\n\n      return this;\n    });\n\n    this.dev = new src_DevTools(this);\n    this.systems = new Systems_Systems(this);\n  }\n  /**\n   * "finds" a single entity based on a predicate\n   */\n\n\n  /**\n   * Alternative method for adding systems.\n   */\n  addSystem(cTypes, systemFunc, funcName) {\n    this.systems.add(cTypes, systemFunc, funcName);\n    return this;\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection_ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    entity.onCreate(this);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(entityId) {\n    this.componentCollections.set(entityId, new ComponentCollection_ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Create an entity that is in the world.\n   * Basically just new Entity(world), but saves an import of Entity.\n   */\n\n\n  createEntity() {\n    const entity = new Entity_Entity(this);\n    return entity; // Register entity here....\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(entityId) {\n    this.componentCollections.delete(entityId);\n    const entity = this.entities.get(entityId);\n\n    if (!entity) {\n      throw new Error(`world.destroyEntity: No entity found. entity id: ${entityId}`);\n    }\n\n    this.entities.delete(entityId);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n    } // remove any tag associations with destroyed entities.\n\n\n    for (const [tag, entitySet] of this.entitiesByTags) {\n      if (entitySet.has(entityId)) {\n        entitySet.delete(entityId);\n      }\n\n      if (entitySet.size === 0) {\n        this.entitiesByTags.delete(tag);\n      }\n    }\n\n    return this;\n  }\n\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzPzQwZDYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3ZhbGlkYXRlLmpzPzA2ZTQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcz81OGNmIiwid2VicGFjazovL2Vjc3RhdGljLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcz9lYzI2Iiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL2d1YXJkcy50cz8zYjU3Iiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL0NvbXBvbmVudENvbGxlY3Rpb24udHM/NTFjNCIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9EZXZFbnRpdHkudHM/ZDE0MiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9TaW1wbGVGU00udHM/NDY5OSIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9FbnRpdHkudHM/YWM2OCIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9EZXZUb29scy50cz9lMDFhIiwid2VicGFjazovL2Vjc3RhdGljLy4vc3JjL1N5c3RlbXMudHM/YTYxMyIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9UcmFja2VkQ29tcG9uZW50LnRzP2JhMjciLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9pbmRleC50cz9mZmI0Il0sIm5hbWVzIjpbImlzQ29tcG9uZW50SW5zdGFuY2UiLCJDbGFzcyIsImNvbXAiLCJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsImNvbnN0cnVjdG9yIiwibmFtZSIsImNsIiwiZnVuYyIsImMiLCJnZXQiLCJ1cGRhdGVkQ29tcG9uZW50IiwiY1R5cGUiLCJkZWxldGUiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImV2ZXJ5IiwiY3QiLCJoYXMiLCJjTmFtZSIsImNvbXBvbmVudFR5cGVzIiwia2V5cyIsInNpemUiLCJ0b0RldkNvbXBvbmVudHMiLCJvYmoiLCJjb21wTmFtZSIsIkRldkVudGl0eSIsImVudGl0eSIsIndvcmxkIiwiaWQiLCJ0YWdzIiwiY29tcE5hbWVzIiwiT2JqZWN0Iiwic3lzdGVtTmFtZSIsImNOYW1lcyIsInN5c3RlbXMiLCJjb21wTmFtZXNCeVN5c3RlbU5hbWUiLCJpbmNsdWRlcyIsInB1c2giLCJ0b1RhYmxlUm93Iiwiam9pbiIsIlNpbXBsZUZTTSIsImluaXRpYWxTdGF0ZSIsInRyYW5zaXRpb25zIiwiaW5pdGFsIiwiY3VycmVudCIsIm5leHQiLCJkYXRhIiwicmVzZXQiLCJpcyIsImNoZWNrU3RhdGUiLCJFbnRpdHkiLCJfaWQiLCJfd29ybGQiLCJzdGF0ZSIsIl9zdGF0ZSIsInV1aWR2NCIsIl9lcnJvciIsImZzbVRyYW5zaXRpb24iLCJucyIsImNyZWF0aW5nIiwiY3JlYXRlZCIsImRlc3Ryb3lpbmciLCJkZXN0cm95ZWQiLCJlcnJvciIsInJlZ2lzdGVyRW50aXR5Iiwib25DcmVhdGUiLCJvbkRlc3Ryb3kiLCJvbkNvbXBvbmVudEFkZCIsImFyZ3MiLCJvblRyYWNrZWRDb21wb25lbnRVcGRhdGUiLCJvbkNvbXBvbmVudFJlbW92ZSIsImFkZCIsImFkZFRhZyIsInRhZyIsImVudGl0eVNldCIsImVudGl0aWVzQnlUYWdzIiwiU2V0IiwiY2MiLCJjb21wb25lbnRDb2xsZWN0aW9ucyIsImhhc1RhZyIsImdldEFsbCIsInJlbW92ZSIsInJlbW92ZVRhZyIsImNsZWFyIiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiY2xlYXJUYWdzIiwiZW50cmllcyIsImZpbmlzaENyZWF0aW9uIiwiZGVzdHJveSIsImRlc3Ryb3lJbW1lZGlhdGVseSIsImRlc3Ryb3lFbnRpdHkiLCJ0b0RldkVudGl0eSIsIkRldlRvb2xzIiwic3lzdGVtQ29tcG9uZW50cyIsImNvbXBzQnlTeXN0ZW1zIiwic3lzdGVtIiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJtYXAiLCJlIiwiU3lzdGVtcyIsInN5c3RlbUZ1bmNCeVN5c3RlbU5hbWUiLCJjVHlwZXMiLCJzeXN0ZW1GdW5jIiwiZnVuY05hbWUiLCJ0b1N0cmluZyIsInNsaWNlIiwiZW50aXRpZXNCeUNUeXBlcyIsInJ1biIsImluZGV4IiwiY1R5cGVBcnJzIiwiZW50aXRpZXNJbkNyZWF0aW5nU3RhdGUiLCJlbnRpdGllc0luRGVzdHJveWluZ1N0YXRlIiwiZWlkIiwiaXNGaXJzdCIsImlzTGFzdCIsIlRyYWNrZWRDb21wU3ltYm9sS2V5cyIsImlzVHJhY2tlZCIsIlN5bWJvbCIsImZvciIsImVudGl0eUlEcyIsImdldEVudGl0aWVzIiwic2V0V29ybGQiLCJvbkFkZCIsIm9uVXBkYXRlIiwib25SZW1vdmUiLCJjcmVhdGVDbGFzc0luc3RhbmNlUHJveHlIYW5kbGVycyIsInRyYWNrZWRFdmVudEhhbmRsZXJzIiwidXBkYXRlZFByb3BzIiwicHJvcGVydHkiLCJ2YWx1ZSIsInByZXZpb3VzVmFsIiwidHJhY2tDb21wb25lbnQiLCJDb21wQ2xhc3MiLCJQcm94eSIsImNvbnN0cnVjdCIsIkNvbXBvbmVudCIsIldvcmxkIiwicHJlZGljYXRlIiwicmVzdWx0cyIsImxvY2F0ZSIsImxvY2F0ZUFsbCIsImRlZmF1bHRWYWx1ZSIsInJlc3VsdCIsImdyYWIiLCJ0YWdFbnRpdHlJZHMiLCJlbnRpdHlJZCIsImN0QXJyIiwiaGFzQnlOYW1lIiwiZGV2IiwiYWRkU3lzdGVtIiwiY3JlYXRlRW50aXR5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7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LEVBQU1DLFNBQU4sQ0FBWCxJQUErQixLQUFLQyxjQUFwQyxFQUFvRDtBQUNsRCxVQUFJRCxTQUFTLENBQUN6RCxHQUFWLENBQWNpSSxRQUFkLENBQUosRUFBNkI7QUFDM0J4RSxpQkFBUyxDQUFDL0QsTUFBVixDQUFpQnVJLFFBQWpCO0FBQ0Q7O0FBRUQsVUFBSXhFLFNBQVMsQ0FBQ3JELElBQVYsS0FBbUIsQ0FBdkIsRUFBMEI7QUFDeEIsYUFBS3NELGNBQUwsQ0FBb0JoRSxNQUFwQixDQUEyQjhELEdBQTNCO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLElBQVA7QUFDRDs7QUF0WTRCLEM7O0FDVi9CO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxudmFyIGdldFJhbmRvbVZhbHVlcztcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLiBBbHNvLFxuICAgIC8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcG9uZW50SW5zdGFuY2U8VD4oXG4gIENsYXNzOiBuZXcgKC4uLmFyZ3M6IGFueSkgPT4gVCxcbiAgY29tcDogYW55XG4pOiBjb21wIGlzIEluc3RhbmNlVHlwZTx0eXBlb2YgQ2xhc3M+IHtcbiAgaWYgKCFjb21wKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCEoY29tcCBpbnN0YW5jZW9mIENsYXNzKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIiwiaW1wb3J0IHsgaXNDb21wb25lbnRJbnN0YW5jZSB9IGZyb20gXCIuL2d1YXJkc1wiO1xuXG50eXBlIENvbXBOYW1lID0gc3RyaW5nO1xudHlwZSBDbGFzc0NvbnN0cnVjdG9yPFQ+ID0geyBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVCB9O1xuXG4vLyBDVCBpcyBhIFVuaW9uLCBsaWtlIGB0eXBlID0gRmlyc3RDb21wb25lbnQgfCBTZWNvbmRDb21wb25lbnRgLlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICBjb21wb25lbnRzOiBNYXA8Q29tcE5hbWUsIENUPiA9IG5ldyBNYXAoKTtcblxuICAvLyBpbnN0YW5jZSBvZiBhIGNvbXBvbmVudFxuICAvLyBhZGQgPSAoY29tcG9uZW50OiBJbnN0YW5jZVR5cGU8Q1Rba2V5b2YgQ1RdPik6IHZvaWQgPT4ge1xuICBhZGQgPSAoY29tcG9uZW50OiBDVCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5zZXQoKDxhbnk+Y29tcG9uZW50KS5jb25zdHJ1Y3Rvci5uYW1lLCBjb21wb25lbnQpO1xuICB9O1xuXG4gIHVwZGF0ZSA9IDxUIGV4dGVuZHMgQ1Q+KFxuICAgIGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+LFxuICAgIGZ1bmM6IChjOiBUKSA9PiBUXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbXBvbmVudHMuZ2V0KGNsLm5hbWUpO1xuXG4gICAgaWYgKGlzQ29tcG9uZW50SW5zdGFuY2UoY2wsIGMpKSB7XG4gICAgICBjb25zdCB1cGRhdGVkQ29tcG9uZW50ID0gZnVuYyhjKTtcbiAgICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY2wubmFtZSwgdXBkYXRlZENvbXBvbmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjb21wb25lbnQuXG4gICAqIEBwYXJhbSBjVHlwZSBDbGFzcyBvZiBjb21wb25lbnQgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcmVtb3ZlID0gKGNUeXBlOiBDbGFzc0NvbnN0cnVjdG9yPENUPik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5kZWxldGUoY1R5cGUubmFtZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhIGNvbXBvbmVudCB0aGF0IG1hdGNoZXMgdGhlIHBhc3NlZCBjbGFzcy5cbiAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBpZiBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gY29tcG9uZW50XG4gICAqIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIHNvIGlmIHlvdSBkb24ndCBrbm93IGlmIGl0J3Mgc2FmZVxuICAgKiB0byBnZXQgYSBjb21wb25lbnQsIHlvdSBzaG91bGQgdGVzdCB3aXRoIGhhcygpIG9yIGhhc0J5TmFtZSgpIGZpcnN0LlxuICAgKiBZb3UgaGF2ZSBiZWVuIHdhcm5lZC5cbiAgICogQHBhcmFtIGNsIGNvbXBvbmVudCBDbGFzcyByZWZlcmVuY2UuXG4gICAqL1xuICBnZXQgPSA8VCBleHRlbmRzIENUPihjbDogQ2xhc3NDb25zdHJ1Y3RvcjxUPik6IFQgPT4ge1xuICAgIGNvbnN0IGNvbXAgPSB0aGlzLmNvbXBvbmVudHMuZ2V0KGNsLm5hbWUpO1xuXG4gICAgaWYgKGlzQ29tcG9uZW50SW5zdGFuY2U8VD4oY2wsIGNvbXApKSB7XG4gICAgICByZXR1cm4gY29tcDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ29tcG9uZW50Q29sbGVjdGlvbiBkb2VzIG5vdCBoYXZlIGNvbXBvbmVudCBvZiB0eXBlICR7Y2wubmFtZX1gXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVGVzdCB0byBzZWUgaWYgdGhlIGNvbGxlY3Rpb24gY29udGFpbnMgYSBzcGVjaWZpYyBDbGFzcyBvciBDbGFzc2VzLlxuICAgKiBAcGFyYW0gY1R5cGUgY29tcG9uZW50IENsYXNzLCBvciBhcnJheSBvZiBjb21wb25lbnQgQ2xhc3Nlcy5cbiAgICovXG4gIGhhcyA9IChjVHlwZTogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4gfCBDbGFzc0NvbnN0cnVjdG9yPENUPltdKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY1R5cGUpXG4gICAgICA/IGNUeXBlLmV2ZXJ5KChjdCkgPT4gdGhpcy5jb21wb25lbnRzLmhhcyhjdC5uYW1lKSA9PT0gdHJ1ZSlcbiAgICAgIDogdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZS5uYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVzdCB0byBzZWUgaWYgdGhlIGNvbGxlY3Rpb24gaGFzIGEgY29tcG9uZW50IGluc3RhbmNlIGJhc2VkIG9uIGFcbiAgICogY2xhc3MgbmFtZS4gU29tZSBidWlsZCBzdGVwcy9taW5pZmllcnMgd2lsbCBjaGFuZ2UgdGhlIG5hbWUgb2YgQ2xhc3NlcyxcbiAgICogc28gaXQncyB1c3VhbGx5IGJlc3QgdG8gcGFzcyBpbiBhIE15Q2xhc3MubmFtZSBpbnN0ZWFkIG9mICdNeUNsYXNzJy5cbiAgICogQHBhcmFtIGNOYW1lIFRoZSBuYW1lIG9mIGEgQ2xhc3MsIG9yIGFycmF5IG9mIENsYXNzIG5hbWVzLlxuICAgKi9cbiAgaGFzQnlOYW1lID0gKGNOYW1lOiBzdHJpbmcgfCBzdHJpbmdbXSk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGNOYW1lKVxuICAgICAgPyBjTmFtZS5ldmVyeShjdCA9PiB0aGlzLmNvbXBvbmVudHMuaGFzKGN0KSA9PT0gdHJ1ZSlcbiAgICAgIDogdGhpcy5jb21wb25lbnRzLmhhcyhjTmFtZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29tcG9uZW50IHR5cGUgbmFtZXMgdGhhdCBhcmUgY3VycmVudGx5IGJlaW5nIHVzZWQgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqL1xuICBnZXQgY29tcG9uZW50VHlwZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5jb21wb25lbnRzLmtleXMoKV07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiBjb21wb25lbnRzIHRoYXQgYXJlIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgKi9cbiAgZ2V0IHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLnNpemU7XG4gIH1cblxuICB0b0RldkNvbXBvbmVudHMoKTogUmVjb3JkPHN0cmluZywgQ1Q+IHtcbiAgICBjb25zdCBvYmo6IFJlY29yZDxzdHJpbmcsIENUPiA9IHt9O1xuICAgIGZvciAoY29uc3QgW2NvbXBOYW1lLCBjb21wXSBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIG9ialtjb21wTmFtZV0gPSBjb21wO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cbn1cbiIsImltcG9ydCBXb3JsZCBmcm9tIFwiLi9Xb3JsZFwiO1xuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9FbnRpdHlcIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuXG5pbnRlcmZhY2UgRGV2RW50aXR5VGFibGVSb3cge1xuICBpZDogc3RyaW5nO1xuICBjb21wb25lbnRzOiBzdHJpbmc7XG4gIHRhZ3M6IHN0cmluZztcbiAgc3lzdGVtczogc3RyaW5nO1xufVxuXG5jbGFzcyBEZXZFbnRpdHk8Q1Q+IHtcbiAgaWQ6IHN0cmluZztcblxuICBjb21wb25lbnRzOiBSZWNvcmQ8c3RyaW5nLCBDVD47XG5cbiAgdGFnczogVGFnW107XG5cbiAgc3lzdGVtczogc3RyaW5nW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihlbnRpdHk6IEVudGl0eTxDVD4sIHdvcmxkOiBXb3JsZDxDVD4pIHtcbiAgICB0aGlzLmlkID0gZW50aXR5LmlkO1xuICAgIHRoaXMuY29tcG9uZW50cyA9IGVudGl0eS5jb21wb25lbnRzLnRvRGV2Q29tcG9uZW50cygpLFxuICAgIHRoaXMudGFncyA9IFsuLi5lbnRpdHkudGFnc107XG5cbiAgICBjb25zdCBjb21wTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudHMpO1xuXG4gICAgZm9yIChjb25zdCBbc3lzdGVtTmFtZSwgY05hbWVzXSBvZiB3b3JsZC5zeXN0ZW1zLmNvbXBOYW1lc0J5U3lzdGVtTmFtZSkge1xuICAgICAgaWYgKGNOYW1lcy5ldmVyeSgoY05hbWUpID0+IGNvbXBOYW1lcy5pbmNsdWRlcyhjTmFtZSkpKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtcy5wdXNoKHN5c3RlbU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvVGFibGVSb3coKTogRGV2RW50aXR5VGFibGVSb3cge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIGNvbXBvbmVudHM6IE9iamVjdC5rZXlzKHRoaXMuY29tcG9uZW50cykuam9pbihcIiwgXCIpLFxuICAgICAgdGFnczogdGhpcy50YWdzLmpvaW4oXCIsIFwiKSxcbiAgICAgIHN5c3RlbXM6IHRoaXMuc3lzdGVtcy5qb2luKCcsICcpLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGV2RW50aXR5O1xuIiwiZXhwb3J0IHR5cGUgU3RhdGUgPSBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2w7XG5cbmV4cG9ydCB0eXBlIFRyYW5zaXRpb25zPFMgZXh0ZW5kcyBTdGF0ZSwgRCA9IHVuZGVmaW5lZD4gPSBSZWNvcmQ8XG4gIFMsXG4gIChkYXRhOiBELCBjdXJyZW50OiBTKSA9PiBTXG4+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW1wbGVGU008UyBleHRlbmRzIFN0YXRlLCBEID0gdW5kZWZpbmVkPiB7XG4gIGN1cnJlbnQ6IFM7XG5cbiAgaW5pdGFsOiBTO1xuXG4gIHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uczxTLCBEPjtcblxuICBjb25zdHJ1Y3Rvcihpbml0aWFsU3RhdGU6IFMsIHRyYW5zaXRpb25zOiBUcmFuc2l0aW9uczxTLCBEPikge1xuICAgIHRoaXMuaW5pdGFsID0gaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuY3VycmVudCA9IGluaXRpYWxTdGF0ZTtcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gdHJhbnNpdGlvbnM7XG4gIH1cblxuICBuZXh0KGRhdGE6IEQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uc1t0aGlzLmN1cnJlbnRdKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnRyYW5zaXRpb25zW3RoaXMuY3VycmVudF0oZGF0YSwgdGhpcy5jdXJyZW50KTtcbiAgICB9XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmluaXRhbDtcbiAgfVxuXG4gIGlzKGNoZWNrU3RhdGU6IFMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50ID09PSBjaGVja1N0YXRlO1xuICB9XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IFdvcmxkLCB7IENsYXNzQ29uc3RydWN0b3IgfSBmcm9tIFwiLi9Xb3JsZFwiO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSBcIi4vQ29tcG9uZW50Q29sbGVjdGlvblwiO1xuaW1wb3J0IHsgVGFnIH0gZnJvbSBcIi4vVGFnXCI7XG5pbXBvcnQgRGV2RW50aXR5IGZyb20gXCIuL0RldkVudGl0eVwiO1xuXG5pbXBvcnQgU2ltcGxlRlNNIGZyb20gXCIuL1NpbXBsZUZTTVwiO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxudHlwZSBFbnRpdHlTdGF0ZSA9XG4gIHwgXCJjcmVhdGluZ1wiXG4gIHwgXCJjcmVhdGVkXCJcbiAgfCBcImRlc3Ryb3lpbmdcIlxuICB8IFwiZGVzdHJveWVkXCJcbiAgfCBcImVycm9yXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50aXR5Q29tcEV2ZW50QXJnczxDVD4ge1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBjb21wb25lbnQ6IENUO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHk8Q1Q+IHtcbiAgcHJpdmF0ZSBfaWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfd29ybGQ6IFdvcmxkPENUPjtcblxuICBwcml2YXRlIF9lcnJvcjogRXJyb3IgfCBudWxsO1xuXG4gIHByaXZhdGUgX3N0YXRlOiBTaW1wbGVGU008RW50aXR5U3RhdGUsIEVudGl0eVN0YXRlPjtcblxuICBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cblxuICBnZXQgd29ybGQoKTogV29ybGQ8Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQ7XG4gIH1cblxuICBnZXQgc3RhdGUoKTogRW50aXR5U3RhdGUge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZS5jdXJyZW50O1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFdvcmxkPENUPikge1xuICAgIHRoaXMuX2lkID0gdXVpZHY0KCk7XG4gICAgdGhpcy5fd29ybGQgPSB3b3JsZDtcblxuICAgIHRoaXMuX2Vycm9yID0gbnVsbDtcblxuICAgIGNvbnN0IGZzbVRyYW5zaXRpb24gPSAoXG4gICAgICBuczogRW50aXR5U3RhdGVcbiAgICApOiBFbnRpdHlTdGF0ZSA9PiB7XG4gICAgICBpZiAobnMgPT09IFwiZXJyb3JcIiB8fCB0aGlzLl9lcnJvcikgcmV0dXJuIFwiZXJyb3JcIjtcbiAgICAgIHJldHVybiBucztcbiAgICB9O1xuXG4gICAgdGhpcy5fc3RhdGUgPSBuZXcgU2ltcGxlRlNNPEVudGl0eVN0YXRlLCBFbnRpdHlTdGF0ZT4oXCJjcmVhdGluZ1wiLCB7XG4gICAgICBjcmVhdGluZzogZnNtVHJhbnNpdGlvbixcbiAgICAgIGNyZWF0ZWQ6IGZzbVRyYW5zaXRpb24sXG4gICAgICBkZXN0cm95aW5nOiBmc21UcmFuc2l0aW9uLFxuICAgICAgZGVzdHJveWVkOiAoKSA9PiBcImRlc3Ryb3llZFwiLFxuICAgICAgZXJyb3I6ICgpID0+IFwiZXJyb3JcIixcbiAgICB9KTtcblxuICAgIC8qXG4gICAgUmVnaXN0ZXJpbmcgd2l0aCB0aGUgV29ybGQuXG4gICAgKi9cbiAgICB0aGlzLl93b3JsZC5yZWdpc3RlckVudGl0eSh0aGlzKTtcblxuICAgIGlmICh0aGlzLl93b3JsZC5zeXN0ZW1zLmNvbXBOYW1lc0J5U3lzdGVtTmFtZS5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLl9zdGF0ZS5uZXh0KCdjcmVhdGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyogTGlmZUN5Y2xlIG1ldGhvZHMsIG1lYW50IHRvIGJlIG92ZXJyaWRkZW4gKi9cblxuICBvbkNyZWF0ZSh3b3JsZDogV29ybGQ8Q1Q+KTogdm9pZCB7XG4gICAgLy8gYWJzdHJhY3RcbiAgfVxuXG4gIG9uRGVzdHJveSh3b3JsZDogV29ybGQ8Q1Q+KTogdm9pZCB7XG4gICAgLy8gYWJzdHJhY3RcbiAgfVxuXG4gIG9uQ29tcG9uZW50QWRkKGFyZ3M6IEVudGl0eUNvbXBFdmVudEFyZ3M8Q1Q+KTogdm9pZCB7XG4gICAgLy8gYWJzdHJhY3RcbiAgfVxuXG4gIG9uVHJhY2tlZENvbXBvbmVudFVwZGF0ZShhcmdzOiBFbnRpdHlDb21wRXZlbnRBcmdzPENUPik6IHZvaWQge1xuICAgIC8vIGFic3RyYWN0XG4gIH1cblxuICBvbkNvbXBvbmVudFJlbW92ZShhcmdzOiBFbnRpdHlDb21wRXZlbnRBcmdzPENUPik6IHZvaWQge1xuICAgIC8vIGFic3RyYWN0XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcG9uZW50IHRvIGFuIEVudGl0eSwgZG9oLlxuICAgKi9cbiAgYWRkPFQgZXh0ZW5kcyBDVD4oY29tcG9uZW50OiBUKTogdGhpcyB7XG4gICAgdGhpcy5fd29ybGQuYWRkKHRoaXMuX2lkLCBjb21wb25lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdGFnIHRvIGEgY29tcG9uZW50XG4gICAqL1xuICBhZGRUYWcodGFnOiBUYWcpOiB0aGlzIHtcbiAgICBjb25zdCBlbnRpdHlTZXQgPSB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5oYXModGFnKVxuICAgICAgPyB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5nZXQodGFnKVxuICAgICAgOiBuZXcgU2V0PEVudGl0eUlkPigpO1xuXG4gICAgaWYgKGVudGl0eVNldCkge1xuICAgICAgZW50aXR5U2V0LmFkZCh0aGlzLl9pZCk7XG4gICAgICB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5zZXQodGFnLCBlbnRpdHlTZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgYW4gZW50aXR5IGhhcyBhIGNvbXBvbmVudCByZWxhdGVkIHRvIGl0LlxuICAgKi9cbiAgaGFzPFQgZXh0ZW5kcyBDVD4oY1R5cGU6IENsYXNzQ29uc3RydWN0b3I8VD4pOiBib29sZWFuIHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8XG4gICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHJldHVybiBjYy5oYXMoY1R5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRvIHNlZSBpZiBhbiBlbnRpdHkgdGFnZ2VkIHdpdGggYSBnaXZlbiB0YWcuXG4gICAqL1xuICBoYXNUYWcodGFnOiBUYWcpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuaGFzKHRhZykpIHtcbiAgICAgIGNvbnN0IGVudGl0eVNldCA9IHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuICAgICAgaWYgKGVudGl0eVNldCkge1xuICAgICAgICByZXR1cm4gZW50aXR5U2V0Lmhhcyh0aGlzLl9pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGNvbXBvbmVudCB0aGF0IGJlbG9uZ3MgdG8gYW4gZW50aXR5LlxuICAgKi9cbiAgZ2V0PFQgZXh0ZW5kcyBDVD4oY2w6IENsYXNzQ29uc3RydWN0b3I8VD4pOiBUIHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8XG4gICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxUPihjbCk7XG5cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgY29tcG9uZW50cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byBhbiBlbnRpdHksIHZpYSBhIENvbXBvbmVudENvbGxlY3Rpb25cbiAgICovXG4gIGdldEFsbCgpOiBDb21wb25lbnRDb2xsZWN0aW9uPENUPiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX3dvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLl9pZCkgfHxcbiAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuXG4gICAqIEBwYXJhbSBjVHlwZSBBIGNvbXBvbmVudCBjbGFzcywgZWcgTXlDb21wb25lbnRcbiAgICovXG4gIHJlbW92ZShjVHlwZTogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4pOiB0aGlzIHtcbiAgICB0aGlzLl93b3JsZC5yZW1vdmUodGhpcy5faWQsIGNUeXBlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHRhZyBmcm9tIGFuIGVudGl0eVxuICAgKi9cbiAgcmVtb3ZlVGFnKHRhZzogVGFnKTogdGhpcyB7XG4gICAgaWYgKHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmhhcyh0YWcpKSB7XG4gICAgICBjb25zdCBlbnRpdHlTZXQgPSB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcblxuICAgICAgaWYgKGVudGl0eVNldCkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKHRoaXMuX2lkKTtcblxuICAgICAgICBpZiAoZW50aXR5U2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgICB0aGlzLl93b3JsZC5lbnRpdGllc0J5VGFncy5kZWxldGUodGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBDbGVhcnMgYWxsIGNvbXBvbmVudHMgZnJvbSBhbiBFbnRpdHkgKi9cbiAgY2xlYXIoKTogdGhpcyB7XG4gICAgdGhpcy5fd29ybGQuY2xlYXJFbnRpdHlDb21wb25lbnRzKHRoaXMuX2lkKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdGFncyBvbiBhbiBlbnRpdHlcbiAgICovXG4gIGNsZWFyVGFncygpOiB0aGlzIHtcbiAgICBmb3IgKGNvbnN0IFt0YWcsIGVudGl0eVNldF0gb2YgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZW50cmllcygpKSB7XG4gICAgICBlbnRpdHlTZXQuZGVsZXRlKHRoaXMuX2lkKTtcblxuICAgICAgaWYgKGVudGl0eVNldC5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3dvcmxkLmVudGl0aWVzQnlUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSBlbnRpdHkgdG8gJ2NyZWF0ZWQnLiB0aGF0J3MgaXQuXG4gICAqL1xuICBmaW5pc2hDcmVhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZS5uZXh0KCdjcmVhdGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSBhbiBlbnRpdHkuIEFjdHVhbCBkZXN0cnVjdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCBhZnRlciB0aGUgbmV4dCBwYXNzIG9mIHN5c3RlbXMuXG4gICAqIFRoaXMgZ2l2ZXMgdGhlIHN5c3RlbXMgYSBjaGFuY2UgdG8gZG8gYW55IGNsZWFudXAgdGhhdCBtaWdodCBiZSBuZWVkZWQuXG4gICAqL1xuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIC8vIElmIG5vIHN5c3RlbXMgYXJlIGFkZGVkLCB0aGUgZGVzdHJveSBpbW1lZGlhdGVseS5cbiAgICBpZiAodGhpcy5fd29ybGQuc3lzdGVtcy5jb21wTmFtZXNCeVN5c3RlbU5hbWUuc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5kZXN0cm95SW1tZWRpYXRlbHkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBNYXJrIGFzIFwiZGVzdHJveWluZ1wiIHNvIHRoYXQgc3lzdGVtcyBjYW4gYWN0IG9uIGl0IGJlZm9yZSBhY3R1YWxseSBiZWluZyBkZXN0cm95ZWQuXG4gICAgdGhpcy5fc3RhdGUubmV4dCgnZGVzdHJveWluZycpO1xuICB9XG5cbiAgZGVzdHJveUltbWVkaWF0ZWx5KCk6IHZvaWQge1xuICAgIC8vIFJpZ2h0IG5vdyBjYWxsaW5nIGJlZm9yZSB0aGUgYWN0dWFsIGRlc3Rvcnlpbmcgb2YgdGhlIGVudGl0eS5cbiAgICAvLyBNaWdodCB3YW50IHRvIGNoYW5nZSB0aGlzIHRvIHBvc3QgZGVzdHJ1Y3Rpb24gaW4gdGhlIGZ1dHVyZSwgd2hvIGtub3dzLlxuICAgIHRoaXMub25EZXN0cm95KHRoaXMuX3dvcmxkKTtcblxuICAgIC8vIEFjdHVhbGx5IGRlc3Ryb3kgZW50aXR5LlxuICAgIHRoaXMuX3dvcmxkLmRlc3Ryb3lFbnRpdHkodGhpcy5faWQpOyAvLyBzaG91bGQgcmV0dXJuIGFuIGVycm9yPz9cblxuICAgIHRoaXMuX3N0YXRlLm5leHQoJ2Rlc3Ryb3llZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgY29tcG9uZW50cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCB0byBhbiBlbnRpdHksIHZpYSBhIENvbXBvbmVudENvbGxlY3Rpb24uXG4gICAqIERvZXMgdGhlIHNhbWUgdGhpbmcgYXMgZW50aXR5SW5zdGFuY2UuZ2V0QWxsKCkuXG4gICAqL1xuICBnZXQgY29tcG9uZW50cygpOiBDb21wb25lbnRDb2xsZWN0aW9uPENUPiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX3dvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLl9pZCkgfHxcbiAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHRoZSB0YWdzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoaXMgZW50aXR5LlxuICAgKi9cbiAgZ2V0IHRhZ3MoKTogU2V0PFRhZz4ge1xuICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PFRhZz4oKTtcbiAgICBmb3IgKGNvbnN0IFt0YWcsIGVudGl0eVNldF0gb2YgdGhpcy5fd29ybGQuZW50aXRpZXNCeVRhZ3MuZW50cmllcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0Lmhhcyh0aGlzLl9pZCkpIHtcbiAgICAgICAgdGFncy5hZGQodGFnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFncztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IEVudGl0eSB0byBhIERldkVudGl0eS4gVmVyeSBoZWxwZnVsIGluIGZvciBkZWJ1Z2dpbmcuXG4gICAqL1xuICB0b0RldkVudGl0eSgpOiBEZXZFbnRpdHk8Q1Q+IHtcbiAgICByZXR1cm4gbmV3IERldkVudGl0eTxDVD4odGhpcywgdGhpcy5fd29ybGQpO1xuICB9XG59XG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgRGV2RW50aXR5IGZyb20gJy4vRGV2RW50aXR5JztcblxuaW50ZXJmYWNlIERldlN5c3RlbUNvbXBzIHtcbiAgc3lzdGVtOiBzdHJpbmc7XG4gIGNvbXBvbmVudHM6IHN0cmluZztcbn1cblxuXG5jbGFzcyBEZXZUb29sczxDVD4ge1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuXG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZDxDVD4pIHtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gIH1cbiAgLyoqXG4gICAqIGRpc3BsYXkgdGhlIGFsbCBzeXN0ZW1zIG9mIHRoZSB3b3JsZCwgYW5kIHRoZSBjb21wb25lbnRzIHJlcXVpcmVkIGJ5IGVhY2ggc3lzdGVtLlxuICAgKiBTdXBlciBoZWxwZnVsIHRvIHVzZSB3aXRoIGNvbnNvbGUudGFibGUoKVxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBcbiAgICogY29uc29sZS50YWJsZSh3b3JsZC5kZXYuc3lzdGVtQ29tcG9uZW50cyk7XG4gICAqIGBgYFxuICAgKi9cbiAgZ2V0IHN5c3RlbUNvbXBvbmVudHMoKTogRGV2U3lzdGVtQ29tcHNbXSB7XG4gICAgY29uc3QgY29tcHNCeVN5c3RlbXMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgW3N5c3RlbSwgY29tcE5hbWVzXSBvZiB0aGlzLndvcmxkLnN5c3RlbXMuY29tcE5hbWVzQnlTeXN0ZW1OYW1lKSB7XG4gICAgICBjb21wc0J5U3lzdGVtcy5wdXNoKHsgc3lzdGVtLCBjb21wb25lbnRzOiBjb21wTmFtZXMuam9pbihcIiwgXCIpIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb21wc0J5U3lzdGVtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXJyYXkgb2YgRGV2RW50aXRlcy4gQ2FuIGJlIHZlcnkgaGVscGZ1bCBmb3IgdGhpbmdzIGxpa2UgaW5zcGVjdGluZyBjb21wb25lbnQgc3RhdGUsXG4gICAqIGFuZCB3aGljaCBzeXN0ZW1zIHdpbGwgYmUgY2FsbGVkIG9uIGFuIGVudGl0eS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgXG4gICAqIGNvbnNvbGUudGFibGUod29ybGQuZGV2LmVudGl0aWVzKTtcbiAgICpcbiAgICogLy8gUHJvIHRpcCEgdHJ5IGRpc3BsYXlpbmcgYSB0YWJsZSBvZiBlbnRpdGllcyB3aXRoIGNvbnNvbGUudGFibGUgYW5kIERldkVudGl0eS50b1RhYmxlUm93KCkuXG4gICAqIGNvbnNvbGUudGFibGUod29ybGQuZGV2LmVudGl0aWVzLm1hcChkZXZFbnRpdHkgPT4gZGV2RW50aXR5LnRvVGFibGVSb3coKSkpO1xuICAgKiBgYGBcbiAgICovXG5cbiAgZ2V0IGVudGl0aWVzKCk6IERldkVudGl0eTxDVD5bXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLndvcmxkLmVudGl0aWVzLnZhbHVlcygpXS5tYXAoKGUpID0+IGUudG9EZXZFbnRpdHkoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGV2VG9vbHM7XG4iLCJpbXBvcnQgRW50aXR5LCB7IEVudGl0eUlkIH0gZnJvbSBcIi4vRW50aXR5XCI7XG5pbXBvcnQgV29ybGQsIHsgQ2xhc3NDb25zdHJ1Y3RvciB9IGZyb20gXCIuL1dvcmxkXCI7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tIFwiLi9Db21wb25lbnRDb2xsZWN0aW9uXCI7XG5cbi8qKlxuICogQXJndW1lbnRzIHRoYXQgYXJlIHBhc3NlZCBpbnRvIGEgU3lzdGVtIGZ1bmN0aW9uIG9uIGVhY2ggaXRlcmF0aW9uLlxuICogVGhpcyBpcyBob3cgeW91IGFjY2VzIHRoaW5ncyBsaWtlIHRoZSBlbnRpdHkgdGhhdCBwYXJ0aWN1bGFyIGVudGl0eSB0byBhY3Qgb24sXG4gKiBhcyB3ZWxsIGFzIHNvbWUgb3RoZXIgaGVscGZ1bCBwYXJhbXMgbGlrZSBpZiB0aGUgZW50aXR5IGlzIHRoZSBmaXJzdCBvciBsYXN0IGVudGl0eVxuICogaW4gdGhlIGdyb3VwIG9mIGVudGl0aWVzIHRoYXQgYmVpbmcgaXRlcmF0ZWQgb3Zlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1GdW5jQXJnczxDVD4ge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgZW50aXR5IGJlaW5nIGl0ZXJhdGVkLlxuICAgKi9cbiAgZW50aXR5OiBFbnRpdHk8Q1Q+O1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gdGhlIGVudGl0eVxuICAgKi9cbiAgY29tcG9uZW50czogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD47XG4gIC8qKlxuICAgKiBUaGUgV29ybGQgaW5zdGFuY2UuXG4gICAqIFVzZSB0aGlzIHRvIGFjY2VzcyBvdGhlciBlbnRpdGllcy5cbiAgICovXG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIGluZGV4OiBudW1iZXI7XG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIElzIHRoZSBmaXJzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIEhlbHBmdWwgZm9yIHNldHRpbmcgdXAgc3RhdGUgdGhhdCBpcyB0aGUgc2FtZSBmb3IgYWxsIGVudGl0aWVzIG9ubHkgb25jZS5cbiAgICovXG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJcyB0aGUgbGFzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIENhbiBiZSBoZWxwZnVsIHRvIHRlYXIgZG93biBhbnl0aGluZyB0aGF0IHNob3VsZCBiZSBkZWFsdCB3aXRoIGFmdGVyIGFsbCB0aGUgZW50aXRlcyBoYXZlIHJhbi5cbiAgICovXG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc3lzdGVtIGlzIHJ1bi5cbiAqL1xuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVD4gPSAoXG4gIHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPlxuKSA9PiB2b2lkO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTeXN0ZW1zPENUPiB7XG4gIHdvcmxkOiBXb3JsZDxDVD47XG5cbiAgc3lzdGVtRnVuY0J5U3lzdGVtTmFtZTogTWFwPHN0cmluZywgU3lzdGVtRnVuYzxDVD4+OyAvLyBkb3VibGUgY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgbWFwcyBhcmUgb3JkZXJlZC5cblxuICBjb21wTmFtZXNCeVN5c3RlbU5hbWU6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcblxuICBjb25zdHJ1Y3Rvcih3b3JsZDogV29ybGQ8Q1Q+KSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMuc3lzdGVtRnVuY0J5U3lzdGVtTmFtZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmNvbXBOYW1lc0J5U3lzdGVtTmFtZSA9IG5ldyBNYXAoKTtcbiAgfVxuXG4gIGFkZChjVHlwZXM6IENsYXNzQ29uc3RydWN0b3I8Q1Q+W10sIHN5c3RlbUZ1bmM6IFN5c3RlbUZ1bmM8Q1Q+LCBmdW5jTmFtZT86IHN0cmluZyk6IHRoaXMge1xuICAgIGNvbnN0IGNOYW1lcyA9IGNUeXBlcy5tYXAoKGN0KSA9PiBjdC5uYW1lKTtcblxuICAgIFxuICAgIGxldCBuYW1lID0gc3lzdGVtRnVuYy5uYW1lO1xuICAgIGlmIChzeXN0ZW1GdW5jLm5hbWUgPT09ICcnKSB7XG4gICAgICAvLyBTdXBlciBicnV0ZSBmb3JjZSwgYW5kIG1pZ2h0IGxlYWQgdG8gZXJyb3JzIGluIHRoZSBmdXR1cmUsIGJ1dCBmb3Igbm93XG4gICAgICAvLyB1c2luZyB0aGUgc3RyaW5naWZpZWQgc3lzdGVtIGZ1bmN0aW9uIGlmIHRoZSBmdW5jdGlvbiBkb2Vzbid0IGFscmVhZHkgaGF2ZSBhIG5hbWUuXG4gICAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3IgYW5vbnltb3VzIGZ1bmN0aW9ucyB1c2VkIGFzIGEgc3lzdGVtIGZ1bmN0aW9uLlxuICAgICAgLy8gTWlnaHQgYmUgZ29vZCB0byBmaWd1cmUgb3V0IGhvdyB0byBnZXQgYSBoYXNoIG9mIHRoZSBmdW5jdGlvbiBzdHJpbmcuXG4gICAgICBuYW1lID0gc3lzdGVtRnVuYy50b1N0cmluZygpLnNsaWNlKDAsIDMwKTtcbiAgICB9XG5cbiAgICBpZiAoZnVuY05hbWUpIHtcbiAgICAgIG5hbWUgPSBmdW5jTmFtZTtcbiAgICB9XG5cbiAgICB0aGlzLnN5c3RlbUZ1bmNCeVN5c3RlbU5hbWUuc2V0KG5hbWUsIHN5c3RlbUZ1bmMpO1xuICAgIHRoaXMuY29tcE5hbWVzQnlTeXN0ZW1OYW1lLnNldChuYW1lLCBjTmFtZXMpO1xuICAgIHRoaXMud29ybGQuZW50aXRpZXNCeUNUeXBlcy5zZXQoY05hbWVzLCBuZXcgU2V0PEVudGl0eUlkPigpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcnVuKCk6IHZvaWQge1xuXG4gICAgLy8gVE9ETzogTWlnaHQgYmUgY29vbCB0byBhZGQgYSB3YXkgdG8gc3RvcCB0aGUgc3lzdGVtcyBsb29wIHdoZW4gaW4gZGV2LlxuICAgIC8vICAgICAgIE1heWJlIHNvbWV0aGluZyBsaWtlIHdvcmxkLmRldi5zdG9wKCkgb3IgcGF1c2UoKS5cbiAgICBmb3IgKGNvbnN0IFtcbiAgICAgIGZ1bmNOYW1lLFxuICAgICAgc3lzdGVtRnVuYyxcbiAgICBdIG9mIHRoaXMuc3lzdGVtRnVuY0J5U3lzdGVtTmFtZS5lbnRyaWVzKCkpIHtcbiAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICBjb25zdCBzaXplID0gdGhpcy53b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNpemU7XG4gICAgICBjb25zdCBjTmFtZXMgPSB0aGlzLmNvbXBOYW1lc0J5U3lzdGVtTmFtZS5nZXQoZnVuY05hbWUpIHx8IFtdO1xuICAgICAgY29uc3QgY1R5cGVBcnJzID0gdGhpcy53b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmdldChjTmFtZXMpIHx8IG5ldyBTZXQoKTtcblxuICAgICAgY29uc3QgZW50aXRpZXNJbkNyZWF0aW5nU3RhdGUgPSBbXTtcbiAgICAgIGNvbnN0IGVudGl0aWVzSW5EZXN0cm95aW5nU3RhdGUgPSBbXVxuXG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLndvcmxkLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICAgIGlmIChlbnRpdHkuc3RhdGUgPT09ICdjcmVhdGluZycpIHtcbiAgICAgICAgICBlbnRpdGllc0luQ3JlYXRpbmdTdGF0ZS5wdXNoKGVudGl0eSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50aXR5LnN0YXRlID09PSAnZGVzdHJveWluZycpIHtcbiAgICAgICAgICBlbnRpdGllc0luRGVzdHJveWluZ1N0YXRlLnB1c2goZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIGZvciAoY29uc3QgZWlkIG9mIGNUeXBlQXJycykge1xuICAgICAgICBjb25zdCBhcmdzOiBTeXN0ZW1GdW5jQXJnczxDVD4gPSB7XG4gICAgICAgICAgZW50aXR5OiB0aGlzLndvcmxkLmVudGl0aWVzLmdldChlaWQpIHx8IG5ldyBFbnRpdHk8Q1Q+KHRoaXMud29ybGQpLFxuICAgICAgICAgIGNvbXBvbmVudHM6XG4gICAgICAgICAgICB0aGlzLndvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8XG4gICAgICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSxcbiAgICAgICAgICB3b3JsZDogdGhpcy53b3JsZCxcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBzaXplLFxuICAgICAgICAgIGlzRmlyc3Q6IGluZGV4ID09PSAwLFxuICAgICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgICAgICB9O1xuXG4gICAgICAgIHN5c3RlbUZ1bmMoYXJncyk7XG5cbiAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXNJbkNyZWF0aW5nU3RhdGUpIHtcbiAgICAgICAgZW50aXR5LmZpbmlzaENyZWF0aW9uKCk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllc0luRGVzdHJveWluZ1N0YXRlKSB7XG4gICAgICAgIGVudGl0eS5kZXN0cm95SW1tZWRpYXRlbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBXb3JsZCwgeyBDbGFzc0NvbnN0cnVjdG9yIH0gZnJvbSBcIi4vV29ybGRcIjtcbmltcG9ydCBFbnRpdHksIHsgRW50aXR5SWQgfSBmcm9tIFwiLi9FbnRpdHlcIjtcblxuLy8gV2FpdGluZyBmb3IgVHlwZXNjcmlwdCA0LjIgdG8gY29tZSBvdXQgc28gdGhhdCBTeW1ib2xzIGFyZSBzdXBwb3JkZWQga2V5cy5cbmV4cG9ydCBjb25zdCBUcmFja2VkQ29tcFN5bWJvbEtleXMgPSB7XG4gIGlzVHJhY2tlZDogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50LmlzVHJhY2tlZFwiKSxcbiAgd29ybGQ6IFN5bWJvbC5mb3IoXCJlY3MudHJhY2tlZENvbXBvbmVudC53b3JsZFwiKSxcbiAgZW50aXR5SURzOiBTeW1ib2wuZm9yKFwiZWNzLnRyYWNrZWRDb21wb25lbnQuZW50aXR5SURzXCIpLFxuICBnZXRFbnRpdGllczogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50LmdldEVudGl0aWVzXCIpLFxuICBzZXRXb3JsZDogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50LnNldFdvcmxkXCIpLFxuICBvbkFkZDogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50Lm9uQWRkXCIpLFxuICBvblVwZGF0ZTogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50Lm9uVXBkYXRlXCIpLFxuICBvblJlbW92ZTogU3ltYm9sLmZvcihcImVjcy50cmFja2VkQ29tcG9uZW50Lm9uUmVtb3ZlXCIpLFxufSBhcyBjb25zdDtcblxuLy9AdHMtaWdub3JlXG50eXBlIFRyYWNrZWRDb21wb25lbnQ8Q1Q+ID0ge1xuICBuZXcgKC4uLmFyZ3M6IGFueVtdKTogQ1Q7XG5cbiAgLy9AdHMtaWdub3JlXG4gIFtUcmFja2VkQ29tcFN5bWJvbEtleXMuaXNUcmFja2VkXTogYm9vbGVhbjtcbiAgLy9AdHMtaWdub3JlXG4gIFtUcmFja2VkQ29tcFN5bWJvbEtleXMuc2V0V29ybGRdOiAod29ybGQ6IFdvcmxkPENUPikgPT4gdm9pZDtcbiAgLy9AdHMtaWdub3JlXG4gIFtUcmFja2VkQ29tcFN5bWJvbEtleXMud29ybGRdOiBXb3JsZDxDVD47XG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmVudGl0eUlEc106IFNldDxFbnRpdHlJZD47XG4gIC8vQHRzLWlnbm9yZVxuICBbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmdldEVudGl0aWVzXTogKCkgPT4gTWFwPEVudGl0eUlkLCBFbnRpdHk8Q1Q+PjtcbiAgLy9AdHMtaWdub3JlXG4gIFtUcmFja2VkQ29tcFN5bWJvbEtleXMub25BZGRdOiAoXG4gICAgd29ybGQ6IFdvcmxkPENUPixcbiAgICBlbnRpdHk6IEVudGl0eTxDVD5cbiAgKSA9PiB2b2lkO1xuICAvL0B0cy1pZ25vcmVcbiAgW1RyYWNrZWRDb21wU3ltYm9sS2V5cy5vblJlbW92ZV06IChcbiAgICB3b3JsZDogV29ybGQ8Q1Q+LFxuICAgIGVudGl0eTogRW50aXR5PENUPlxuICApID0+IHZvaWQ7XG59O1xuXG5pbnRlcmZhY2UgQWRkRXZlbnRBcmdzPENUPiB7XG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIGNvbXBvbmVudDogQ1Q7XG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgZW50aXRpZXM6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG59XG5cbmludGVyZmFjZSBVcGRhdGVFdmVudEFyZ3M8Q1Q+IHtcbiAgZW50aXRpZXM6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG4gIGNvbXBvbmVudDogQ1Q7XG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIHByZXZpb3VzVmFsOiBDVFtrZXlvZiBDVF07XG4gIHByb3BlcnR5OiBrZXlvZiBDVDtcbn1cblxuaW50ZXJmYWNlIFJlbW92ZUV2ZW50QXJnczxDVD4ge1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBjb21wb25lbnQ6IENUO1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGVudGl0aWVzOiBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xufVxuXG5pbnRlcmZhY2UgVHJhY2tlZEV2ZW50SGFuZGxlcnM8Q1Q+IHtcbiAgb25BZGQ/OiAoYXJnczogQWRkRXZlbnRBcmdzPENUPikgPT4gdm9pZDtcbiAgb25VcGRhdGU/OiAoYXJnczogVXBkYXRlRXZlbnRBcmdzPENUPikgPT4gdm9pZDtcbiAgb25SZW1vdmU/OiAoYXJnczogUmVtb3ZlRXZlbnRBcmdzPENUPikgPT4gdm9pZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2xhc3NJbnN0YW5jZVByb3h5SGFuZGxlcnM8Q1Q+KFxuICB0cmFja2VkRXZlbnRIYW5kbGVyczogVHJhY2tlZEV2ZW50SGFuZGxlcnM8Q1Q+XG4pOiBQcm94eUhhbmRsZXI8YW55PiB7XG4gIGNvbnN0IHVwZGF0ZWRQcm9wcyA9IG5ldyBTZXQoKTtcbiAgcmV0dXJuIHtcbiAgICBzZXQoXG4gICAgICBjb21wb25lbnQ6IENULFxuICAgICAgcHJvcGVydHk6IGtleW9mIENULFxuICAgICAgdmFsdWU6IENUW2tleW9mIENUXVxuICAgICkge1xuICAgICAgdXBkYXRlZFByb3BzLmFkZChwcm9wZXJ0eSk7XG5cbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgY29uc3Qgd29ybGQgPSBjb21wb25lbnRbXG4gICAgICAgIFRyYWNrZWRDb21wU3ltYm9sS2V5cy53b3JsZFxuICAgICAgXSBhcyBXb3JsZDxDVD47XG5cbiAgICAgIGNvbnN0IHByZXZpb3VzVmFsID0gY29tcG9uZW50W3Byb3BlcnR5XTtcblxuICAgICAgY29tcG9uZW50W3Byb3BlcnR5XSA9IHZhbHVlO1xuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbnN0IGVudGl0aWVzID0gY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5nZXRFbnRpdGllc10od29ybGQpIGFzIE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj47XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICAgIGVudGl0eS5vblRyYWNrZWRDb21wb25lbnRVcGRhdGUoeyB3b3JsZCwgY29tcG9uZW50IH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHJhY2tlZEV2ZW50SGFuZGxlcnMub25VcGRhdGUpIHtcbiAgICAgICAgdHJhY2tlZEV2ZW50SGFuZGxlcnMub25VcGRhdGUoe1xuICAgICAgICAgIGVudGl0aWVzLFxuICAgICAgICAgIHdvcmxkLFxuICAgICAgICAgIGNvbXBvbmVudCxcbiAgICAgICAgICBwcmV2aW91c1ZhbCxcbiAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja0NvbXBvbmVudDxDVD4oXG4gIENvbXBDbGFzczogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4sXG4gIHRyYWNrZWRFdmVudEhhbmRsZXJzOiBUcmFja2VkRXZlbnRIYW5kbGVyczxDVD5cbik6IFRyYWNrZWRDb21wb25lbnQ8Q1Q+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShDb21wQ2xhc3MsIHtcbiAgICBjb25zdHJ1Y3QoQ29tcG9uZW50OiBhbnksIGFyZ3M6IGFueSkge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gbmV3IENvbXBvbmVudCguLi5hcmdzKSBhcyBDVCAmIFRyYWNrZWRDb21wb25lbnQ8Q1Q+O1xuXG4gICAgICAvLyBGb3IgdXNlIGluIGlkZW50aWZpbmcgYSBcInRyYWNrZWRcIiBjbGFzcyB0aHJvdWdoIHRoZSBwcm94eS5cbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5pc1RyYWNrZWRdID0gdHJ1ZTtcblxuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLnNldFdvcmxkXSA9IChcbiAgICAgICAgd29ybGQ6IFdvcmxkPENUPlxuICAgICAgKSA9PiB7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLndvcmxkXSA9IHdvcmxkO1xuICAgICAgfTtcblxuICAgICAgLy8gSG9sZHMgZW50aXRpZXMgdGhhdCB0aGlzIGNvbXBvbmVudCBoYXMgYmVlbiBhZGRlZCB0by5cbiAgICAgIC8vIEFkZGVkIGFuZCByZW1vdmVkIGluIHdvcmxkLmFkZCgpL3dvcmxkLnJlbW92ZSgpLlxuICAgICAgLy9AdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmVudGl0eUlEc10gPSBuZXcgU2V0KCk7XG5cblxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgRW50aXRpZXMgZnJvbSBlbnRpdHlJRHNcbiAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5nZXRFbnRpdGllc10gPSAod29ybGQ6IFdvcmxkPENUPik6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj4gPT4ge1xuICAgICAgICBjb25zdCBlbnRpdGllcyA9IG5ldyBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+KCk7XG5cbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGZvciAoY29uc3QgZWlkIG9mIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuZW50aXR5SURzXSkge1xuICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmVudGl0aWVzLmdldChlaWQpO1xuICAgICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICAgIGVudGl0aWVzLnNldChlaWQsIGVudGl0eSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVudGl0aWVzO1xuICAgICAgfVxuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMub25BZGRdID0gKFxuICAgICAgICB3b3JsZDogV29ybGQ8Q1Q+LFxuICAgICAgICBlbnRpdHk6IEVudGl0eTxDVD5cbiAgICAgICkgPT4ge1xuICAgICAgICBpZiAodHJhY2tlZEV2ZW50SGFuZGxlcnMub25BZGQpIHtcbiAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdCBlbnRpdGllcyA9IGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuZ2V0RW50aXRpZXNdKHdvcmxkKSBhcyBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xuXG4gICAgICAgICAgdHJhY2tlZEV2ZW50SGFuZGxlcnMub25BZGQoeyBjb21wb25lbnQsIHdvcmxkLCBlbnRpdHksIGVudGl0aWVzIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvL0B0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMub25SZW1vdmVdID0gKFxuICAgICAgICB3b3JsZDogV29ybGQ8Q1Q+LFxuICAgICAgICBlbnRpdHk6IEVudGl0eTxDVD5cbiAgICAgICkgPT4ge1xuICAgICAgICBpZiAodHJhY2tlZEV2ZW50SGFuZGxlcnMub25SZW1vdmUpIHtcbiAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdCBlbnRpdGllcyA9IGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuZ2V0RW50aXRpZXNdKHdvcmxkKSBhcyBNYXA8RW50aXR5SWQsIEVudGl0eTxDVD4+O1xuXG4gICAgICAgICAgdHJhY2tlZEV2ZW50SGFuZGxlcnMub25SZW1vdmUoeyBjb21wb25lbnQsIHdvcmxkLCBlbnRpdHksIGVudGl0aWVzIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gbmV3IFByb3h5KFxuICAgICAgICBjb21wb25lbnQsXG4gICAgICAgIGNyZWF0ZUNsYXNzSW5zdGFuY2VQcm94eUhhbmRsZXJzKHRyYWNrZWRFdmVudEhhbmRsZXJzKVxuICAgICAgKTtcbiAgICB9LFxuICB9KTtcbn1cbiIsImltcG9ydCBFbnRpdHksIHsgRW50aXR5SWQsIEVudGl0eUNvbXBFdmVudEFyZ3MgfSBmcm9tIFwiLi9FbnRpdHlcIjtcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gXCIuL0NvbXBvbmVudENvbGxlY3Rpb25cIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuaW1wb3J0IHsgU3lzdGVtRnVuYyB9IGZyb20gXCIuL1N5c3RlbXNcIjtcbmltcG9ydCBEZXZUb29scyBmcm9tIFwiLi9EZXZUb29sc1wiO1xuaW1wb3J0IFN5c3RlbXMgZnJvbSAnLi9TeXN0ZW1zJztcbmltcG9ydCB7IFRyYWNrZWRDb21wU3ltYm9sS2V5cyB9IGZyb20gJy4vVHJhY2tlZENvbXBvbmVudCc7XG5cbmV4cG9ydCB0eXBlIENsYXNzQ29uc3RydWN0b3I8VD4gPSB7IG5ldyAoLi4uYXJnczogYW55W10pOiBUIH07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmxkPENUPiB7XG4gIGNvbXBvbmVudENvbGxlY3Rpb25zOiBNYXA8RW50aXR5SWQsIENvbXBvbmVudENvbGxlY3Rpb248Q1Q+PiA9IG5ldyBNYXAoKTtcblxuICBlbnRpdGllczogTWFwPEVudGl0eUlkLCBFbnRpdHk8Q1Q+PiA9IG5ldyBNYXAoKTtcblxuICBlbnRpdGllc0J5Q1R5cGVzOiBNYXA8c3RyaW5nW10sIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIGVudGl0aWVzQnlUYWdzOiBNYXA8VGFnLCBTZXQ8RW50aXR5SWQ+PiA9IG5ldyBNYXAoKTtcblxuICBzeXN0ZW1zOiBTeXN0ZW1zPENUPjtcblxuICBkZXY6IERldlRvb2xzPENUPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRldiA9IG5ldyBEZXZUb29scyh0aGlzKTtcbiAgICB0aGlzLnN5c3RlbXMgPSBuZXcgU3lzdGVtcyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcImZpbmRzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGEgcHJlZGljYXRlXG4gICAqL1xuICBmaW5kID0gKHByZWRpY2F0ZTogKGVudGl0eTogRW50aXR5PENUPikgPT4gYm9vbGVhbik6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogXCJmaW5kc1wiIGFsbCBlbnRpdGllcyBiYXNlZCBvbiBhIHByZWRpY2F0ZSwga2luZGEgbGlrZSBmaWx0ZXIuXG4gICAqL1xuICBmaW5kQWxsID0gKHByZWRpY2F0ZTogKGVudGl0eTogRW50aXR5PENUPikgPT4gYm9vbGVhbik6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwibG9jYXRlc1wiIGEgc2luZ2xlIGVudGl0eSBiYXNlZCBvbiBpdHMgQ29tcG9uZW50cy5cbiAgICovXG4gIGxvY2F0ZSA9IChjbDogQ2xhc3NDb25zdHJ1Y3RvcjxDVD4gfCBDbGFzc0NvbnN0cnVjdG9yPENUPltdKTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHkuY29tcG9uZW50cy5oYXMoY2wpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIExvY2F0ZXMgYWxsIGVudGl0aWVzIHRoYXQgY29udGFpbiB0aGUgY29tcG9uZW50cyBuYW1lZFxuICAgKi9cbiAgbG9jYXRlQWxsID0gKGNsOiBDbGFzc0NvbnN0cnVjdG9yPENUPiB8IENsYXNzQ29uc3RydWN0b3I8Q1Q+W10pOiBFbnRpdHk8Q1Q+W10gPT4ge1xuICAgIGNvbnN0IHJlc3VsdHM6IEVudGl0eTxDVD5bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKGVudGl0eS5jb21wb25lbnRzLmhhcyhjbCkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdyYWJzIHRoZSBmaXJzdCBlbnRpdHksIGFuZCBpdHMgcmVsYXRlZCBjb21wb25lbnQsIHRoYXQgbWF0Y2hlcyB0aGUgY29tcG9uZW50IHR5cGUuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYFxuICAgKiBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50IH0gPSB3b3JsZC5ncmFiKE15Q29tcG9uZW50KTtcbiAgICogYGBgXG4gICAqL1xuICBncmFiID0gPFQgZXh0ZW5kcyBDVD4oXG4gICAgY2w6IENsYXNzQ29uc3RydWN0b3I8VD5cbiAgKTogeyBlbnRpdHk6IEVudGl0eTxDVD47IGNvbXBvbmVudDogVCB9IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5sb2NhdGUoY2wpO1xuXG4gICAgaWYgKGVudGl0eSkge1xuICAgICAgY29uc3QgY2MgPVxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpIHx8XG4gICAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8VD4oY2wpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbnRpdHksXG4gICAgICAgIGNvbXBvbmVudCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdyYWIgc2luZ2xlIGNvbXBvbmVudCBiYXNlZCBvbiBjb21wb25lbnQgdHlwZSBhbmQgcHJlZGljYXRlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnQgfSA9IHdvcmxkLmdyYWJCeShGaXJzdENvbXBvbmVudCwgKGNvbXApID0+IGNvbXAuaWQgPT0gJ2F3ZXNvbWUnKVxuICAgKiBgYGBcbiAgICovXG4gIGdyYWJCeSA9IDxUIGV4dGVuZHMgQ1Q+KFxuICAgIGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+LFxuICAgIHByZWRpY2F0ZTogKGNvbXA6IFQpID0+IGJvb2xlYW5cbiAgKTogeyBlbnRpdHk6IEVudGl0eTxDVD47IGNvbXBvbmVudDogVCB9IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLmxvY2F0ZUFsbChjbCk7XG4gICAgLy8gY29uc3QgZW50aXRpZXMgPSB0aGlzLmxvY2F0ZUFsbCgoY2wgYXMgdW5rbm93bikgYXMgQ1QpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IGNjID1cbiAgICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZW50aXR5LmlkKSB8fFxuICAgICAgICBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PFQ+KGNsKTtcblxuICAgICAgaWYgKHByZWRpY2F0ZShjb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29tcG9uZW50LFxuICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR3JhYiBhbGwgdGhlIGNvbXBvbmVudHMgcHJpbWFyaWx5LCBhbmQgdGhlIGVudGl0aWVzIGlmIG5lZWRlZFxuICAgKi9cbiAgZ3JhYkFsbCA9IDxUIGV4dGVuZHMgQ1Q+KFxuICAgIGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+XG4gICk6IHsgZW50aXR5OiBFbnRpdHk8Q1Q+OyBjb21wb25lbnQ6IFQgfVtdID0+IHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMubG9jYXRlQWxsKGNsKTtcblxuICAgIHJldHVybiBlbnRpdGllcy5tYXAoKGVudGl0eSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBjb21wb25lbnQ6IGVudGl0eS5jb21wb25lbnRzLmdldDxUPihjbCksXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFRPRE86IEFkZCBncmFiQWxsQnkgbWV0aG9kXG5cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGVudGl0eSBpZCBhbmQgY29tcG9uZW50VHlwZSwgcmV0dXJucyBjb21wb25lbnRcbiAgICovXG4gIGdldCA9IDxUIGV4dGVuZHMgQ1Q+KGVpZDogRW50aXR5SWQsIGNsOiBDbGFzc0NvbnN0cnVjdG9yPFQ+KTogVCA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHJldHVybiBjYy5nZXQ8VD4oY2wpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCBnZXQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGEgY29tcG9uZW50LCB3aXRob3V0IGFueSBhc3NvY2lhdGVkIGVudGl0aWVzLlxuICAgKiBIZWxwZnVsIGlzIHlvdSBrbm93IHRoYXQgb25seSBvbmUgaW5zdGFuY2Ugb2YgYSBjb21wb25lbnQgZXhpc3RzIGFjcm9zcyBhbGwgZW50aXRpZXMuXG4gICAqIEBwYXJhbSBjbCBDb21wb25lbnQgQ2xhc3MgQ29udHJ1Y3RvclxuICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIEEgZGVmYXVsdCBjb21wb25lbnQgaW5zdGFuY2UgaWYgbm8gY29tcG9uZW50cyBhcmUgZm91bmQuXG4gICAqL1xuICBnZXRDb21wb25lbnQgPSA8VCBleHRlbmRzIENUPihcbiAgICBjbDogQ2xhc3NDb25zdHJ1Y3RvcjxUPixcbiAgICBkZWZhdWx0VmFsdWU/OiBUXG4gICk6IFQgfCBudWxsID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmdyYWIoY2wpO1xuXG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuY29tcG9uZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYW4gZW50aXR5IHRoYXQgaGFzIGJlZW4gdGFnZ2VkIHdpdGggdGhlIGdpdmVuIHRhZywgb3IgcmV0dXJuIG51bGw7XG4gICAqL1xuICBnZXRUYWdnZWQgPSAodGFnOiBUYWcpOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgdGFnRW50aXR5SWRzID0gdGhpcy5lbnRpdGllc0J5VGFncy5nZXQodGFnKTtcblxuICAgIGlmICh0YWdFbnRpdHlJZHMpIHtcbiAgICAgIGNvbnN0IGVudGl0eUlkID0gdGFnRW50aXR5SWRzLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcblxuICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5SWQpO1xuXG4gICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHQgYWxsIGVudGl0aWVzIHRoYXQgaGF2ZSBiZWVuIHRhZ2dlZCB3aXRoIHRoZSBnaXZlbiB0YWcuXG4gICAqIEBwYXJhbSB0YWcgQSBzdHJpbmcgb3IgbnVtYmVyLlxuICAgKi9cbiAgZ2V0QWxsVGFnZ2VkID0gKHRhZzogVGFnKTogRW50aXR5PENUPltdID0+IHtcbiAgICBsZXQgZW50aXRpZXM6IEVudGl0eTxDVD5bXSA9IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBjb25zdCB0YWdFbnRpdHlJZHMgPSB0aGlzLmVudGl0aWVzQnlUYWdzLmdldCh0YWcpO1xuXG4gICAgaWYgKHRhZ0VudGl0eUlkcykge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHlJZCBvZiB0YWdFbnRpdHlJZHMpIHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5SWQpO1xuICAgICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgICAgZW50aXRpZXMucHVzaChlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudGl0aWVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wb25lbnQgb24gdGhlIGdpdmVuIGVudGl0eVxuICAgKi9cbiAgYWRkID0gPFQgZXh0ZW5kcyBDVD4oZWlkOiBFbnRpdHlJZCwgY29tcG9uZW50OiBUKTogdGhpcyA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZW50aXRpZXMuZ2V0KGVpZCk7XG5cbiAgICBpZiAoIWVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB3b3JsZC5hZGQ6IFVuYWJsZSB0byBsb2NhdGUgZW50aXR5IHdpdGggaWQgJHtlaWR9YCk7XG4gICAgfVxuXG4gICAgY2MuYWRkKGNvbXBvbmVudCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlaWQsIGNjKTtcblxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKChjdEFyciBhcyBzdHJpbmdbXSkuZXZlcnkoY2MuaGFzQnlOYW1lKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLmlzVHJhY2tlZF0pIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuc2V0V29ybGRdKHRoaXMpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5lbnRpdHlJRHNdLmFkZChlaWQpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5vbkFkZF0odGhpcywgZW50aXR5KTtcbiAgICB9XG5cbiAgICBlbnRpdHkub25Db21wb25lbnRBZGQoeyB3b3JsZDogdGhpcywgY29tcG9uZW50IH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBnaXZlbiBlbnRpdHkuXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBjaGFuZ2Ugd2hhdCBzeXN0ZW1zIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBlbnRpdHkuXG4gICAqL1xuICByZW1vdmUgPSAoZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENsYXNzQ29uc3RydWN0b3I8Q1Q+KTogdGhpcyA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIC8vIG5lZWQgdG8gZ2V0IGNvbXBvbmVudCBpbnN0YW5jZS4uLlxuICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldChjVHlwZSk7XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKGNvbXBvbmVudFtUcmFja2VkQ29tcFN5bWJvbEtleXMuaXNUcmFja2VkXSkge1xuICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZWlkKTtcblxuICAgICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB3b3JsZC5yZW1vdmU6IFVuYWJsZSB0byBsb2NhdGUgZW50aXR5LiBlaWQ6ICR7ZWlkfSwgY1R5cGU6ICR7Y1R5cGUubmFtZX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29tcG9uZW50W1RyYWNrZWRDb21wU3ltYm9sS2V5cy5lbnRpdHlJRHNdLmRlbGV0ZShlaWQpO1xuXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBjb21wb25lbnRbVHJhY2tlZENvbXBTeW1ib2xLZXlzLm9uUmVtb3ZlXSh0aGlzLCBlbnRpdHkpO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSBlbnRpdHkgZnJvbSBjdXJyZW50IGVudGl0aWVzQnlDVHlwZXNcbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmICgoY3RBcnIgYXMgc3RyaW5nW10pLmV2ZXJ5KGNjLmhhc0J5TmFtZSkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNjLnJlbW92ZShjVHlwZSk7XG5cbiAgICAvLyBNb3ZlIGVudGl0eUlkIHRvIG5ldyBDVHlwZXMgaWYgbmVlZGVkLlxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKChjdEFyciBhcyBzdHJpbmdbXSkuZXZlcnkoY2MuaGFzQnlOYW1lKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZWlkKTtcbiAgICBpZiAoZW50aXR5KSB7XG4gICAgICBlbnRpdHkub25Db21wb25lbnRSZW1vdmUoeyB3b3JsZDogdGhpcywgY29tcG9uZW50IH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBbHRlcm5hdGl2ZSBtZXRob2QgZm9yIGFkZGluZyBzeXN0ZW1zLlxuICAgKi9cbiAgYWRkU3lzdGVtKGNUeXBlczogQ2xhc3NDb25zdHJ1Y3RvcjxDVD5bXSwgc3lzdGVtRnVuYzogU3lzdGVtRnVuYzxDVD4sIGZ1bmNOYW1lPzogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5zeXN0ZW1zLmFkZChjVHlwZXMsIHN5c3RlbUZ1bmMsIGZ1bmNOYW1lKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cblxuICByZWdpc3RlckVudGl0eShlbnRpdHk6IEVudGl0eTxDVD4pOiBXb3JsZDxDVD4ge1xuICAgIGNvbnN0IGNjID0gbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlbnRpdHkuaWQsIGNjKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldChlbnRpdHkuaWQsIGVudGl0eSk7XG5cbiAgICBlbnRpdHkub25DcmVhdGUodGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gYW4gZW50aXR5LlxuICAgKi9cbiAgY2xlYXJFbnRpdHlDb21wb25lbnRzKGVudGl0eUlkOiBFbnRpdHlJZCk6IHRoaXMge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVudGl0eUlkLCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVudGl0eUlkKSkge1xuICAgICAgICBlbnRpdHlTZXQuZGVsZXRlKGVudGl0eUlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IHRoYXQgaXMgaW4gdGhlIHdvcmxkLlxuICAgKiBCYXNpY2FsbHkganVzdCBuZXcgRW50aXR5KHdvcmxkKSwgYnV0IHNhdmVzIGFuIGltcG9ydCBvZiBFbnRpdHkuXG4gICAqL1xuICBjcmVhdGVFbnRpdHkoKTogRW50aXR5PENUPiB7XG4gICAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eSh0aGlzKTtcblxuICAgIHJldHVybiBlbnRpdHk7XG5cbiAgICAvLyBSZWdpc3RlciBlbnRpdHkgaGVyZS4uLi5cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbiBlbnRpdHkuXG4gICAqIFNhbWUgYXMgZW50aXR5LmRlc3Ryb3koKS5cbiAgICovXG4gIGRlc3Ryb3lFbnRpdHkoZW50aXR5SWQ6IEVudGl0eUlkKTogV29ybGQ8Q1Q+IHtcbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5SWQpO1xuXG4gICAgaWYgKCFlbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgd29ybGQuZGVzdHJveUVudGl0eTogTm8gZW50aXR5IGZvdW5kLiBlbnRpdHkgaWQ6ICR7ZW50aXR5SWR9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdGllcy5kZWxldGUoZW50aXR5SWQpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlbnRpdHlJZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGFueSB0YWcgYXNzb2NpYXRpb25zIHdpdGggZGVzdHJveWVkIGVudGl0aWVzLlxuICAgIGZvciAoY29uc3QgW3RhZywgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlUYWdzKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlbnRpdHlJZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRpdHlTZXQuc2l6ZSA9PT0gMCkge1xuICAgICAgICB0aGlzLmVudGl0aWVzQnlUYWdzLmRlbGV0ZSh0YWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyB0cmFja0NvbXBvbmVudCB9IGZyb20gJy4vVHJhY2tlZENvbXBvbmVudCc7XG5cbmV4cG9ydCB7XG4gIFdvcmxkLFxuICB0cmFja0NvbXBvbmVudCxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n')}])}));