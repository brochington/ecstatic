!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ecstatic",[],e):"object"==typeof exports?exports.ecstatic=e():n.ecstatic=e()}(window,(function(){return function(n){var e=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(n,t){!function(n,e){if(!a[n]||!G[n])return;for(var t in G[n]=!1,e)Object.prototype.hasOwnProperty.call(e,t)&&(I[t]=e[t]);0==--r&&0===C&&X()}(n,t),e&&e(n,t)};var t,Q=!0,B="9df9667fb5a518c7fb80",i={},c=[],s=[];function F(n){var e=Z[n];if(!e)return R;var Q=function(Q){return e.hot.active?(Z[Q]?-1===Z[Q].parents.indexOf(n)&&Z[Q].parents.push(n):(c=[n],t=Q),-1===e.children.indexOf(Q)&&e.children.push(Q)):(console.warn("[HMR] unexpected require("+Q+") from disposed module "+n),c=[]),R(Q)},B=function(n){return{configurable:!0,enumerable:!0,get:function(){return R[n]},set:function(e){R[n]=e}}};for(var i in R)Object.prototype.hasOwnProperty.call(R,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(Q,i,B(i));return Q.e=function(n){return"ready"===o&&U("prepare"),C++,R.e(n).then(e,(function(n){throw e(),n}));function e(){C--,"prepare"===o&&(u[n]||y(n),0===C&&0===r&&X())}},Q.t=function(n,e){return 1&e&&(n=Q(n)),R.t(n,-2&e)},Q}function l(n){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==n,active:!0,accept:function(n,t){if(void 0===n)e._selfAccepted=!0;else if("function"==typeof n)e._selfAccepted=n;else if("object"==typeof n)for(var Q=0;Q<n.length;Q++)e._acceptedDependencies[n[Q]]=t||function(){};else e._acceptedDependencies[n]=t||function(){}},decline:function(n){if(void 0===n)e._selfDeclined=!0;else if("object"==typeof n)for(var t=0;t<n.length;t++)e._declinedDependencies[n[t]]=!0;else e._declinedDependencies[n]=!0},dispose:function(n){e._disposeHandlers.push(n)},addDisposeHandler:function(n){e._disposeHandlers.push(n)},removeDisposeHandler:function(n){var t=e._disposeHandlers.indexOf(n);t>=0&&e._disposeHandlers.splice(t,1)},check:x,apply:V,status:function(n){if(!n)return o;d.push(n)},addStatusHandler:function(n){d.push(n)},removeStatusHandler:function(n){var e=d.indexOf(n);e>=0&&d.splice(e,1)},data:i[n]};return t=void 0,e}var d=[],o="idle";function U(n){o=n;for(var e=0;e<d.length;e++)d[e].call(null,n)}var b,I,g,r=0,C=0,u={},G={},a={};function p(n){return+n+""===n?+n:n}function x(n){if("idle"!==o)throw new Error("check() is only allowed in idle status");return Q=n,U("check"),(e=1e4,e=e||1e4,new Promise((function(n,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var Q=new XMLHttpRequest,B=R.p+"hot/hot-update.json";Q.open("GET",B,!0),Q.timeout=e,Q.send(null)}catch(n){return t(n)}Q.onreadystatechange=function(){if(4===Q.readyState)if(0===Q.status)t(new Error("Manifest request to "+B+" timed out."));else if(404===Q.status)n();else if(200!==Q.status&&304!==Q.status)t(new Error("Manifest request to "+B+" failed."));else{try{var e=JSON.parse(Q.responseText)}catch(n){return void t(n)}n(e)}}}))).then((function(n){if(!n)return U("idle"),null;G={},u={},a=n.c,g=n.h,U("prepare");var e=new Promise((function(n,e){b={resolve:n,reject:e}}));I={};return y(0),"prepare"===o&&0===C&&0===r&&X(),e}));var e}function y(n){var e;a[n]?(G[n]=!0,r++,(e=document.createElement("script")).charset="utf-8",e.src=R.p+"hot/hot-update.js",document.head.appendChild(e)):u[n]=!0}function X(){U("ready");var n=b;if(b=null,n)if(Q)Promise.resolve().then((function(){return V(Q)})).then((function(e){n.resolve(e)}),(function(e){n.reject(e)}));else{var e=[];for(var t in I)Object.prototype.hasOwnProperty.call(I,t)&&e.push(p(t));n.resolve(e)}}function V(e){if("ready"!==o)throw new Error("apply() is only allowed in ready status");var t,Q,s,F,l;function d(n){for(var e=[n],t={},Q=e.map((function(n){return{chain:[n],id:n}}));Q.length>0;){var B=Q.pop(),i=B.id,c=B.chain;if((F=Z[i])&&!F.hot._selfAccepted){if(F.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(F.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var s=0;s<F.parents.length;s++){var l=F.parents[s],d=Z[l];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([l]),moduleId:i,parentId:l};-1===e.indexOf(l)&&(d.hot._acceptedDependencies[i]?(t[l]||(t[l]=[]),b(t[l],[i])):(delete t[l],e.push(l),Q.push({chain:c.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:n,outdatedModules:e,outdatedDependencies:t}}function b(n,e){for(var t=0;t<e.length;t++){var Q=e[t];-1===n.indexOf(Q)&&n.push(Q)}}e=e||{};var r={},C=[],u={},G=function(){console.warn("[HMR] unexpected require("+y.moduleId+") to disposed module")};for(var x in I)if(Object.prototype.hasOwnProperty.call(I,x)){var y;l=p(x);var X=!1,V=!1,L=!1,m="";switch((y=I[x]?d(l):{type:"disposed",moduleId:x}).chain&&(m="\nUpdate propagation: "+y.chain.join(" -> ")),y.type){case"self-declined":e.onDeclined&&e.onDeclined(y),e.ignoreDeclined||(X=new Error("Aborted because of self decline: "+y.moduleId+m));break;case"declined":e.onDeclined&&e.onDeclined(y),e.ignoreDeclined||(X=new Error("Aborted because of declined dependency: "+y.moduleId+" in "+y.parentId+m));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(y),e.ignoreUnaccepted||(X=new Error("Aborted because "+l+" is not accepted"+m));break;case"accepted":e.onAccepted&&e.onAccepted(y),V=!0;break;case"disposed":e.onDisposed&&e.onDisposed(y),L=!0;break;default:throw new Error("Unexception type "+y.type)}if(X)return U("abort"),Promise.reject(X);if(V)for(l in u[l]=I[l],b(C,y.outdatedModules),y.outdatedDependencies)Object.prototype.hasOwnProperty.call(y.outdatedDependencies,l)&&(r[l]||(r[l]=[]),b(r[l],y.outdatedDependencies[l]));L&&(b(C,[y.moduleId]),u[l]=G)}var E,N=[];for(Q=0;Q<C.length;Q++)l=C[Q],Z[l]&&Z[l].hot._selfAccepted&&u[l]!==G&&N.push({module:l,errorHandler:Z[l].hot._selfAccepted});U("dispose"),Object.keys(a).forEach((function(n){!1===a[n]&&function(n){delete installedChunks[n]}(n)}));for(var W,A,D=C.slice();D.length>0;)if(l=D.pop(),F=Z[l]){var h={},v=F.hot._disposeHandlers;for(s=0;s<v.length;s++)(t=v[s])(h);for(i[l]=h,F.hot.active=!1,delete Z[l],delete r[l],s=0;s<F.children.length;s++){var f=Z[F.children[s]];f&&((E=f.parents.indexOf(l))>=0&&f.parents.splice(E,1))}}for(l in r)if(Object.prototype.hasOwnProperty.call(r,l)&&(F=Z[l]))for(A=r[l],s=0;s<A.length;s++)W=A[s],(E=F.children.indexOf(W))>=0&&F.children.splice(E,1);for(l in U("apply"),B=g,u)Object.prototype.hasOwnProperty.call(u,l)&&(n[l]=u[l]);var S=null;for(l in r)if(Object.prototype.hasOwnProperty.call(r,l)&&(F=Z[l])){A=r[l];var H=[];for(Q=0;Q<A.length;Q++)if(W=A[Q],t=F.hot._acceptedDependencies[W]){if(-1!==H.indexOf(t))continue;H.push(t)}for(Q=0;Q<H.length;Q++){t=H[Q];try{t(A)}catch(n){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:l,dependencyId:A[Q],error:n}),e.ignoreErrored||S||(S=n)}}}for(Q=0;Q<N.length;Q++){var T=N[Q];l=T.module,c=[l];try{R(l)}catch(n){if("function"==typeof T.errorHandler)try{T.errorHandler(n)}catch(t){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:t,originalError:n}),e.ignoreErrored||S||(S=t),S||(S=n)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:l,error:n}),e.ignoreErrored||S||(S=n)}}return S?(U("fail"),Promise.reject(S)):(U("idle"),new Promise((function(n){n(C)})))}var Z={};function R(e){if(Z[e])return Z[e].exports;var t=Z[e]={i:e,l:!1,exports:{},hot:l(e),parents:(s=c,c=[],s),children:[]};return n[e].call(t.exports,t,t.exports,F(e)),t.l=!0,t.exports}return R.m=n,R.c=Z,R.d=function(n,e,t){R.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},R.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},R.t=function(n,e){if(1&e&&(n=R(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(R.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var Q in n)R.d(t,Q,function(e){return n[e]}.bind(null,Q));return t},R.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return R.d(e,"a",e),e},R.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},R.p="/static/",R.h=function(){return B},F(0)(R.s=0)}([function(n,e,t){n.exports=t(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.type, component);\n    });\n\n    _defineProperty(this, "update", (cType, func) => {\n      if (this.components.has(cType)) {\n        const c = this.components.get(cType);\n\n        if (c) {\n          const updatedComponent = func(c);\n          this.components.set(cType, updatedComponent);\n        }\n      }\n    });\n\n    _defineProperty(this, "get", cType => {\n      if (!this.components.has(cType)) {\n        throw new Error(`ComponentCollection does not have component of type ${cType}`);\n      }\n\n      return this.components.get(cType);\n    });\n\n    _defineProperty(this, "has", cType => {\n      if (Array.isArray(cType)) {\n        return cType.every(ct => this.components.has(ct) === true);\n      } else {\n        return this.components.has(cType);\n      }\n    });\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cTypes => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cTypes => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cType => {\n      const entity = this.locate(cType);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id);\n        const component = cc.get(cType);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cType, predicate) => {\n      const entities = this.locateAll(cType);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id);\n        const component = cc.get(cType);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cType => {\n      return this.locateAll(cType).map(entity => ({\n        entity,\n        component: entity.components.get(cType)\n      }));\n    });\n\n    World_defineProperty(this, "get", (eid, cType) => {\n      const cc = this.componentCollections.get(eid);\n      return cc.get(cType);\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  registerSystem(cTypes) {\n    this.entitiesByCTypes.set(cTypes, new Set());\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n  }\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n  }\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != \'undefined\' && typeof msCrypto.getRandomValues == \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex[bytesToUuid_i] = (bytesToUuid_i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], \'-\', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join(\'\');\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == \'string\') {\n    buf = options === \'binary\' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "id", void 0);\n\n    Entity_defineProperty(this, "world", void 0);\n\n    this.id = esm_browser_v4();\n    this.world = world;\n    /*\n    Registering with the World.\n    */\n\n    this.world.registerEntity(this);\n  }\n\n  add(component) {\n    this.world.set(this.id, component);\n    return this;\n  } // TODO: figure out some much better error handling throughout this library.\n  //       Probably throw some errors.\n\n\n  get(cType) {\n    const cc = this.world.entities.get(this.id);\n\n    if (!cc) {\n      console.error(\'unable to find component collection for specified entity: \', this.id);\n    }\n\n    const component = cc.get(cType);\n\n    if (!component) {\n      console.error(`Unable to find component of type ${cType} in entity ${this.id}`);\n    }\n\n    return component;\n  }\n\n  getAll() {\n    return this.world.componentCollections.get(this.id);\n  }\n\n  get components() {\n    return this.world.componentCollections.get(this.id);\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this.world.clearEntityComponents(this.id);\n    return this;\n  }\n\n  destroy() {\n    this.world.destroyEntity(this.id);\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\nfunction createSystem(world, cTypes, systemFunc) {\n  world.registerSystem(cTypes);\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    for (const eid of world.entitiesByCTypes.get(cTypes)) {\n      const args = {\n        entity: world.entities.get(eid),\n        components: world.componentCollections.get(eid),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsInR5cGUiLCJjVHlwZSIsImZ1bmMiLCJoYXMiLCJjIiwiZ2V0IiwidXBkYXRlZENvbXBvbmVudCIsIkVycm9yIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJjdCIsInNpemUiLCJXb3JsZCIsInByZWRpY2F0ZSIsImVudGl0eSIsImVudGl0aWVzIiwidmFsdWVzIiwicmVzdWx0cyIsInB1c2giLCJjVHlwZXMiLCJsb2NhdGUiLCJjYyIsImNvbXBvbmVudENvbGxlY3Rpb25zIiwiaWQiLCJsb2NhdGVBbGwiLCJtYXAiLCJlaWQiLCJhZGQiLCJjdEFyciIsImVudGl0eVNldCIsImVudGl0aWVzQnlDVHlwZXMiLCJyZWdpc3RlclN5c3RlbSIsIlNldCIsInJlZ2lzdGVyRW50aXR5IiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiZGVsZXRlIiwiZGVzdHJveUVudGl0eSIsIkVudGl0eSIsImNvbnN0cnVjdG9yIiwid29ybGQiLCJ1dWlkdjQiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRBbGwiLCJjbGVhciIsImRlc3Ryb3kiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdGVTeXN0ZW0iLCJzeXN0ZW1GdW5jIiwiaW5kZXgiLCJhcmdzIiwiaXNGaXJzdCIsImlzTGFzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFZSxNQUFNQSxtQkFBTixDQUE4QjtBQUFBO0FBQUEsd0NBQ0UsSUFBSUMsR0FBSixFQURGOztBQUFBLGlDQUdwQ0MsU0FBRCxJQUFvQztBQUN4QyxXQUFLQyxVQUFMLENBQWdCQyxHQUFoQixDQUFvQkYsU0FBUyxDQUFDRyxJQUE5QixFQUFvQ0gsU0FBcEM7QUFDRCxLQUwwQzs7QUFBQSxvQ0FPbEMsQ0FBQ0ksS0FBRCxFQUFZQyxJQUFaLEtBQWdFO0FBQ3ZFLFVBQUksS0FBS0osVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JGLEtBQXBCLENBQUosRUFBZ0M7QUFDOUIsY0FBTUcsQ0FBQyxHQUFHLEtBQUtOLFVBQUwsQ0FBZ0JPLEdBQWhCLENBQW9CSixLQUFwQixDQUFWOztBQUVBLFlBQUlHLENBQUosRUFBTztBQUNMLGdCQUFNRSxnQkFBZ0IsR0FBR0osSUFBSSxDQUFDRSxDQUFELENBQTdCO0FBQ0EsZUFBS04sVUFBTCxDQUFnQkMsR0FBaEIsQ0FBb0JFLEtBQXBCLEVBQTJCSyxnQkFBM0I7QUFDRDtBQUNGO0FBQ0YsS0FoQjBDOztBQUFBLGlDQWtCakNMLEtBQUosSUFBcUI7QUFDekIsVUFBSSxDQUFDLEtBQUtILFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CRixLQUFwQixDQUFMLEVBQWlDO0FBQy9CLGNBQU0sSUFBSU0sS0FBSixDQUFXLHVEQUFzRE4sS0FBTSxFQUF2RSxDQUFOO0FBQ0Q7O0FBRUQsYUFBTyxLQUFLSCxVQUFMLENBQWdCTyxHQUFoQixDQUFvQkosS0FBcEIsQ0FBUDtBQUNELEtBeEIwQzs7QUFBQSxpQ0EwQnBDQSxLQUFELElBQStC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QSxVQUFNdEMsSUFBSSxHQUFHNEIsS0FBSyxDQUFDVCxnQkFBTixDQUF1Qm5CLElBQXBDLENBRmlCLENBSWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBLFNBQUssTUFBTWUsR0FBWCxJQUFrQmEsS0FBSyxDQUFDVCxnQkFBTixDQUF1QjFCLEdBQXZCLENBQTJCZSxNQUEzQixDQUFsQixFQUFzRDtBQUNwRCxZQUFNK0IsSUFBd0IsR0FBRztBQUMvQnBDLGNBQU0sRUFBRXlCLEtBQUssQ0FBQ3hCLFFBQU4sQ0FBZVgsR0FBZixDQUFtQnNCLEdBQW5CLENBRHVCO0FBRS9CN0Isa0JBQVUsRUFBRTBDLEtBQUssQ0FBQ2pCLG9CQUFOLENBQTJCbEIsR0FBM0IsQ0FBK0JzQixHQUEvQixDQUZtQjtBQUcvQmEsYUFIK0I7QUFJL0JVLGFBSitCO0FBSy9CdEMsWUFMK0I7QUFNL0J3QyxlQUFPLEVBQUVGLEtBQUssS0FBSyxDQU5ZO0FBTy9CRyxjQUFNLEVBQUVILEtBQUssR0FBRyxDQUFSLEtBQWN0QztBQVBTLE9BQWpDO0FBVUFxQyxnQkFBVSxDQUFDRSxJQUFELENBQVY7QUFFQUQsV0FBSyxJQUFJLENBQVQ7QUFDRDtBQUNGLEdBM0NEO0FBNENELEM7O0FDdkVEO0FBQ0E7QUFDQSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnRDb2xsZWN0aW9uPENUPiB7XG4gIHByaXZhdGUgY29tcG9uZW50czogTWFwPENULCBDb21wb25lbnQ8Q1Q+PiA9IG5ldyBNYXAoKTtcblxuICBhZGQgPSAoY29tcG9uZW50OiBDb21wb25lbnQ8Q1Q+KTogdm9pZCA9PiB7XG4gICAgdGhpcy5jb21wb25lbnRzLnNldChjb21wb25lbnQudHlwZSwgY29tcG9uZW50KTtcbiAgfVxuXG4gIHVwZGF0ZSA9IChjVHlwZTogQ1QsIGZ1bmM6IChjOiBDb21wb25lbnQ8Q1Q+KSA9PiBDb21wb25lbnQ8Q1Q+KTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50cy5oYXMoY1R5cGUpKSB7XG4gICAgICBjb25zdCBjID0gdGhpcy5jb21wb25lbnRzLmdldChjVHlwZSk7XG5cbiAgICAgIGlmIChjKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb21wb25lbnQgPSBmdW5jKGMpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KGNUeXBlLCB1cGRhdGVkQ29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZ2V0ID0gPEM+KGNUeXBlOiBDVCk6IEMgPT4ge1xuICAgIGlmICghdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50Q29sbGVjdGlvbiBkb2VzIG5vdCBoYXZlIGNvbXBvbmVudCBvZiB0eXBlICR7Y1R5cGV9YClcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpIGFzIHVua25vd24gYXMgQztcbiAgfVxuXG4gIGhhcyA9IChjVHlwZTogQ1QgfCBDVFtdKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY1R5cGUpKSB7XG4gICAgICByZXR1cm4gY1R5cGUuZXZlcnkoKGN0KSA9PiB0aGlzLmNvbXBvbmVudHMuaGFzKGN0KSA9PT0gdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKVxuICAgIH1cbiAgfVxuXG4gIGdldCBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5zaXplO1xuICB9XG59XG4iLCJpbXBvcnQgRW50aXR5LCB7IEVudGl0eUlkIH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcblxudHlwZSBGaW5kUHJlZGljYXRlPENUPiA9IChlbnRpdHk6IEVudGl0eTxDVD4pID0+IGJvb2xlYW47XG5cbnR5cGUgR3JhYlByZWRpY2F0ZTxDPiA9IChjb21wb25lbnQ6IEMpID0+IGJvb2xlYW47XG5cbmludGVyZmFjZSBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPiB7XG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgY29tcG9uZW50OiBDO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JsZDxDVD4ge1xuICBjb21wb25lbnRDb2xsZWN0aW9uczogTWFwPEVudGl0eUlkLCBDb21wb25lbnRDb2xsZWN0aW9uPENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXM6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXNCeUNUeXBlczogTWFwPENUW10sIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIC8qKiBcImZpbmRzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGEgcHJlZGljYXRlICovXG4gIGZpbmQgPSAocHJlZGljYXRlOiBGaW5kUHJlZGljYXRlPENUPik6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocHJlZGljYXRlKGVudGl0eSkpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKiBcImZpbmRzXCIgYWxsIGVudGl0aWVzIGJhc2VkIG9uIGEgcHJlZGljYXRlLCBraW5kYSBsaWtlIGZpbHRlci4gKi9cbiAgZmluZEFsbCA9IChwcmVkaWNhdGU6IEZpbmRQcmVkaWNhdGU8Q1Q+KTogRW50aXR5PENUPltdID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbnRpdHk8Q1Q+W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKiBcImxvY2F0ZXNcIiBhIHNpbmdsZSBlbnRpdHkgYmFzZWQgb24gaXRzIENvbXBvbmVudHMuICovXG4gIGxvY2F0ZSA9IChjVHlwZXM6IENUIHwgQ1RbXSk6IEVudGl0eTxDVD4gfCBudWxsID0+IHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNUeXBlcykpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKiBMb2NhdGVzIGFsbCBlbnRpdGllcyB0aGF0IGNvbnRhaW4gdGhlIGNvbXBvbmVudHMgbmFtZWQgKi9cbiAgbG9jYXRlQWxsID0gKGNUeXBlczogQ1QgfCBDVFtdKTogRW50aXR5PENUPltdID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbnRpdHk8Q1Q+W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHkuY29tcG9uZW50cy5oYXMoY1R5cGVzKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIGdyYWIgPSA8Qz4oY1R5cGU6IENUKTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSB0aGlzLmxvY2F0ZShjVHlwZSk7XG5cbiAgICBpZiAoZW50aXR5KSB7XG4gICAgICBjb25zdCBjYyA9IHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVudGl0eS5pZCk7XG4gIFxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBjb21wb25lbnQsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiBHcmFiIHNpbmdsZSBjb21wb25lbnQgYmFzZWQgb24gY29tcG9uZW50IHR5cGUgYW5kIHByZWRpY2F0ZS4gKi9cbiAgZ3JhYkJ5ID0gPEM+KGNUeXBlOiBDVCwgcHJlZGljYXRlOiBHcmFiUHJlZGljYXRlPEM+KTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMubG9jYXRlQWxsKGNUeXBlKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG5cbiAgICAgIGNvbnN0IGNjID0gdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZW50aXR5LmlkKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuXG4gICAgICBpZiAocHJlZGljYXRlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgZW50aXR5LFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiBHcmFiIGFsbCB0aGUgY29tcG9uZW50cyBwcmltYXJpbHksIGFuZCB0aGUgZW50aXRpZXMgaWYgbmVlZGVkICAqL1xuICBncmFiQWxsID0gPEM+KGNUeXBlOiBDVCk6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+W10gPT4ge1xuICAgIHJldHVybiB0aGlzXG4gICAgICAubG9jYXRlQWxsKGNUeXBlKVxuICAgICAgLm1hcChlbnRpdHkgPT4gKHtcbiAgICAgICAgZW50aXR5LFxuICAgICAgICBjb21wb25lbnQ6IGVudGl0eS5jb21wb25lbnRzLmdldChjVHlwZSkgYXMgdW5rbm93biBhcyBDLFxuICAgICAgfSkpO1xuICB9XG5cbiAgLyogR2l2ZW4gYW4gZW50aXR5IGlkIGFuZCBjb21wb25lbnRUeXBlLCByZXR1cm5zIGNvbXBvbmVudCAqL1xuICBnZXQgPSA8Qz4oZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENUKTogQyA9PiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpO1xuXG4gICAgcmV0dXJuIGNjLmdldDxDPihjVHlwZSk7XG4gIH1cblxuICBzZXQgPSAoZWlkOiBFbnRpdHlJZCwgY29tcG9uZW50OiBDb21wb25lbnQ8Q1Q+KTogdm9pZCA9PiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY2MuYWRkKGNvbXBvbmVudCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlaWQsIGNjKTtcblxuICAgIGZvciAoY29uc3QgW2N0QXJyLCBlbnRpdHlTZXRdIG9mIHRoaXMuZW50aXRpZXNCeUNUeXBlcykge1xuICAgICAgaWYgKGN0QXJyLmV2ZXJ5KGNjLmhhcykpIHtcbiAgICAgICAgZW50aXR5U2V0LmFkZChlaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKGNUeXBlczogQ1RbXSk6IHZvaWQge1xuICAgIHRoaXMuZW50aXRpZXNCeUNUeXBlcy5zZXQoY1R5cGVzLCBuZXcgU2V0PEVudGl0eUlkPigpKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRW50aXR5KGVudGl0eTogRW50aXR5PENUPik6IHZvaWQge1xuICAgIGNvbnN0IGNjID0gbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLnNldChlbnRpdHkuaWQsIGNjKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldChlbnRpdHkuaWQsIGVudGl0eSk7XG4gIH1cblxuICBjbGVhckVudGl0eUNvbXBvbmVudHMoZWlkOiBFbnRpdHlJZCk6IHZvaWQge1xuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCkpO1xuXG4gICAgZm9yIChjb25zdCBlbnRpdHlTZXQgb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5U2V0LmhhcyhlaWQpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RW50aXR5KGVpZDogRW50aXR5SWQpOiB2b2lkIHtcbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmRlbGV0ZShlaWQpO1xuICAgIHRoaXMuZW50aXRpZXMuZGVsZXRlKGVpZCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uIEFsc28sXG4vLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDsgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcblxuICByZXR1cm4gW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJywgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLCBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJywgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXV0uam9pbignJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJ5dGVzVG9VdWlkOyIsImltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IGJ5dGVzVG9VdWlkIGZyb20gJy4vYnl0ZXNUb1V1aWQuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tICcuL0NvbXBvbmVudENvbGxlY3Rpb24nO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5PENUPiB7XG4gIGlkOiBzdHJpbmc7XG4gIHdvcmxkOiBXb3JsZDxDVD47XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFdvcmxkPENUPikge1xuICAgIHRoaXMuaWQgPSB1dWlkdjQoKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG5cbiAgICAvKlxuICAgIFJlZ2lzdGVyaW5nIHdpdGggdGhlIFdvcmxkLlxuICAgICovXG4gICAgdGhpcy53b3JsZC5yZWdpc3RlckVudGl0eSh0aGlzKTtcbiAgfVxuXG4gIGFkZChjb21wb25lbnQ6IENvbXBvbmVudDxDVD4pOiBFbnRpdHk8Q1Q+IHtcbiAgICB0aGlzLndvcmxkLnNldCh0aGlzLmlkLCBjb21wb25lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBUT0RPOiBmaWd1cmUgb3V0IHNvbWUgbXVjaCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgdGhyb3VnaG91dCB0aGlzIGxpYnJhcnkuXG4gIC8vICAgICAgIFByb2JhYmx5IHRocm93IHNvbWUgZXJyb3JzLlxuICBnZXQoY1R5cGU6IENUKTogQ29tcG9uZW50PENUPiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLndvcmxkLmVudGl0aWVzLmdldCh0aGlzLmlkKTtcblxuICAgIGlmICghY2MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuYWJsZSB0byBmaW5kIGNvbXBvbmVudCBjb2xsZWN0aW9uIGZvciBzcGVjaWZpZWQgZW50aXR5OiAnLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQoY1R5cGUpXG5cbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGZpbmQgY29tcG9uZW50IG9mIHR5cGUgJHtjVHlwZX0gaW4gZW50aXR5ICR7dGhpcy5pZH1gKTtcbiAgICB9XG5cblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBnZXRBbGwoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiB0aGlzLndvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldCh0aGlzLmlkKTtcbiAgfVxuXG4gIGdldCBjb21wb25lbnRzKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy53b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5pZCk7XG4gIH1cblxuICAvKiogQ2xlYXJzIGFsbCBjb21wb25lbnRzIGZyb20gYW4gRW50aXR5ICovXG4gIGNsZWFyKCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMud29ybGQuY2xlYXJFbnRpdHlDb21wb25lbnRzKHRoaXMuaWQpO1xuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy53b3JsZC5kZXN0cm95RW50aXR5KHRoaXMuaWQpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHk8Q1Q+KFxuICB3b3JsZDogV29ybGQ8Q1Q+LFxuKTogRW50aXR5PENUPiB7XG4gIGNvbnN0IGVudGl0eSA9IG5ldyBFbnRpdHk8Q1Q+KHdvcmxkKTtcblxuICByZXR1cm4gZW50aXR5O1xufVxuXG5cbiIsImltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCBFbnRpdHkgZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcblxuZXhwb3J0IHR5cGUgU3lzdGVtID0gKCkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1GdW5jQXJnczxDVD4ge1xuICBlbnRpdHk6IEVudGl0eTxDVD47XG4gIGNvbXBvbmVudHM6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+O1xuICB3b3JsZDogV29ybGQ8Q1Q+O1xuICBpbmRleDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVD4gPSAoXG4gIHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPixcbikgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbTxDVD4oXG4gIHdvcmxkOiBXb3JsZDxDVD4sXG4gIGNUeXBlczogQ1RbXSxcbiAgc3lzdGVtRnVuYzogU3lzdGVtRnVuYzxDVD5cbik6IFN5c3RlbSB7XG4gIHdvcmxkLnJlZ2lzdGVyU3lzdGVtKGNUeXBlcyk7XG5cbiAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IHNpemUgPSB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNpemU7XG5cbiAgICAvLyBVc2VkIGZvciBtYXRjaGluZyB0aGUgYXJyYXkgb2YgQ29tcG9uZW50VHlwZXMgd2hpY2ggaXMgdGhlIGtleVxuICAgIC8vIG9mIHdoZXJlIHRoZSBDb21wb25lbnRDb2xsZWN0aW9uIGlzLCB3aXRoIHRoZSBhcnJheSBvZiBDb21wb25lbnRUeXBlc1xuICAgIC8vIHRoYXQgYXJlIHBhc3Nlcy5cbiAgICAvLyBNaWdodCBiZSBuaWNlIGluIHRoZSBmdXR1cmUgdG8gZ28gYmFjayB0byBhIHJlZiBjaGVjayBvbiBjVHlwZXMsIGJ1dFxuICAgIC8vIGZvciBub3cgdGhpcyBkb2Vzbid0IHNlZW0gdG8gYmUgdGhhdCBtdWNoIG9mIGEgcGVyZiBoaXQuXG4gICAgLy8gZm9yIChjb25zdCBjdCBvZiB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmtleXMoKSkge1xuICAgIC8vICAgaWYgKGNUeXBlcy5sZW5ndGggPT09IGN0Lmxlbmd0aCAmJiBjVHlwZXMuZXZlcnkoYyA9PiBjdC5pbmNsdWRlcyhjKSkpIHtcbiAgICAvLyAgICAgZm9yIChjb25zdCBlaWQgb2Ygd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSkge1xuICAgIC8vICAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAvLyAgICAgICAgIGVudGl0eTogd29ybGQuZW50aXRpZXMuZ2V0KGVpZCksXG4gICAgLy8gICAgICAgICBjb21wb25lbnRzOiB3b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSxcbiAgICAvLyAgICAgICAgIHdvcmxkLFxuICAgIC8vICAgICAgICAgaW5kZXgsXG4gICAgLy8gICAgICAgICBzaXplLFxuICAgIC8vICAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgLy8gICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAvLyAgICAgICB9XG4gICAgXG4gICAgLy8gICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcbiAgICBcbiAgICAvLyAgICAgICBpbmRleCArPSAxO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIGZvciAoY29uc3QgZWlkIG9mIHdvcmxkLmVudGl0aWVzQnlDVHlwZXMuZ2V0KGNUeXBlcykpIHtcbiAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAgICAgZW50aXR5OiB3b3JsZC5lbnRpdGllcy5nZXQoZWlkKSxcbiAgICAgICAgY29tcG9uZW50czogd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCksXG4gICAgICAgIHdvcmxkLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgICAgIGlzTGFzdDogaW5kZXggKyAxID09PSBzaXplLFxuICAgICAgfVxuXG4gICAgICBzeXN0ZW1GdW5jKGFyZ3MpO1xuXG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFdvcmxkIGZyb20gJy4vV29ybGQnO1xuaW1wb3J0IHsgY3JlYXRlRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgY3JlYXRlU3lzdGVtIH0gZnJvbSAnLi9TeXN0ZW0nO1xuXG5leHBvcnQge1xuICBXb3JsZCxcbiAgY3JlYXRlRW50aXR5LFxuICBjcmVhdGVTeXN0ZW0sXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n')}])}));