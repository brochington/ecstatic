!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ecstatic",[],n):"object"==typeof exports?exports.ecstatic=n():e.ecstatic=n()}(window,(function(){return function(e){var n=window.webpackHotUpdateecstatic;window.webpackHotUpdateecstatic=function(e,t){!function(e,n){if(!y[e]||!a[e])return;for(var t in a[e]=!1,n)Object.prototype.hasOwnProperty.call(n,t)&&(g[t]=n[t]);0==--G&&0===u&&Z()}(e,t),n&&n(e,t)};var t,Q=!0,B="5515f6dc1f86eaeb2711",c={},i=[],s=[];function l(e){var n=E[e];if(!n)return m;var Q=function(Q){return n.hot.active?(E[Q]?-1===E[Q].parents.indexOf(e)&&E[Q].parents.push(e):(i=[e],t=Q),-1===n.children.indexOf(Q)&&n.children.push(Q)):(console.warn("[HMR] unexpected require("+Q+") from disposed module "+e),i=[]),m(Q)},B=function(e){return{configurable:!0,enumerable:!0,get:function(){return m[e]},set:function(n){m[e]=n}}};for(var c in m)Object.prototype.hasOwnProperty.call(m,c)&&"e"!==c&&"t"!==c&&Object.defineProperty(Q,c,B(c));return Q.e=function(e){return"ready"===I&&o("prepare"),u++,m.e(e).then(n,(function(e){throw n(),e}));function n(){u--,"prepare"===I&&(r[e]||p(e),0===u&&0===G&&Z())}},Q.t=function(e,n){return 1&n&&(e=Q(e)),m.t(e,-2&n)},Q}function d(n){var Q={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:t!==n,active:!0,accept:function(e,n){if(void 0===e)Q._selfAccepted=!0;else if("function"==typeof e)Q._selfAccepted=e;else if("object"==typeof e)for(var t=0;t<e.length;t++)Q._acceptedDependencies[e[t]]=n||function(){};else Q._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)Q._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)Q._declinedDependencies[e[n]]=!0;else Q._declinedDependencies[e]=!0},dispose:function(e){Q._disposeHandlers.push(e)},addDisposeHandler:function(e){Q._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=Q._disposeHandlers.indexOf(e);n>=0&&Q._disposeHandlers.splice(n,1)},invalidate:function(){switch(this._selfInvalidated=!0,I){case"idle":(g={})[n]=e[n],o("ready");break;case"ready":L(n);break;case"prepare":case"check":case"dispose":case"apply":(C=C||[]).push(n)}},check:x,apply:V,status:function(e){if(!e)return I;F.push(e)},addStatusHandler:function(e){F.push(e)},removeStatusHandler:function(e){var n=F.indexOf(e);n>=0&&F.splice(n,1)},data:c[n]};return t=void 0,Q}var F=[],I="idle";function o(e){I=e;for(var n=0;n<F.length;n++)F[n].call(null,e)}var U,g,b,C,G=0,u=0,r={},a={},y={};function X(e){return+e+""===e?+e:e}function x(e){if("idle"!==I)throw new Error("check() is only allowed in idle status");return Q=e,o("check"),(n=1e4,n=n||1e4,new Promise((function(e,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var Q=new XMLHttpRequest,B=m.p+"hot/hot-update.json";Q.open("GET",B,!0),Q.timeout=n,Q.send(null)}catch(e){return t(e)}Q.onreadystatechange=function(){if(4===Q.readyState)if(0===Q.status)t(new Error("Manifest request to "+B+" timed out."));else if(404===Q.status)e();else if(200!==Q.status&&304!==Q.status)t(new Error("Manifest request to "+B+" failed."));else{try{var n=JSON.parse(Q.responseText)}catch(e){return void t(e)}e(n)}}}))).then((function(e){if(!e)return o(R()?"ready":"idle"),null;a={},r={},y=e.c,b=e.h,o("prepare");var n=new Promise((function(e,n){U={resolve:e,reject:n}}));g={};return p(0),"prepare"===I&&0===u&&0===G&&Z(),n}));var n}function p(e){var n;y[e]?(a[e]=!0,G++,(n=document.createElement("script")).charset="utf-8",n.src=m.p+"hot/hot-update.js",document.head.appendChild(n)):r[e]=!0}function Z(){o("ready");var e=U;if(U=null,e)if(Q)Promise.resolve().then((function(){return V(Q)})).then((function(n){e.resolve(n)}),(function(n){e.reject(n)}));else{var n=[];for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&n.push(X(t));e.resolve(n)}}function V(n){if("ready"!==I)throw new Error("apply() is only allowed in ready status");return function n(Q){var s,l,d,F,I;function U(e){for(var n=[e],t={},Q=n.map((function(e){return{chain:[e],id:e}}));Q.length>0;){var B=Q.pop(),c=B.id,i=B.chain;if((F=E[c])&&(!F.hot._selfAccepted||F.hot._selfInvalidated)){if(F.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:c};if(F.hot._main)return{type:"unaccepted",chain:i,moduleId:c};for(var s=0;s<F.parents.length;s++){var l=F.parents[s],d=E[l];if(d){if(d.hot._declinedDependencies[c])return{type:"declined",chain:i.concat([l]),moduleId:c,parentId:l};-1===n.indexOf(l)&&(d.hot._acceptedDependencies[c]?(t[l]||(t[l]=[]),G(t[l],[c])):(delete t[l],n.push(l),Q.push({chain:i.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function G(e,n){for(var t=0;t<n.length;t++){var Q=n[t];-1===e.indexOf(Q)&&e.push(Q)}}R();var u={},r=[],a={},x=function(){console.warn("[HMR] unexpected require("+Z.moduleId+") to disposed module")};for(var p in g)if(Object.prototype.hasOwnProperty.call(g,p)){var Z;I=X(p),Z=g[p]?U(I):{type:"disposed",moduleId:p};var V=!1,L=!1,N=!1,A="";switch(Z.chain&&(A="\nUpdate propagation: "+Z.chain.join(" -> ")),Z.type){case"self-declined":Q.onDeclined&&Q.onDeclined(Z),Q.ignoreDeclined||(V=new Error("Aborted because of self decline: "+Z.moduleId+A));break;case"declined":Q.onDeclined&&Q.onDeclined(Z),Q.ignoreDeclined||(V=new Error("Aborted because of declined dependency: "+Z.moduleId+" in "+Z.parentId+A));break;case"unaccepted":Q.onUnaccepted&&Q.onUnaccepted(Z),Q.ignoreUnaccepted||(V=new Error("Aborted because "+I+" is not accepted"+A));break;case"accepted":Q.onAccepted&&Q.onAccepted(Z),L=!0;break;case"disposed":Q.onDisposed&&Q.onDisposed(Z),N=!0;break;default:throw new Error("Unexception type "+Z.type)}if(V)return o("abort"),Promise.reject(V);if(L)for(I in a[I]=g[I],G(r,Z.outdatedModules),Z.outdatedDependencies)Object.prototype.hasOwnProperty.call(Z.outdatedDependencies,I)&&(u[I]||(u[I]=[]),G(u[I],Z.outdatedDependencies[I]));N&&(G(r,[Z.moduleId]),a[I]=x)}var W,h=[];for(l=0;l<r.length;l++)I=r[l],E[I]&&E[I].hot._selfAccepted&&a[I]!==x&&!E[I].hot._selfInvalidated&&h.push({module:I,parents:E[I].parents.slice(),errorHandler:E[I].hot._selfAccepted});o("dispose"),Object.keys(y).forEach((function(e){!1===y[e]&&function(e){delete installedChunks[e]}(e)}));var D,S,v=r.slice();for(;v.length>0;)if(I=v.pop(),F=E[I]){var f={},H=F.hot._disposeHandlers;for(d=0;d<H.length;d++)(s=H[d])(f);for(c[I]=f,F.hot.active=!1,delete E[I],delete u[I],d=0;d<F.children.length;d++){var J=E[F.children[d]];J&&((W=J.parents.indexOf(I))>=0&&J.parents.splice(W,1))}}for(I in u)if(Object.prototype.hasOwnProperty.call(u,I)&&(F=E[I]))for(S=u[I],d=0;d<S.length;d++)D=S[d],(W=F.children.indexOf(D))>=0&&F.children.splice(W,1);o("apply"),void 0!==b&&(B=b,b=void 0);for(I in g=void 0,a)Object.prototype.hasOwnProperty.call(a,I)&&(e[I]=a[I]);var T=null;for(I in u)if(Object.prototype.hasOwnProperty.call(u,I)&&(F=E[I])){S=u[I];var Y=[];for(l=0;l<S.length;l++)if(D=S[l],s=F.hot._acceptedDependencies[D]){if(-1!==Y.indexOf(s))continue;Y.push(s)}for(l=0;l<Y.length;l++){s=Y[l];try{s(S)}catch(e){Q.onErrored&&Q.onErrored({type:"accept-errored",moduleId:I,dependencyId:S[l],error:e}),Q.ignoreErrored||T||(T=e)}}}for(l=0;l<h.length;l++){var w=h[l];I=w.module,i=w.parents,t=I;try{m(I)}catch(e){if("function"==typeof w.errorHandler)try{w.errorHandler(e)}catch(n){Q.onErrored&&Q.onErrored({type:"self-accept-error-handler-errored",moduleId:I,error:n,originalError:e}),Q.ignoreErrored||T||(T=n),T||(T=e)}else Q.onErrored&&Q.onErrored({type:"self-accept-errored",moduleId:I,error:e}),Q.ignoreErrored||T||(T=e)}}if(T)return o("fail"),Promise.reject(T);if(C)return n(Q).then((function(e){return r.forEach((function(n){e.indexOf(n)<0&&e.push(n)})),e}));return o("idle"),new Promise((function(e){e(r)}))}(n=n||{})}function R(){if(C)return g||(g={}),C.forEach(L),C=void 0,!0}function L(n){Object.prototype.hasOwnProperty.call(g,n)||(g[n]=e[n])}var E={};function m(n){if(E[n])return E[n].exports;var t=E[n]={i:n,l:!1,exports:{},hot:d(n),parents:(s=i,i=[],s),children:[]};return e[n].call(t.exports,t,t.exports,l(n)),t.l=!0,t.exports}return m.m=e,m.c=E,m.d=function(e,n,t){m.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},m.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.t=function(e,n){if(1&n&&(e=m(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(m.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var Q in e)m.d(t,Q,function(n){return e[n]}.bind(null,Q));return t},m.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return m.d(n,"a",n),n},m.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},m.p="/static/",m.h=function(){return B},l(0)(m.s=0)}([function(e,n,t){e.exports=t(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "World", function() { return /* reexport */ World_World; });\n__webpack_require__.d(__webpack_exports__, "createEntity", function() { return /* reexport */ createEntity; });\n__webpack_require__.d(__webpack_exports__, "createSystem", function() { return /* reexport */ createSystem; });\n\n// CONCATENATED MODULE: ./src/ComponentCollection.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass ComponentCollection {\n  constructor() {\n    _defineProperty(this, "components", new Map());\n\n    _defineProperty(this, "add", component => {\n      this.components.set(component.type, component);\n    });\n\n    _defineProperty(this, "update", (cType, func) => {\n      if (this.components.has(cType)) {\n        const c = this.components.get(cType);\n\n        if (c) {\n          const updatedComponent = func(c);\n          this.components.set(cType, updatedComponent);\n        }\n      }\n    });\n\n    _defineProperty(this, "remove", cType => {\n      this.components.delete(cType);\n    });\n\n    _defineProperty(this, "get", cType => {\n      if (!this.components.has(cType)) {\n        throw new Error(`ComponentCollection does not have component of type ${cType}`);\n      }\n\n      return this.components.get(cType);\n    });\n\n    _defineProperty(this, "has", cType => {\n      if (Array.isArray(cType)) {\n        return cType.every(ct => this.components.has(ct) === true);\n      } else {\n        return this.components.has(cType);\n      }\n    });\n  }\n\n  get componentTypes() {\n    return [...this.components.keys()];\n  }\n\n  get size() {\n    return this.components.size;\n  }\n\n}\n// CONCATENATED MODULE: ./src/World.ts\nfunction World_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass World_World {\n  constructor() {\n    World_defineProperty(this, "componentCollections", new Map());\n\n    World_defineProperty(this, "entities", new Map());\n\n    World_defineProperty(this, "entitiesByCTypes", new Map());\n\n    World_defineProperty(this, "find", predicate => {\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "findAll", predicate => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (predicate(entity)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "locate", cTypes => {\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          return entity;\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "locateAll", cTypes => {\n      const results = [];\n\n      for (const entity of this.entities.values()) {\n        if (entity.components.has(cTypes)) {\n          results.push(entity);\n        }\n      }\n\n      return results;\n    });\n\n    World_defineProperty(this, "grab", cType => {\n      const entity = this.locate(cType);\n\n      if (entity) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n        return {\n          entity,\n          component\n        };\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabBy", (cType, predicate) => {\n      const entities = this.locateAll(cType);\n\n      for (const entity of entities) {\n        const cc = this.componentCollections.get(entity.id) || new ComponentCollection();\n        const component = cc.get(cType);\n\n        if (predicate(component)) {\n          return {\n            component,\n            entity\n          };\n        }\n      }\n\n      return null;\n    });\n\n    World_defineProperty(this, "grabAll", cType => {\n      return this.locateAll(cType).map(entity => ({\n        entity,\n        component: entity.components.get(cType)\n      }));\n    });\n\n    World_defineProperty(this, "get", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      return cc.get(cType);\n    });\n\n    World_defineProperty(this, "set", (eid, component) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection();\n      cc.add(component);\n      this.componentCollections.set(eid, cc);\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n\n      return this;\n    });\n\n    World_defineProperty(this, "remove", (eid, cType) => {\n      const cc = this.componentCollections.get(eid) || new ComponentCollection(); // remove entity from current entitiesByCTypes\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.delete(eid);\n        }\n      }\n\n      cc.remove(cType); // Move entityId to new CTypes if needed.\n\n      for (const [ctArr, entitySet] of this.entitiesByCTypes) {\n        if (ctArr.every(cc.has)) {\n          entitySet.add(eid);\n        }\n      }\n    });\n  }\n\n  /**\n   * Internal method used in setting up a new system.\n   */\n  registerSystem(cTypes) {\n    this.entitiesByCTypes.set(cTypes, new Set());\n    return this;\n  }\n\n  registerEntity(entity) {\n    const cc = new ComponentCollection();\n    this.componentCollections.set(entity.id, cc);\n    this.entities.set(entity.id, entity);\n    return this;\n  }\n  /**\n   * Remove all components that belong to an entity.\n   */\n\n\n  clearEntityComponents(eid) {\n    this.componentCollections.set(eid, new ComponentCollection());\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Destroys an entity.\n   * Same as entity.destroy().\n   */\n\n\n  destroyEntity(eid) {\n    this.componentCollections.delete(eid);\n    this.entities.delete(eid);\n\n    for (const entitySet of this.entitiesByCTypes.values()) {\n      if (entitySet.has(eid)) {\n        entitySet.delete(eid);\n      }\n    }\n\n    return this;\n  }\n\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== \'undefined\' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \'undefined\' && typeof msCrypto.getRandomValues === \'function\' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error(\'crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\');\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/bytesToUuid.js\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var bytesToUuid_i = 0; bytesToUuid_i < 256; ++bytesToUuid_i) {\n  byteToHex.push((bytesToUuid_i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  var offset = offset_ || 0; // Note: Be careful editing this code!  It\'s been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + \'-\' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + \'-\' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + \'-\' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + \'-\' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\n/* harmony default export */ var esm_browser_bytesToUuid = (bytesToUuid);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_bytesToUuid(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// CONCATENATED MODULE: ./src/Entity.ts\nfunction Entity_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Entity_Entity {\n  constructor(world) {\n    Entity_defineProperty(this, "_id", void 0);\n\n    Entity_defineProperty(this, "_world", void 0);\n\n    this._id = esm_browser_v4();\n    this._world = world;\n    /*\n    Registering with the World.\n    */\n\n    this._world.registerEntity(this);\n  }\n  /**\n   * Add a component to an Entity, doh.\n   */\n\n\n  add(component) {\n    this._world.set(this._id, component);\n\n    return this;\n  }\n  /**\n   * Determines if an entity has a component related to it.\n   */\n\n\n  has(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    return cc.has(cType);\n  }\n  /**\n   * Get a component that belongs to an entity.\n   */\n\n\n  get(cType) {\n    const cc = this._world.componentCollections.get(this._id) || new ComponentCollection();\n    const component = cc.get(cType);\n    return component;\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection\n   */\n\n\n  getAll() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n  /**\n   * Get all components that have been added to an entity, via a ComponentCollection.\n   * Does the same thing as entityInstance.getAll().\n   */\n\n\n  get components() {\n    return this._world.componentCollections.get(this._id) || new ComponentCollection();\n  }\n\n  remove(cType) {\n    this._world.remove(this._id, cType);\n\n    return this;\n  }\n  /** Clears all components from an Entity */\n\n\n  clear() {\n    this._world.clearEntityComponents(this._id);\n\n    return this;\n  }\n\n  destroy() {\n    this._world.destroyEntity(this._id);\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get world() {\n    return this._world;\n  }\n\n}\nfunction createEntity(world) {\n  const entity = new Entity_Entity(world);\n  return entity;\n}\n// CONCATENATED MODULE: ./src/System.ts\n\n\n\n/**\n * This is how you create a System.\n * @example\n * ```\n * createSystem(world, [\'ComponentType\'], ({ entity }) => \'Do fun system things here.\')\n * ```\n */\nfunction createSystem(world, cTypes, systemFunc) {\n  world.registerSystem(cTypes);\n  return () => {\n    let index = 0;\n    const size = world.entitiesByCTypes.size; // Used for matching the array of ComponentTypes which is the key\n    // of where the ComponentCollection is, with the array of ComponentTypes\n    // that are passes.\n    // Might be nice in the future to go back to a ref check on cTypes, but\n    // for now this doesn\'t seem to be that much of a perf hit.\n    // for (const ct of world.entitiesByCTypes.keys()) {\n    //   if (cTypes.length === ct.length && cTypes.every(c => ct.includes(c))) {\n    //     for (const eid of world.entitiesByCTypes.get(cTypes)) {\n    //       const args: SystemFuncArgs<CT> = {\n    //         entity: world.entities.get(eid),\n    //         components: world.componentCollections.get(eid),\n    //         world,\n    //         index,\n    //         size,\n    //         isFirst: index === 0,\n    //         isLast: index + 1 === size,\n    //       }\n    //       systemFunc(args);\n    //       index += 1;\n    //     }\n    //   }\n    // }\n\n    const cTypeArrs = world.entitiesByCTypes.get(cTypes) || new Set();\n\n    for (const eid of cTypeArrs) {\n      const args = {\n        entity: world.entities.get(eid) || new Entity_Entity(world),\n        components: world.componentCollections.get(eid) || new ComponentCollection(),\n        world,\n        index,\n        size,\n        isFirst: index === 0,\n        isLast: index + 1 === size\n      };\n      systemFunc(args);\n      index += 1;\n    }\n  };\n}\n// CONCATENATED MODULE: ./src/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N0YXRpYy8uL3NyYy9Db21wb25lbnRDb2xsZWN0aW9uLnRzPzUxYzQiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvV29ybGQudHM/Y2MwYiIsIndlYnBhY2s6Ly9lY3N0YXRpYy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzP2Q4ZjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL2J5dGVzVG9VdWlkLmpzP2I2OTEiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2VjMjYiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvRW50aXR5LnRzP2FjNjgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvU3lzdGVtLnRzPzMyNDgiLCJ3ZWJwYWNrOi8vZWNzdGF0aWMvLi9zcmMvaW5kZXgudHM/ZmZiNCJdLCJuYW1lcyI6WyJDb21wb25lbnRDb2xsZWN0aW9uIiwiTWFwIiwiY29tcG9uZW50IiwiY29tcG9uZW50cyIsInNldCIsInR5cGUiLCJjVHlwZSIsImZ1bmMiLCJoYXMiLCJjIiwiZ2V0IiwidXBkYXRlZENvbXBvbmVudCIsImRlbGV0ZSIsIkVycm9yIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJjdCIsImNvbXBvbmVudFR5cGVzIiwia2V5cyIsInNpemUiLCJXb3JsZCIsInByZWRpY2F0ZSIsImVudGl0eSIsImVudGl0aWVzIiwidmFsdWVzIiwicmVzdWx0cyIsInB1c2giLCJjVHlwZXMiLCJsb2NhdGUiLCJjYyIsImNvbXBvbmVudENvbGxlY3Rpb25zIiwiaWQiLCJsb2NhdGVBbGwiLCJtYXAiLCJlaWQiLCJhZGQiLCJjdEFyciIsImVudGl0eVNldCIsImVudGl0aWVzQnlDVHlwZXMiLCJyZW1vdmUiLCJyZWdpc3RlclN5c3RlbSIsIlNldCIsInJlZ2lzdGVyRW50aXR5IiwiY2xlYXJFbnRpdHlDb21wb25lbnRzIiwiZGVzdHJveUVudGl0eSIsIkVudGl0eSIsImNvbnN0cnVjdG9yIiwid29ybGQiLCJfaWQiLCJ1dWlkdjQiLCJfd29ybGQiLCJnZXRBbGwiLCJjbGVhciIsImRlc3Ryb3kiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdGVTeXN0ZW0iLCJzeXN0ZW1GdW5jIiwiaW5kZXgiLCJjVHlwZUFycnMiLCJhcmdzIiwiaXNGaXJzdCIsImlzTGFzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFZSxNQUFNQSxtQkFBTixDQUE4QjtBQUFBO0FBQUEsd0NBQ0UsSUFBSUMsR0FBSixFQURGOztBQUFBLGlDQUdwQ0MsU0FBRCxJQUFvQztBQUN4QyxXQUFLQyxVQUFMLENBQWdCQyxHQUFoQixDQUFvQkYsU0FBUyxDQUFDRyxJQUE5QixFQUFvQ0gsU0FBcEM7QUFDRCxLQUwwQzs7QUFBQSxvQ0FPbEMsQ0FBQ0ksS0FBRCxFQUFZQyxJQUFaLEtBQWdFO0FBQ3ZFLFVBQUksS0FBS0osVUFBTCxDQUFnQkssR0FBaEIsQ0FBb0JGLEtBQXBCLENBQUosRUFBZ0M7QUFDOUIsY0FBTUcsQ0FBQyxHQUFHLEtBQUtOLFVBQUwsQ0FBZ0JPLEdBQWhCLENBQW9CSixLQUFwQixDQUFWOztBQUVBLFlBQUlHLENBQUosRUFBTztBQUNMLGdCQUFNRSxnQkFBZ0IsR0FBR0osSUFBSSxDQUFDRSxDQUFELENBQTdCO0FBQ0EsZUFBS04sVUFBTCxDQUFnQkMsR0FBaEIsQ0FBb0JFLEtBQXBCLEVBQTJCSyxnQkFBM0I7QUFDRDtBQUNGO0FBQ0YsS0FoQjBDOztBQUFBLG9DQWtCakNMLEtBQUQsSUFBcUI7QUFDNUIsV0FBS0gsVUFBTCxDQUFnQlMsTUFBaEIsQ0FBdUJOLEtBQXZCO0FBQ0QsS0FwQjBDOztBQUFBLGlDQXNCakNBLEtBQUosSUFBcUI7QUFDekIsVUFBSSxDQUFDLEtBQUtILFVBQUwsQ0FBZ0JLLEdBQWhCLENBQW9CRixLQUFwQixDQUFMLEVBQWlDO0FBQy9CLGNBQU0sSUFBSU8sS0FBSixD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ZUFBTyxFQUFFSCxLQUFLLEtBQUssQ0FOWTtBQU8vQkksY0FBTSxFQUFFSixLQUFLLEdBQUcsQ0FBUixLQUFjdEM7QUFQUyxPQUFqQztBQVVBcUMsZ0JBQVUsQ0FBQ0csSUFBRCxDQUFWO0FBRUFGLFdBQUssSUFBSSxDQUFUO0FBQ0Q7QUFDRixHQTlDRDtBQStDRCxDOztBQzVHRDtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vQ29tcG9uZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICBwcml2YXRlIGNvbXBvbmVudHM6IE1hcDxDVCwgQ29tcG9uZW50PENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgYWRkID0gKGNvbXBvbmVudDogQ29tcG9uZW50PENUPik6IHZvaWQgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50cy5zZXQoY29tcG9uZW50LnR5cGUsIGNvbXBvbmVudCk7XG4gIH1cblxuICB1cGRhdGUgPSAoY1R5cGU6IENULCBmdW5jOiAoYzogQ29tcG9uZW50PENUPikgPT4gQ29tcG9uZW50PENUPik6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudHMuaGFzKGNUeXBlKSkge1xuICAgICAgY29uc3QgYyA9IHRoaXMuY29tcG9uZW50cy5nZXQoY1R5cGUpO1xuXG4gICAgICBpZiAoYykge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29tcG9uZW50ID0gZnVuYyhjKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldChjVHlwZSwgdXBkYXRlZENvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJlbW92ZSA9IChjVHlwZTogQ1QpOiB2b2lkID0+IHtcbiAgICB0aGlzLmNvbXBvbmVudHMuZGVsZXRlKGNUeXBlKTtcbiAgfVxuXG4gIGdldCA9IDxDPihjVHlwZTogQ1QpOiBDID0+IHtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50cy5oYXMoY1R5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudENvbGxlY3Rpb24gZG9lcyBub3QgaGF2ZSBjb21wb25lbnQgb2YgdHlwZSAke2NUeXBlfWApXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuZ2V0KGNUeXBlKSBhcyB1bmtub3duIGFzIEM7XG4gIH1cblxuICBoYXMgPSAoY1R5cGU6IENUIHwgQ1RbXSk6IGJvb2xlYW4gPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNUeXBlKSkge1xuICAgICAgcmV0dXJuIGNUeXBlLmV2ZXJ5KChjdCkgPT4gdGhpcy5jb21wb25lbnRzLmhhcyhjdCkgPT09IHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLmhhcyhjVHlwZSlcbiAgICB9XG4gIH1cblxuICBnZXQgY29tcG9uZW50VHlwZXMoKTogQ1RbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmNvbXBvbmVudHMua2V5cygpXTtcbiAgfVxuXG4gIGdldCBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cy5zaXplO1xuICB9XG59XG4iLCJpbXBvcnQgRW50aXR5LCB7IEVudGl0eUlkIH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xuaW1wb3J0IENvbXBvbmVudENvbGxlY3Rpb24gZnJvbSAnLi9Db21wb25lbnRDb2xsZWN0aW9uJztcblxudHlwZSBGaW5kUHJlZGljYXRlPENUPiA9IChlbnRpdHk6IEVudGl0eTxDVD4pID0+IGJvb2xlYW47XG5cbnR5cGUgR3JhYlByZWRpY2F0ZTxDPiA9IChjb21wb25lbnQ6IEMpID0+IGJvb2xlYW47XG5cbmludGVyZmFjZSBTaW5nbGVDb21wb25lbnRSZXNwPENULCBDPiB7XG4gIGVudGl0eTogRW50aXR5PENUPjtcbiAgY29tcG9uZW50OiBDO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JsZDxDVD4ge1xuICBjb21wb25lbnRDb2xsZWN0aW9uczogTWFwPEVudGl0eUlkLCBDb21wb25lbnRDb2xsZWN0aW9uPENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXM6IE1hcDxFbnRpdHlJZCwgRW50aXR5PENUPj4gPSBuZXcgTWFwKCk7XG5cbiAgZW50aXRpZXNCeUNUeXBlczogTWFwPENUW10sIFNldDxFbnRpdHlJZD4+ID0gbmV3IE1hcCgpO1xuXG4gIC8qKlxuICAgKiBcImZpbmRzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGEgcHJlZGljYXRlXG4gICAqL1xuICBmaW5kID0gKHByZWRpY2F0ZTogRmluZFByZWRpY2F0ZTxDVD4pOiBFbnRpdHk8Q1Q+IHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5lbnRpdGllcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShlbnRpdHkpKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiZmluZHNcIiBhbGwgZW50aXRpZXMgYmFzZWQgb24gYSBwcmVkaWNhdGUsIGtpbmRhIGxpa2UgZmlsdGVyLlxuICAgKi9cbiAgZmluZEFsbCA9IChwcmVkaWNhdGU6IEZpbmRQcmVkaWNhdGU8Q1Q+KTogRW50aXR5PENUPltdID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbnRpdHk8Q1Q+W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZW50aXR5KSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvKipcbiAgICogXCJsb2NhdGVzXCIgYSBzaW5nbGUgZW50aXR5IGJhc2VkIG9uIGl0cyBDb21wb25lbnRzLlxuICAgKi9cbiAgbG9jYXRlID0gKGNUeXBlczogQ1QgfCBDVFtdKTogRW50aXR5PENUPiB8IG51bGwgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuZW50aXRpZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHkuY29tcG9uZW50cy5oYXMoY1R5cGVzKSkge1xuICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2NhdGVzIGFsbCBlbnRpdGllcyB0aGF0IGNvbnRhaW4gdGhlIGNvbXBvbmVudHMgbmFtZWRcbiAgICovXG4gIGxvY2F0ZUFsbCA9IChjVHlwZXM6IENUIHwgQ1RbXSk6IEVudGl0eTxDVD5bXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0czogRW50aXR5PENUPltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLmVudGl0aWVzLnZhbHVlcygpKSB7XG4gICAgICBpZiAoZW50aXR5LmNvbXBvbmVudHMuaGFzKGNUeXBlcykpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdyYWJzIHRoZSBmaXJzdCBlbnRpdHksIGFuZCBpdHMgcmVsYXRlZCBjb21wb25lbnQsIHRoYXQgbWF0Y2hlcyB0aGUgY29tcG9uZW50IHR5cGUuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYFxuICAgKiBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50IH0gPSB3b3JsZC5ncmFiPE15Q29tcG9uZW50PihDb21wb25lbnRzLk15Q29tcG9uZW50KTtcbiAgICogYGBgXG4gICAqL1xuICBncmFiID0gPEM+KGNUeXBlOiBDVCk6IFNpbmdsZUNvbXBvbmVudFJlc3A8Q1QsIEM+IHwgbnVsbCA9PiB7XG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5sb2NhdGUoY1R5cGUpO1xuXG4gICAgaWYgKGVudGl0eSkge1xuICAgICAgY29uc3QgY2MgPVxuICAgICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlbnRpdHkuaWQpIHx8XG4gICAgICAgIG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSBjYy5nZXQ8Qz4oY1R5cGUpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbnRpdHksXG4gICAgICAgIGNvbXBvbmVudCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdyYWIgc2luZ2xlIGNvbXBvbmVudCBiYXNlZCBvbiBjb21wb25lbnQgdHlwZSBhbmQgcHJlZGljYXRlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnQgfSA9IHdvcmxkLmdyYWJCeShDb21wb25lbnRzLkZpcnN0Q29tcG9uZW50LCAoY29tcCkgPT4gY29tcC5pZCA9PSAnYXdlc29tZScpXG4gICAqIGBgYFxuICAgKi9cbiAgZ3JhYkJ5ID0gPEM+KFxuICAgIGNUeXBlOiBDVCxcbiAgICBwcmVkaWNhdGU6IEdyYWJQcmVkaWNhdGU8Qz5cbiAgKTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz4gfCBudWxsID0+IHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHRoaXMubG9jYXRlQWxsKGNUeXBlKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICBjb25zdCBjYyA9XG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVudGl0eS5pZCkgfHxcbiAgICAgICAgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGNjLmdldDxDPihjVHlwZSk7XG5cbiAgICAgIGlmIChwcmVkaWNhdGUoY29tcG9uZW50KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbXBvbmVudCxcbiAgICAgICAgICBlbnRpdHksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdyYWIgYWxsIHRoZSBjb21wb25lbnRzIHByaW1hcmlseSwgYW5kIHRoZSBlbnRpdGllcyBpZiBuZWVkZWRcbiAgICovXG4gIGdyYWJBbGwgPSA8Qz4oY1R5cGU6IENUKTogU2luZ2xlQ29tcG9uZW50UmVzcDxDVCwgQz5bXSA9PiB7XG4gICAgcmV0dXJuIHRoaXMubG9jYXRlQWxsKGNUeXBlKS5tYXAoKGVudGl0eSkgPT4gKHtcbiAgICAgIGVudGl0eSxcbiAgICAgIGNvbXBvbmVudDogKGVudGl0eS5jb21wb25lbnRzLmdldChjVHlwZSkgYXMgdW5rbm93bikgYXMgQyxcbiAgICB9KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGVudGl0eSBpZCBhbmQgY29tcG9uZW50VHlwZSwgcmV0dXJucyBjb21wb25lbnRcbiAgICovXG4gIGdldCA9IDxDPihlaWQ6IEVudGl0eUlkLCBjVHlwZTogQ1QpOiBDID0+IHtcbiAgICBjb25zdCBjYyA9XG4gICAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgcmV0dXJuIGNjLmdldDxDPihjVHlwZSk7XG4gIH07XG5cblxuICAvKipcbiAgICogU2V0IGEgY29tcG9uZW50IG9uIHRoZSBnaXZlbiBlbnRpdHlcbiAgICovXG4gIHNldCA9IChlaWQ6IEVudGl0eUlkLCBjb21wb25lbnQ6IENvbXBvbmVudDxDVD4pOiBXb3JsZDxDVD4gPT4ge1xuICAgIGNvbnN0IGNjID1cbiAgICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KGVpZCkgfHwgbmV3IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+KCk7XG5cbiAgICBjYy5hZGQoY29tcG9uZW50KTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVpZCwgY2MpO1xuXG4gICAgZm9yIChjb25zdCBbY3RBcnIsIGVudGl0eVNldF0gb2YgdGhpcy5lbnRpdGllc0J5Q1R5cGVzKSB7XG4gICAgICBpZiAoY3RBcnIuZXZlcnkoY2MuaGFzKSkge1xuICAgICAgICBlbnRpdHlTZXQuYWRkKGVpZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBnaXZlbiBlbnRpdHkuXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBjaGFuZ2Ugd2hhdCBzeXN0ZW1zIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBlbnRpdHkuXG4gICAqL1xuICByZW1vdmUgPSAoZWlkOiBFbnRpdHlJZCwgY1R5cGU6IENUKTogdm9pZCA9PiB7XG4gICAgY29uc3QgY2MgPVxuICAgICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIC8vIHJlbW92ZSBlbnRpdHkgZnJvbSBjdXJyZW50IGVudGl0aWVzQnlDVHlwZXNcbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmIChjdEFyci5ldmVyeShjYy5oYXMpKSB7XG4gICAgICAgIGVudGl0eVNldC5kZWxldGUoZWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjYy5yZW1vdmUoY1R5cGUpO1xuXG4gICAgLy8gTW92ZSBlbnRpdHlJZCB0byBuZXcgQ1R5cGVzIGlmIG5lZWRlZC5cbiAgICBmb3IgKGNvbnN0IFtjdEFyciwgZW50aXR5U2V0XSBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMpIHtcbiAgICAgIGlmIChjdEFyci5ldmVyeShjYy5oYXMpKSB7XG4gICAgICAgIGVudGl0eVNldC5hZGQoZWlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVybmFsIG1ldGhvZCB1c2VkIGluIHNldHRpbmcgdXAgYSBuZXcgc3lzdGVtLlxuICAgKi9cbiAgcmVnaXN0ZXJTeXN0ZW0oY1R5cGVzOiBDVFtdKTogV29ybGQ8Q1Q+IHtcbiAgICB0aGlzLmVudGl0aWVzQnlDVHlwZXMuc2V0KGNUeXBlcywgbmV3IFNldDxFbnRpdHlJZD4oKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlZ2lzdGVyRW50aXR5KGVudGl0eTogRW50aXR5PENUPik6IFdvcmxkPENUPiB7XG4gICAgY29uc3QgY2MgPSBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcblxuICAgIHRoaXMuY29tcG9uZW50Q29sbGVjdGlvbnMuc2V0KGVudGl0eS5pZCwgY2MpO1xuICAgIHRoaXMuZW50aXRpZXMuc2V0KGVudGl0eS5pZCwgZW50aXR5KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgY29tcG9uZW50cyB0aGF0IGJlbG9uZyB0byBhbiBlbnRpdHkuXG4gICAqL1xuICBjbGVhckVudGl0eUNvbXBvbmVudHMoZWlkOiBFbnRpdHlJZCk6IFdvcmxkPENUPiB7XG4gICAgdGhpcy5jb21wb25lbnRDb2xsZWN0aW9ucy5zZXQoZWlkLCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIGFuIGVudGl0eS5cbiAgICogU2FtZSBhcyBlbnRpdHkuZGVzdHJveSgpLlxuICAgKi9cbiAgZGVzdHJveUVudGl0eShlaWQ6IEVudGl0eUlkKTogV29ybGQ8Q1Q+IHtcbiAgICB0aGlzLmNvbXBvbmVudENvbGxlY3Rpb25zLmRlbGV0ZShlaWQpO1xuICAgIHRoaXMuZW50aXRpZXMuZGVsZXRlKGVpZCk7XG5cbiAgICBmb3IgKGNvbnN0IGVudGl0eVNldCBvZiB0aGlzLmVudGl0aWVzQnlDVHlwZXMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChlbnRpdHlTZXQuaGFzKGVpZCkpIHtcbiAgICAgICAgZW50aXR5U2V0LmRlbGV0ZShlaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbi8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xudmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsIi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xudmFyIGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSkpO1xufVxuXG5mdW5jdGlvbiBieXRlc1RvVXVpZChidWYsIG9mZnNldF8pIHtcbiAgdmFyIG9mZnNldCA9IG9mZnNldF8gfHwgMDsgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG5cbiAgcmV0dXJuIChieXRlVG9IZXhbYnVmW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2J1ZltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYnVmW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFtidWZbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYnl0ZXNUb1V1aWQ7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgYnl0ZXNUb1V1aWQgZnJvbSAnLi9ieXRlc1RvVXVpZC5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiBieXRlc1RvVXVpZChybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL0NvbXBvbmVudCc7XG5pbXBvcnQgQ29tcG9uZW50Q29sbGVjdGlvbiBmcm9tICcuL0NvbXBvbmVudENvbGxlY3Rpb24nO1xuXG5leHBvcnQgdHlwZSBFbnRpdHlJZCA9IHN0cmluZztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5PENUPiB7XG4gIHByaXZhdGUgX2lkOiBzdHJpbmc7XG4gIHByaXZhdGUgX3dvcmxkOiBXb3JsZDxDVD47XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFdvcmxkPENUPikge1xuICAgIHRoaXMuX2lkID0gdXVpZHY0KCk7XG4gICAgdGhpcy5fd29ybGQgPSB3b3JsZDtcblxuICAgIC8qXG4gICAgUmVnaXN0ZXJpbmcgd2l0aCB0aGUgV29ybGQuXG4gICAgKi9cbiAgICB0aGlzLl93b3JsZC5yZWdpc3RlckVudGl0eSh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wb25lbnQgdG8gYW4gRW50aXR5LCBkb2guXG4gICAqL1xuICBhZGQoY29tcG9uZW50OiBDb21wb25lbnQ8Q1Q+KTogRW50aXR5PENUPiB7XG4gICAgdGhpcy5fd29ybGQuc2V0KHRoaXMuX2lkLCBjb21wb25lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBhbiBlbnRpdHkgaGFzIGEgY29tcG9uZW50IHJlbGF0ZWQgdG8gaXQuXG4gICAqL1xuICBoYXMoY1R5cGU6IENUKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY2MgPSB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgcmV0dXJuIGNjLmhhcyhjVHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY29tcG9uZW50IHRoYXQgYmVsb25ncyB0byBhbiBlbnRpdHkuXG4gICAqL1xuICBnZXQ8Qz4oY1R5cGU6IENUKTogQyB7XG4gICAgY29uc3QgY2MgPSB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuXG4gICAgY29uc3QgY29tcG9uZW50ID0gY2MuZ2V0PEM+KGNUeXBlKTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjb21wb25lbnRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIGFuIGVudGl0eSwgdmlhIGEgQ29tcG9uZW50Q29sbGVjdGlvblxuICAgKi9cbiAgZ2V0QWxsKCk6IENvbXBvbmVudENvbGxlY3Rpb248Q1Q+IHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQuY29tcG9uZW50Q29sbGVjdGlvbnMuZ2V0KHRoaXMuX2lkKSB8fCBuZXcgQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gYW4gZW50aXR5LCB2aWEgYSBDb21wb25lbnRDb2xsZWN0aW9uLlxuICAgKiBEb2VzIHRoZSBzYW1lIHRoaW5nIGFzIGVudGl0eUluc3RhbmNlLmdldEFsbCgpLlxuICAgKi9cbiAgZ2V0IGNvbXBvbmVudHMoKTogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD4ge1xuICAgIHJldHVybiB0aGlzLl93b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQodGhpcy5faWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpO1xuICB9XG5cbiAgcmVtb3ZlKGNUeXBlOiBDVCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMuX3dvcmxkLnJlbW92ZSh0aGlzLl9pZCwgY1R5cGUpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQ2xlYXJzIGFsbCBjb21wb25lbnRzIGZyb20gYW4gRW50aXR5ICovXG4gIGNsZWFyKCk6IEVudGl0eTxDVD4ge1xuICAgIHRoaXMuX3dvcmxkLmNsZWFyRW50aXR5Q29tcG9uZW50cyh0aGlzLl9pZCk7XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLl93b3JsZC5kZXN0cm95RW50aXR5KHRoaXMuX2lkKTtcbiAgfVxuXG4gIGdldCBpZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIGdldCB3b3JsZCgpOiBXb3JsZDxDVD4ge1xuICAgIHJldHVybiB0aGlzLl93b3JsZDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW50aXR5PENUPihcbiAgd29ybGQ6IFdvcmxkPENUPixcbik6IEVudGl0eTxDVD4ge1xuICBjb25zdCBlbnRpdHkgPSBuZXcgRW50aXR5PENUPih3b3JsZCk7XG5cbiAgcmV0dXJuIGVudGl0eTtcbn1cblxuXG4iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZCc7XG5pbXBvcnQgRW50aXR5IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCBDb21wb25lbnRDb2xsZWN0aW9uIGZyb20gJy4vQ29tcG9uZW50Q29sbGVjdGlvbic7XG5cbmV4cG9ydCB0eXBlIFN5c3RlbSA9ICgpID0+IHZvaWQ7XG5cbi8qKlxuICogQXJndW1lbnRzIHRoYXQgYXJlIHBhc3NlZCBpbnRvIGEgU3lzdGVtIGZ1bmN0aW9uIG9uIGVhY2ggaXRlcmF0aW9uLlxuICogVGhpcyBpcyBob3cgeW91IGFjY2VzIHRoaW5ncyBsaWtlIHRoZSBlbnRpdHkgdGhhdCBwYXJ0aWN1bGFyIGVudGl0eSB0byBhY3Qgb24sXG4gKiBhcyB3ZWxsIGFzIHNvbWUgb3RoZXIgaGVscGZ1bCBwYXJhbXMgbGlrZSBpZiB0aGUgZW50aXR5IGlzIHRoZSBmaXJzdCBvciBsYXN0IGVudGl0eVxuICogaW4gdGhlIGdyb3VwIG9mIGVudGl0aWVzIHRoYXQgYmVpbmcgaXRlcmF0ZWQgb3Zlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1GdW5jQXJnczxDVD4ge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgZW50aXR5IGJlaW5nIGl0ZXJhdGVkLlxuICAgKi9cbiAgZW50aXR5OiBFbnRpdHk8Q1Q+O1xuICAvKipcbiAgICogVGhlIGNvbXBvbmVudHMgdGhhdCBiZWxvbmcgdG8gdGhlIGVudGl0eVxuICAgKi9cbiAgY29tcG9uZW50czogQ29tcG9uZW50Q29sbGVjdGlvbjxDVD47XG4gIC8qKlxuICAgKiBUaGUgV29ybGQgaW5zdGFuY2UuXG4gICAqIFVzZSB0aGlzIHRvIGFjY2VzcyBvdGhlciBlbnRpdGllcy5cbiAgICovXG4gIHdvcmxkOiBXb3JsZDxDVD47XG4gIGluZGV4OiBudW1iZXI7XG4gIHNpemU6IG51bWJlcjtcbiAgLyoqXG4gICAqIElzIHRoZSBmaXJzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIEhlbHBmdWwgZm9yIHNldHRpbmcgdXAgc3RhdGUgdGhhdCBpcyB0aGUgc2FtZSBmb3IgYWxsIGVudGl0aWVzIG9ubHkgb25jZS5cbiAgICovXG4gIGlzRmlyc3Q6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJcyB0aGUgbGFzdCBlbnRpdHkgdG8gYmUgaXRlcmF0ZWQgb24gdGhpcyBydW4gb2YgYSBzeXN0ZW0uXG4gICAqIENhbiBiZSBoZWxwZnVsIHRvIHRlYXIgZG93biBhbnl0aGluZyB0aGF0IHNob3VsZCBiZSBkZWFsdCB3aXRoIGFmdGVyIGFsbCB0aGUgZW50aXRlcyBoYXZlIHJhbi5cbiAgICovXG4gIGlzTGFzdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc3lzdGVtIGlzIHJ1bi5cbiAqL1xuZXhwb3J0IHR5cGUgU3lzdGVtRnVuYzxDVD4gPSAoXG4gIHN5dGVtRnVuY0FyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPixcbikgPT4gdm9pZDtcblxuLyoqXG4gKiBUaGlzIGlzIGhvdyB5b3UgY3JlYXRlIGEgU3lzdGVtLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY3JlYXRlU3lzdGVtKHdvcmxkLCBbJ0NvbXBvbmVudFR5cGUnXSwgKHsgZW50aXR5IH0pID0+ICdEbyBmdW4gc3lzdGVtIHRoaW5ncyBoZXJlLicpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5c3RlbTxDVD4oXG4gIHdvcmxkOiBXb3JsZDxDVD4sXG4gIGNUeXBlczogQ1RbXSxcbiAgc3lzdGVtRnVuYzogU3lzdGVtRnVuYzxDVD5cbik6IFN5c3RlbSB7XG4gIHdvcmxkLnJlZ2lzdGVyU3lzdGVtKGNUeXBlcyk7XG5cbiAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IHNpemUgPSB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLnNpemU7XG5cbiAgICAvLyBVc2VkIGZvciBtYXRjaGluZyB0aGUgYXJyYXkgb2YgQ29tcG9uZW50VHlwZXMgd2hpY2ggaXMgdGhlIGtleVxuICAgIC8vIG9mIHdoZXJlIHRoZSBDb21wb25lbnRDb2xsZWN0aW9uIGlzLCB3aXRoIHRoZSBhcnJheSBvZiBDb21wb25lbnRUeXBlc1xuICAgIC8vIHRoYXQgYXJlIHBhc3Nlcy5cbiAgICAvLyBNaWdodCBiZSBuaWNlIGluIHRoZSBmdXR1cmUgdG8gZ28gYmFjayB0byBhIHJlZiBjaGVjayBvbiBjVHlwZXMsIGJ1dFxuICAgIC8vIGZvciBub3cgdGhpcyBkb2Vzbid0IHNlZW0gdG8gYmUgdGhhdCBtdWNoIG9mIGEgcGVyZiBoaXQuXG4gICAgLy8gZm9yIChjb25zdCBjdCBvZiB3b3JsZC5lbnRpdGllc0J5Q1R5cGVzLmtleXMoKSkge1xuICAgIC8vICAgaWYgKGNUeXBlcy5sZW5ndGggPT09IGN0Lmxlbmd0aCAmJiBjVHlwZXMuZXZlcnkoYyA9PiBjdC5pbmNsdWRlcyhjKSkpIHtcbiAgICAvLyAgICAgZm9yIChjb25zdCBlaWQgb2Ygd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSkge1xuICAgIC8vICAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAvLyAgICAgICAgIGVudGl0eTogd29ybGQuZW50aXRpZXMuZ2V0KGVpZCksXG4gICAgLy8gICAgICAgICBjb21wb25lbnRzOiB3b3JsZC5jb21wb25lbnRDb2xsZWN0aW9ucy5nZXQoZWlkKSxcbiAgICAvLyAgICAgICAgIHdvcmxkLFxuICAgIC8vICAgICAgICAgaW5kZXgsXG4gICAgLy8gICAgICAgICBzaXplLFxuICAgIC8vICAgICAgICAgaXNGaXJzdDogaW5kZXggPT09IDAsXG4gICAgLy8gICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAvLyAgICAgICB9XG4gICAgXG4gICAgLy8gICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcbiAgICBcbiAgICAvLyAgICAgICBpbmRleCArPSAxO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgY29uc3QgY1R5cGVBcnJzID0gd29ybGQuZW50aXRpZXNCeUNUeXBlcy5nZXQoY1R5cGVzKSB8fCBuZXcgU2V0KCk7XG5cbiAgICBmb3IgKGNvbnN0IGVpZCBvZiBjVHlwZUFycnMpIHtcbiAgICAgIGNvbnN0IGFyZ3M6IFN5c3RlbUZ1bmNBcmdzPENUPiA9IHtcbiAgICAgICAgZW50aXR5OiB3b3JsZC5lbnRpdGllcy5nZXQoZWlkKSB8fCBuZXcgRW50aXR5PENUPih3b3JsZCksXG4gICAgICAgIGNvbXBvbmVudHM6IHdvcmxkLmNvbXBvbmVudENvbGxlY3Rpb25zLmdldChlaWQpIHx8IG5ldyBDb21wb25lbnRDb2xsZWN0aW9uPENUPigpLFxuICAgICAgICB3b3JsZCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNpemUsXG4gICAgICAgIGlzRmlyc3Q6IGluZGV4ID09PSAwLFxuICAgICAgICBpc0xhc3Q6IGluZGV4ICsgMSA9PT0gc2l6ZSxcbiAgICAgIH1cblxuICAgICAgc3lzdGVtRnVuYyhhcmdzKTtcblxuICAgICAgaW5kZXggKz0gMTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBXb3JsZCBmcm9tICcuL1dvcmxkJztcbmltcG9ydCB7IGNyZWF0ZUVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IGNyZWF0ZVN5c3RlbSB9IGZyb20gJy4vU3lzdGVtJztcblxuZXhwb3J0IHtcbiAgV29ybGQsXG4gIGNyZWF0ZUVudGl0eSxcbiAgY3JlYXRlU3lzdGVtLFxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')}])}));